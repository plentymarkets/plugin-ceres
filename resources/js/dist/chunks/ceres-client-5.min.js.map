{"version":3,"sources":["webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./resources/js/src/app/components/item/VariationSelect.vue?ea6c","webpack:///resources/js/src/app/components/item/VariationSelect.vue","webpack:///./resources/js/src/app/components/item/VariationSelect.vue?68f5","webpack:///./resources/js/src/app/components/item/VariationSelect.vue"],"names":["DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","key","O","keys","length","i","result","call","push","module","exports","entries","values","$","$values","target","stat","$entries","render","_vm","this","_h","$createElement","_c","_self","attributes","possibleUnitCombinationIds","isContentVisible","staticClass","_l","attribute","class","attributeId","type","ref","refInFor","on","change","$event","selectAttribute","value","addPleaseSelectOption","hasSelection","domProps","_v","_s","$translate","_e","hasEmptyOption","selectedAttributes","selected","attributeValueId","isAttributeSelectionValid","name","directives","rawName","isTextCut","expression","attrs","title","getSelectedAttributeValueName","images","active","invalid","click","getTooltip","src","imageUrl","alt","selectUnit","unitCombinationId","parseInt","selectedUnit","isUnitSelectionValid","possibleUnits","_t","_withStripped","component","options","__file"],"mappings":"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","file":"chunks/ceres-client-5.min.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _vm.attributes.length ||\n    (_vm.possibleUnitCombinationIds.length > 1 && _vm.isContentVisible)\n      ? _c(\n          \"div\",\n          { staticClass: \"row\" },\n          [\n            _vm._l(_vm.attributes, function(attribute) {\n              return _c(\n                \"div\",\n                {\n                  staticClass: \"col-12 variation-select\",\n                  class: \"attribute_\" + attribute.attributeId\n                },\n                [\n                  attribute.type === \"dropdown\"\n                    ? _c(\n                        \"div\",\n                        {\n                          ref: \"attributesContaner\",\n                          refInFor: true,\n                          staticClass: \"input-unit\"\n                        },\n                        [\n                          _c(\n                            \"select\",\n                            {\n                              staticClass: \"custom-select\",\n                              on: {\n                                change: function($event) {\n                                  return _vm.selectAttribute(\n                                    attribute.attributeId,\n                                    $event.target.value\n                                  )\n                                }\n                              }\n                            },\n                            [\n                              _vm.addPleaseSelectOption || !_vm.hasSelection\n                                ? _c(\"option\", { domProps: { value: -1 } }, [\n                                    _vm._v(\n                                      _vm._s(\n                                        _vm.$translate(\n                                          \"Ceres::Template.singleItemPleaseSelect\"\n                                        )\n                                      )\n                                    )\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              _vm.hasEmptyOption ||\n                              _vm.selectedAttributes[attribute.attributeId] ===\n                                null\n                                ? _c(\n                                    \"option\",\n                                    {\n                                      domProps: {\n                                        value: null,\n                                        selected:\n                                          _vm.selectedAttributes[\n                                            attribute.attributeId\n                                          ] === null\n                                      }\n                                    },\n                                    [\n                                      _vm._v(\n                                        _vm._s(\n                                          _vm.$translate(\n                                            \"Ceres::Template.singleItemNoSelection\"\n                                          )\n                                        )\n                                      )\n                                    ]\n                                  )\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              _vm._l(attribute.values, function(value) {\n                                return _c(\n                                  \"option\",\n                                  {\n                                    domProps: {\n                                      value: value.attributeValueId,\n                                      selected:\n                                        value.attributeValueId ===\n                                        _vm.selectedAttributes[\n                                          attribute.attributeId\n                                        ]\n                                    }\n                                  },\n                                  [\n                                    _vm.isAttributeSelectionValid(\n                                      attribute.attributeId,\n                                      value.attributeValueId,\n                                      true\n                                    )\n                                      ? [\n                                          _vm._v(\n                                            \"\\n                                \" +\n                                              _vm._s(value.name) +\n                                              \"\\n                            \"\n                                          )\n                                        ]\n                                      : _vm.isAttributeSelectionValid(\n                                          attribute.attributeId,\n                                          value.attributeValueId,\n                                          false\n                                        )\n                                      ? [\n                                          _vm._v(\n                                            \"\\n                                \" +\n                                              _vm._s(\n                                                _vm.$translate(\n                                                  \"Ceres::Template.singleItemNotSalableAttribute\",\n                                                  { name: value.name }\n                                                )\n                                              ) +\n                                              \"\\n                            \"\n                                          )\n                                        ]\n                                      : [\n                                          _vm._v(\n                                            \"\\n                                \" +\n                                              _vm._s(\n                                                _vm.$translate(\n                                                  \"Ceres::Template.singleItemInvalidAttribute\",\n                                                  { name: value.name }\n                                                )\n                                              ) +\n                                              \"\\n                            \"\n                                          )\n                                        ]\n                                  ],\n                                  2\n                                )\n                              })\n                            ],\n                            2\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"label\",\n                            {\n                              directives: [\n                                {\n                                  name: \"tooltip\",\n                                  rawName: \"v-tooltip\",\n                                  value: _vm.isTextCut(attribute.name),\n                                  expression: \"isTextCut(attribute.name)\"\n                                }\n                              ],\n                              attrs: {\n                                \"data-toggle\": \"tooltip\",\n                                \"data-placement\": \"top\",\n                                title: attribute.name\n                              }\n                            },\n                            [_vm._v(_vm._s(attribute.name))]\n                          )\n                        ]\n                      )\n                    : attribute.type === \"box\" || attribute.type === \"image\"\n                    ? _c(\"div\", { class: \"attr\" + attribute.attributeId }, [\n                        _c(\"div\", { staticClass: \"row attributeName\" }, [\n                          _c(\"div\", { staticClass: \"col-4 text-muted\" }, [\n                            _vm._v(_vm._s(attribute.name) + \":\")\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"div\", { staticClass: \"col-8\" }, [\n                            _c(\"b\", [\n                              _vm._v(\n                                _vm._s(\n                                  _vm.getSelectedAttributeValueName(attribute)\n                                )\n                              )\n                            ])\n                          ])\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\n                          \"div\",\n                          {\n                            staticClass: \"v-s-boxes pt-1 pb-3\",\n                            class: { images: attribute.type === \"image\" }\n                          },\n                          [\n                            _vm.addPleaseSelectOption\n                              ? _c(\n                                  \"div\",\n                                  {\n                                    staticClass:\n                                      \"v-s-box bg-white empty-option\",\n                                    class: {\n                                      active:\n                                        _vm.selectedAttributes[\n                                          attribute.attributeId\n                                        ] === -1,\n                                      invalid: !_vm.isAttributeSelectionValid(\n                                        attribute.attributeId,\n                                        -1\n                                      )\n                                    },\n                                    on: {\n                                      click: function($event) {\n                                        return _vm.selectAttribute(\n                                          attribute.attributeId,\n                                          -1\n                                        )\n                                      }\n                                    }\n                                  },\n                                  [\n                                    _c(\"span\", { staticClass: \"mx-3\" }, [\n                                      _vm._v(\n                                        _vm._s(\n                                          _vm.$translate(\n                                            \"Ceres::Template.singleItemPleaseSelect\"\n                                          )\n                                        )\n                                      )\n                                    ])\n                                  ]\n                                )\n                              : _vm._e(),\n                            _vm._v(\" \"),\n                            _vm.hasEmptyOption\n                              ? _c(\n                                  \"div\",\n                                  {\n                                    staticClass:\n                                      \"v-s-box bg-white empty-option\",\n                                    class: {\n                                      active:\n                                        _vm.selectedAttributes[\n                                          attribute.attributeId\n                                        ] === null,\n                                      invalid: !_vm.isAttributeSelectionValid(\n                                        attribute.attributeId,\n                                        null,\n                                        true\n                                      )\n                                    },\n                                    on: {\n                                      click: function($event) {\n                                        return _vm.selectAttribute(\n                                          attribute.attributeId,\n                                          null\n                                        )\n                                      }\n                                    }\n                                  },\n                                  [\n                                    _c(\"span\", { staticClass: \"mx-3\" }, [\n                                      _vm._v(\n                                        _vm._s(\n                                          _vm.$translate(\n                                            \"Ceres::Template.singleItemNoSelection\"\n                                          )\n                                        )\n                                      )\n                                    ])\n                                  ]\n                                )\n                              : _vm._e(),\n                            _vm._v(\" \"),\n                            _vm._l(attribute.values, function(value) {\n                              return _c(\n                                \"div\",\n                                {\n                                  directives: [\n                                    {\n                                      name: \"tooltip\",\n                                      rawName: \"v-tooltip\",\n                                      value: true,\n                                      expression: \"true\"\n                                    }\n                                  ],\n                                  staticClass: \"v-s-box bg-white\",\n                                  class: [\n                                    \"attrval\" + value.attributeValueId,\n                                    {\n                                      active:\n                                        value.attributeValueId ===\n                                        _vm.selectedAttributes[\n                                          attribute.attributeId\n                                        ],\n                                      invalid: !_vm.isAttributeSelectionValid(\n                                        attribute.attributeId,\n                                        value.attributeValueId,\n                                        true\n                                      )\n                                    }\n                                  ],\n                                  attrs: {\n                                    \"data-html\": \"true\",\n                                    \"data-toggle\": \"tooltip\",\n                                    \"data-placement\": \"top\",\n                                    \"data-original-title\": _vm.getTooltip(\n                                      attribute,\n                                      value\n                                    )\n                                  },\n                                  on: {\n                                    click: function($event) {\n                                      return _vm.selectAttribute(\n                                        attribute.attributeId,\n                                        value.attributeValueId\n                                      )\n                                    }\n                                  }\n                                },\n                                [\n                                  attribute.type === \"box\"\n                                    ? _c(\"span\", { staticClass: \"mx-3\" }, [\n                                        _vm._v(_vm._s(value.name))\n                                      ])\n                                    : _c(\"img\", {\n                                        attrs: {\n                                          src: value.imageUrl,\n                                          alt: value.name\n                                        }\n                                      }),\n                                  _vm._v(\" \"),\n                                  attribute.attributeId == 40\n                                    ? _c(\"span\", { staticClass: \"caption\" }, [\n                                        _vm._v(_vm._s(value.name))\n                                      ])\n                                    : _vm._e()\n                                ]\n                              )\n                            })\n                          ],\n                          2\n                        )\n                      ])\n                    : _vm._e()\n                ]\n              )\n            }),\n            _vm._v(\" \"),\n            _vm.possibleUnitCombinationIds.length > 1 && _vm.isContentVisible\n              ? _c(\"div\", { staticClass: \"col-12 variation-select\" }, [\n                  _c(\"div\", { staticClass: \"input-unit\" }, [\n                    _c(\n                      \"select\",\n                      {\n                        staticClass: \"custom-select\",\n                        on: {\n                          change: function($event) {\n                            return _vm.selectUnit($event.target.value)\n                          }\n                        }\n                      },\n                      _vm._l(_vm.possibleUnitCombinationIds, function(\n                        unitCombinationId\n                      ) {\n                        return _c(\n                          \"option\",\n                          {\n                            domProps: {\n                              value: unitCombinationId,\n                              selected:\n                                parseInt(unitCombinationId) === _vm.selectedUnit\n                            }\n                          },\n                          [\n                            _vm.isUnitSelectionValid(unitCombinationId)\n                              ? [\n                                  _vm._v(\n                                    \"\\n                                  \" +\n                                      _vm._s(\n                                        _vm.possibleUnits[unitCombinationId]\n                                      ) +\n                                      \"\\n                              \"\n                                  )\n                                ]\n                              : [\n                                  _vm._v(\n                                    \"\\n                                  \" +\n                                      _vm._s(\n                                        _vm.$translate(\n                                          \"Ceres::Template.singleItemInvalidAttribute\",\n                                          {\n                                            name:\n                                              _vm.possibleUnits[\n                                                unitCombinationId\n                                              ]\n                                          }\n                                        )\n                                      ) +\n                                      \"\\n                              \"\n                                  )\n                                ]\n                          ],\n                          2\n                        )\n                      }),\n                      0\n                    ),\n                    _vm._v(\" \"),\n                    _c(\"label\", [\n                      _vm._v(\n                        _vm._s(\n                          _vm.$translate(\"Ceres::Template.singleItemContent\")\n                        )\n                      )\n                    ])\n                  ])\n                ])\n              : _vm._e()\n          ],\n          2\n        )\n      : _c(\"div\", [_vm._t(\"default\")], 2)\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div v-if=\"attributes.length || (possibleUnitCombinationIds.length > 1 && isContentVisible)\" class=\"row\">\n              <div class=\"col-12 variation-select\" v-for=\"attribute in attributes\" :class=\"'attribute_' + attribute.attributeId\">\n                    <!-- dropdown -->\n                    <div class=\"input-unit\" ref=\"attributesContaner\" v-if=\"attribute.type === 'dropdown'\">\n                         <select class=\"custom-select\" @change=\"selectAttribute(attribute.attributeId, $event.target.value)\">\n                         <option :value=\"-1\" v-if=\"addPleaseSelectOption || !hasSelection\">{{ $translate(\"Ceres::Template.singleItemPleaseSelect\") }}</option>\n                            <option\n                                    :value=\"null\" v-if=\"hasEmptyOption || selectedAttributes[attribute.attributeId] === null\"\n                                    :selected=\"selectedAttributes[attribute.attributeId] === null\">{{ $translate(\"Ceres::Template.singleItemNoSelection\") }}</option>\n                            <option\n                                    v-for=\"value in attribute.values\"\n                                    :value=\"value.attributeValueId\"\n                                    :selected=\"value.attributeValueId === selectedAttributes[attribute.attributeId]\">\n                                <template v-if=\"isAttributeSelectionValid(attribute.attributeId, value.attributeValueId, true)\">\n                                    {{ value.name }}\n                                </template>\n                                <template v-else-if=\"isAttributeSelectionValid(attribute.attributeId, value.attributeValueId, false)\">\n                                    {{ $translate(\"Ceres::Template.singleItemNotSalableAttribute\", { \"name\": value.name }) }}\n                                </template>\n                                <template v-else>\n                                    {{ $translate(\"Ceres::Template.singleItemInvalidAttribute\", { \"name\": value.name }) }}\n                                </template>\n\n                            </option>\n                        </select>\n                        <label v-tooltip=\"isTextCut(attribute.name)\" data-toggle=\"tooltip\" data-placement=\"top\" :title=\"attribute.name\">{{ attribute.name }}</label>\n                    </div>\n                    <!-- /dropdown -->\n                    <!-- box and image -->\n                    <div v-else-if=\"(attribute.type === 'box' || attribute.type === 'image')\" :class=\"'attr' + attribute.attributeId\">\n                        \n                        <div class=\"row attributeName\">\n                          <div class=\"col-4 text-muted\">{{ attribute.name }}:</div>\n                          <div class=\"col-8\"><b>{{ getSelectedAttributeValueName(attribute) }}</b></div>\n                        </div>\n                    \n                        <div class=\"v-s-boxes pt-1 pb-3\" :class=\"{ 'images': attribute.type === 'image' }\">\n                            <div class=\"v-s-box bg-white empty-option\"\n                                 v-if=\"addPleaseSelectOption\"\n                                 @click=\"selectAttribute(attribute.attributeId, -1)\"\n                                 :class=\"{ 'active': selectedAttributes[attribute.attributeId] === -1, 'invalid': !isAttributeSelectionValid(attribute.attributeId, -1) }\">\n                                <span class=\"mx-3\">{{ $translate(\"Ceres::Template.singleItemPleaseSelect\") }}</span>\n                            </div>\n                            <div class=\"v-s-box bg-white empty-option\"\n                                 v-if=\"hasEmptyOption\"\n                                 @click=\"selectAttribute(attribute.attributeId, null)\"\n                                 :class=\"{ 'active': selectedAttributes[attribute.attributeId] === null, 'invalid': !isAttributeSelectionValid(attribute.attributeId, null, true) }\">\n                                <span class=\"mx-3\">{{ $translate(\"Ceres::Template.singleItemNoSelection\") }}</span>\n                            </div>\n\n                            <div class=\"v-s-box bg-white\"\n                                 v-for=\"value in attribute.values\"\n                                 @click=\"selectAttribute(attribute.attributeId, value.attributeValueId)\"\n                                 :class=\"['attrval' + value.attributeValueId, { 'active': value.attributeValueId === selectedAttributes[attribute.attributeId], 'invalid': !isAttributeSelectionValid(attribute.attributeId, value.attributeValueId, true) }]\"\n                                 v-tooltip=\"true\" data-html=\"true\" data-toggle=\"tooltip\" data-placement=\"top\" :data-original-title=\"getTooltip(attribute, value)\">\n                                <span class=\"mx-3\" v-if=\"attribute.type === 'box'\">{{ value.name }}</span>\n                                <img v-else :src=\"value.imageUrl\" :alt=\"value.name\" />\n                                <span v-if=\"attribute.attributeId == 40\" class=\"caption\">{{ value.name }}</span>\n                            </div>\n                        </div>\n                    </div>\n                    <!-- /box and image -->\n                </div>\n                <!-- units -->\n                  <div class=\"col-12 variation-select\" v-if=\"possibleUnitCombinationIds.length > 1 && isContentVisible\">\n                      <div class=\"input-unit\">\n                          <select class=\"custom-select\" @change=\"selectUnit($event.target.value)\">\n                              <option\n                                      v-for=\"unitCombinationId in possibleUnitCombinationIds\"\n                                      :value=\"unitCombinationId\"\n                                      :selected=\"parseInt(unitCombinationId) === selectedUnit\">\n                                  <template v-if=\"isUnitSelectionValid(unitCombinationId)\">\n                                      {{ possibleUnits[unitCombinationId] }}\n                                  </template>\n                                  <template v-else>\n                                      {{ $translate(\"Ceres::Template.singleItemInvalidAttribute\", { \"name\": possibleUnits[unitCombinationId] }) }}\n                                  </template>\n                              </option>\n                          </select>\n                          <label>{{ $translate(\"Ceres::Template.singleItemContent\") }}</label>\n                      </div>\n                  </div>\n                  <!-- /units -->\n            </div>\n            <div v-else>\n                <slot></slot>\n            </div>\n        </div>\n</template>\n\n<script>\nimport { textWidth } from \"../../helper/dom\";\nimport { isDefined, isNull, isNullOrUndefined } from \"../../helper/utils\";\n\nconst NotificationService = require(\"../../services/NotificationService\");\n\nexport default {\n\n    name: \"variation-select\",\n\n    props: {\n        forceContent:\n        {\n            type: Boolean,\n            default: false\n        }\n    },\n\n    inject: {\n        itemId: {\n            default: null\n        }\n    },\n\n    data()\n    {\n        return {\n            filteredVariationsCache: {},\n            lastContentCount: 0\n        };\n    },\n\n    mounted()\n    {\n        // initially check for valid selection and disable add to basket button\n        this.$store.commit(`${this.itemId}/variationSelect/setIsVariationSelected`, !!this.currentSelection);\n    },\n\n    computed:\n    {\n        currentVariation() {\n            return this.$store.getters[`${this.itemId}/currentItemVariation`];\n        },\n\n        currentVariationSelect() {\n            return this.$store.state.items[this.itemId] && this.$store.state.items[this.itemId].variationSelect;\n        },\n\n        /**\n         * returns true if any variation has no attributes\n         */\n        hasEmptyOption()\n        {\n            return this.variations.some(variation => !variation.attributes.length);\n        },\n\n        addPleaseSelectOption()\n        {\n            return App.config.item.showPleaseSelect;\n        },\n\n        /**\n         * returns the variation, based on the selected attributes / unit\n         * returns false if there are none or multiple results\n         */\n        currentSelection()\n        {\n            const filteredVariations = this.filterVariations(null, null, true);\n\n            if (filteredVariations.length === 1)\n            {\n                return filteredVariations[0];\n            }\n\n            return false;\n        },\n\n        /**\n         * returns all units, selectable by current selection\n         * prop 'forceContent' with value true will return all units, without filtering\n         */\n        possibleUnits()\n        {\n            // use an object, to make the entries unique\n            const possibleUnits = {};\n            const variations = this.forceContent ? this.variations : this.filterVariations(null, null, null, true);\n\n            for (const variation of variations)\n            {\n                possibleUnits[variation.unitCombinationId] = variation.unitName;\n            }\n\n            return possibleUnits;\n        },\n\n        possibleUnitCombinationIds()\n        {\n            return this.transformPossibleUnits(this.possibleUnits).map(value => value[0]);\n        },\n\n        isContentVisible()\n        {\n            return !this.forceContent && !!this.currentSelection || this.forceContent;\n        },\n\n        hasSelection()\n        {\n            return !isNullOrUndefined(this.selectedAttributes) && !Object.values(this.selectedAttributes).some((value) => value < 0);\n        },\n\n        attributes() {\n            let attributes = [];\n            if (this.currentVariationSelect && this.currentVariationSelect.attributes)\n            {\n                for (let attribute of this.currentVariationSelect.attributes)\n                {\n                    let newAttribute = attribute;\n                    if (this.newAttributeNames !== null && \"object\" === typeof this.newAttributeNames && attribute.attributeId in this.newAttributeNames) {\n                        // Use the value from newAttributeNames as the newValue\n                        const newValue = this.newAttributeNames[attribute.attributeId];\n                        // Update the name of the attribute with the new value\n                        newAttribute.name = newValue;\n                    }\n\n                    // Override Attribute values if present\n                    let newValues = [];\n                    for (let value of newAttribute.values) {\n                        if (this.newAttributeValues !== null && \"object\" === typeof this.newAttributeValues && value.attributeValueId in this.newAttributeValues\n                            && this.newAttributeValues[value.attributeValueId].trim() != \"\") {\n                            value.name = this.newAttributeValues[value.attributeValueId];\n                        }\n                        newValues.push(value);\n                    }\n                    newAttribute.values = newValues;\n\n                    attributes.push(newAttribute);\n                }\n            }\n            return attributes;\n        },\n\n        selectedAttributes() {\n            return this.currentVariationSelect && this.currentVariationSelect.selectedAttributes;\n        },\n\n        selectedUnit() {\n            return this.currentVariationSelect && this.currentVariationSelect.selectedUnit;\n        },\n\n        variations() {\n            return this.currentVariationSelect && this.currentVariationSelect.variations;\n        },\n\n        // Enable to overwrite attribute names on variations product page\n        // by using a property (id 49). Example: 3:Neue Farbe,4:Neues Modell,37:Neuer Matratzen Name\n        newAttributeNames() {\n            if (this.currentVariation && this.currentVariation.variationProperties) {\n                for (const variationProperty of this.currentVariation.variationProperties) {\n                    if (variationProperty.properties) {\n                        const property49 = variationProperty.properties.find(property => property.id === 49);\n                        if (property49 && property49.values.value != \"\" && property49.values.value != null) {\n                            const valueArray = property49.values.value.split(',');\n                            const resultObject = {};\n                            valueArray.forEach(element => {\n                                const pair = element.split(':');\n                                resultObject[pair[0]] = pair[1];\n                            });\n                            return resultObject;\n                        }\n                    }\n                }\n            }\n            return null;\n        },\n        newAttributeValues() {\n            if (this.currentVariation && this.currentVariation.variationProperties) {\n                for (const variationProperty of this.currentVariation.variationProperties) {\n                    if (variationProperty.properties) {\n                        const property38 = variationProperty.properties.find(property => property.id === 38);\n                        if (property38 && property38.values.value != \"\" && property38.values.value != null) {\n                            const valueArray = property38.values.value.split(',');\n                            const resultObject = {};\n                            valueArray.forEach(element => {\n                                const pair = element.split(':');\n                                resultObject[pair[0]] = pair[1];\n                            });\n                            return resultObject;\n                        }\n                    }\n                }\n            }\n            return null;\n        }\n    },\n\n    methods:\n    {\n        /**\n         * select an attribute and check, if the selection is valid; if not, unsetInvalidSelection will be executed\n         * @param {number} attributeId\n         * @param {[number, string, null]} attributeValueId\n         */\n        selectAttribute(attributeId, attributeValueId)\n        {\n            attributeValueId = parseInt(attributeValueId) || null;\n\n            if (this.selectedAttributes[attributeId] !== attributeValueId)\n            {\n                this.$store.commit(`${this.itemId}/variationSelect/selectItemAttribute`, { attributeId, attributeValueId });\n                this.onSelectionChange(attributeId, attributeValueId, null);\n            }\n        },\n\n        /**\n         * select a unit and check, if the selection is valid; if not, unsetInvalidSelection will be executed\n         * @param {[number, string]} unitId\n         */\n        selectUnit(unitId)\n        {\n            unitId = parseInt(unitId);\n            this.$store.commit(`${this.itemId}/variationSelect/selectItemUnit`, unitId);\n            this.onSelectionChange(null, null, unitId);\n        },\n\n        onSelectionChange(attributeId, attributeValueId, unitId)\n        {\n            if (this.currentSelection)\n            {\n                this.setVariation(this.currentSelection.variationId);\n            }\n            else if (!this.hasSelection)\n            {\n                // user switched back to \"please select\"\n                this.setVariation(0);\n            }\n            else\n            {\n                this.unsetInvalidSelection(attributeId, attributeValueId, unitId);\n            }\n\n            this.lastContentCount = this.possibleUnitCombinationIds.length;\n        },\n\n        /**\n         * changes the selected attributes / unit, to ensure a valid seelction\n         * @param {[number, null]} attributeId\n         * @param {[number, null]} attributeValueId\n         * @param {[number, null]} unitId\n         */\n        unsetInvalidSelection(attributeId, attributeValueId, unitId)\n        {\n            const qualifiedVariations = this.getQualifiedVariations(attributeId, attributeValueId, unitId);\n            const closestVariations = this.getClosestVariations(qualifiedVariations);\n            \n            // if the salable 'closestVariations' is undefined, take the not-salable one\n            const closestVariation = closestVariations[0] || closestVariations[1];\n\n            if (!closestVariation)\n            {\n                return;\n            }\n\n            const invalidSelection = this.getInvalidSelectionByVariation(closestVariation);\n\n            this.correctSelection(invalidSelection);\n        },\n\n        getTooltip(attribute, attributeValue)\n        {\n            if(!this.isAttributeSelectionValid(attribute.attributeId, attributeValue.attributeValueId, true))\n            {\n                return this.getInvalidOptionTooltip(attribute.attributeId, attributeValue.attributeValueId);\n            }\n            else if(attribute.type === \"image\")\n            {\n                return this.$translate(\"Ceres::Template.singleItemAttributeTooltip\", {\n                    attribute: attribute.name,\n                    value: attributeValue.name\n                });\n            }\n\n            return \"\";\n        },\n\n        /**\n         * returns a string for box tooltips, for not available options\n         * @param {number} attributeId\n         * @param {number} attributeValueId\n         */\n        getInvalidOptionTooltip(attributeId, attributeValueId)\n        {\n            const qualifiedVariations = this.getQualifiedVariations(attributeId, attributeValueId);\n            const closestVariations   = this.getClosestVariations(qualifiedVariations);\n\n            if (!closestVariations || closestVariations.length <= 0)\n            {\n                return \"\";\n            }\n\n            const invalidSelections = [\n                !!closestVariations[0] ? this.getInvalidSelectionByVariation(closestVariations[0]) : null,\n                !!closestVariations[1] ? this.getInvalidSelectionByVariation(closestVariations[1]) : null\n            ];\n\n            if (!!invalidSelections[0]\n                && !!invalidSelections[1]\n                && invalidSelections[0].attributesToReset.length > invalidSelections[1].attributesToReset.length)\n            {\n                // there is a non-salable variation with less changes\n                return this.$translate(\"Ceres::Template.singleItemNotSalable\");\n            }\n\n            const invalidSelection = invalidSelections[0] || invalidSelections[1];\n            const names = [];\n\n            for (const attribute of invalidSelection.attributesToReset)\n            {\n                if (attribute.attributeId !== attributeId)\n                {\n                    names.push(\"<b>\" + attribute.name +\"</b>\");\n                }\n            }\n            if (invalidSelection.newUnit)\n            {\n                names.push(\n                    \"<b>\" + this.$translate(\"Ceres::Template.singleItemContent\") + \"</b>\"\n                );\n            }\n\n            if (!names.length)\n            {\n                return null;\n            }\n\n            return this.$translate(\"Ceres::Template.singleItemNotAvailableInSelection\", { name: names.join(\", \") });\n        },\n\n        /**\n         * returns a list of variations, filtered by attribute or unit\n         * @param {[number, null]} attributeId\n         * @param {[number, null]} attributeValueId\n         * @param {[number, null]} unitId\n         */\n        getQualifiedVariations(attributeId, attributeValueId, unitId)\n        {\n            if (isDefined(attributeValueId))\n            {\n                return this.variations.filter(variation =>\n                {\n                    return isDefined(variation.attributes.find(attribute =>\n                        attribute.attributeId === attributeId && attribute.attributeValueId === attributeValueId));\n                });\n            }\n            else if (isDefined(unitId))\n            {\n                return this.variations.filter(variation => variation.unitCombinationId === unitId);\n            }\n\n            return this.variations.filter(variation => !variation.attributes.length);\n        },\n\n        /**\n         * return a salable and a non-salable variation with the minimum number of changes on attributes compared to the current selection.\n         * @param {array} qualifiedVariations\n         */\n        getClosestVariations(qualifiedVariations)\n        {\n            let closestSalableVariation, numberOfSalableChanges;\n            let closestNonSalableVariation, numberOfNonSalableChanges;\n\n            for (const variation of qualifiedVariations)\n            {\n                let changes = 0;\n\n                if (variation.unitCombinationId !== this.selectedUnit && !isNull(this.selectedUnit))\n                {\n                    // when the unit dropdown isn't visible, it should have a lower weight for reset investigations\n                    const unitWeight = this.possibleUnitCombinationIds.length > 1 && this.isContentVisible ? 0.9 : 0.1;\n\n                    changes += unitWeight;\n                }\n\n                for (const attribute of variation.attributes)\n                {\n                    if (this.selectedAttributes[attribute.attributeId] !== attribute.attributeValueId)\n                    {\n                        changes++;\n                    }\n                }\n\n                if(variation.isSalable && (!numberOfSalableChanges || changes < numberOfSalableChanges))\n                {\n                    closestSalableVariation = variation;\n                    numberOfSalableChanges = changes;\n                }\n                else if (!variation.isSalable && (!numberOfNonSalableChanges || changes < numberOfNonSalableChanges))\n                {\n                    closestNonSalableVariation = variation;\n                    numberOfNonSalableChanges = changes;\n                }\n            }\n\n            return [closestSalableVariation, closestNonSalableVariation];\n        },\n\n        /**\n         * returns object with array 'attributesToReset' and newUnit. The attributesToReset contains all attributes, which are not matching with the given variation\n         * @param {object} variation\n         */\n        getInvalidSelectionByVariation(variation)\n        {\n            const attributesToReset = [];\n            let newUnit = null;\n\n            for (let selectedAttributeId in this.selectedAttributes)\n            {\n                selectedAttributeId = parseInt(selectedAttributeId);\n                const variationAttribute = variation.attributes.find(attribute => attribute.attributeId === selectedAttributeId);\n\n                if (!isNull(this.selectedAttributes[selectedAttributeId]))\n                {\n                    if (variationAttribute && variationAttribute.attributeValueId !== this.selectedAttributes[selectedAttributeId] || !variationAttribute)\n                    {\n                        const attributeToReset = this.attributes.find(attr => attr.attributeId === selectedAttributeId);\n\n                        attributesToReset.push(attributeToReset);\n                    }\n                }\n            }\n\n            if (variation.unitCombinationId !== this.selectedUnit)\n            {\n                newUnit = variation.unitCombinationId;\n            }\n\n            return { attributesToReset, newUnit };\n        },\n\n        /**\n         * resets all invalid attributes and change the unit, if required. Prints a message to the user if so.\n         * @param {object} invalidSelection\n         */\n        correctSelection(invalidSelection)\n        {\n            const messages   = [];\n            const attributes = JSON.parse(JSON.stringify(this.selectedAttributes));\n\n            for (const attributeToReset of invalidSelection.attributesToReset)\n            {\n                messages.push(\n                    this.$translate(\"Ceres::Template.singleItemNotAvailable\", { name: attributeToReset.name })\n                );\n\n                attributes[attributeToReset.attributeId] = (!this.hasEmptyOption && App.config.item.showPleaseSelect) ? -1 : null;\n            }\n\n            if (invalidSelection.newUnit)\n            {\n                if (this.lastContentCount > 1 && this.possibleUnitCombinationIds.length > 1 && !isNull(this.selectedUnit))\n                {\n                    messages.push(\n                        this.$translate(\"Ceres::Template.singleItemNotAvailable\", { name:\n                                this.$translate(\"Ceres::Template.singleItemContent\")\n                        })\n                    );\n                }\n\n                this.$store.commit(`${this.itemId}/variationSelect/selectItemUnit`, invalidSelection.newUnit);\n            }\n\n            this.$store.commit(`${this.itemId}/variationSelect/setItemSelectedAttributes`, attributes);\n\n            this.setVariation(this.currentSelection ? this.currentSelection.variationId : 0);\n\n            NotificationService.warn(\n                messages.join(\"<br>\")\n            ).closeAfter(5000);\n        },\n\n        /**\n         * returns matching variations with current selection\n         * attributes and unitId could be filled, to check a specific selection\n         * @param {object} attributes\n         * @param {number} unitId\n         * @param {boolean} strict\n         */\n        filterVariations(attributes, unitId, strict, ignoreUnit)\n        {\n            attributes = attributes || this.selectedAttributes;\n            unitId = unitId || this.selectedUnit;\n            strict = !!strict;\n            ignoreUnit = !!ignoreUnit;\n\n            const key = JSON.stringify(attributes) + \"_\" + unitId + \"_\" + strict + \"_\" + ignoreUnit;\n\n            if (isDefined(this.filteredVariationsCache[key]))\n            {\n                return this.filteredVariationsCache[key];\n            }\n\n            const uniqueValues = [...new Set(Object.values(attributes))];\n            const isEmptyOptionSelected = uniqueValues.length === 1 && isNull(uniqueValues[0]);\n            const filteredVariations = this.variations.filter(variation =>\n            {\n                // the selected unit is not matching\n                if (!ignoreUnit && variation.unitCombinationId !== unitId)\n                {\n                    return false;\n                }\n\n                // the variation has no attributes (only checked, if any attribute has a selected value); or the variation has attributes and empty option is selected\n                // requires more than 0 attributes\n                if (((!isEmptyOptionSelected && !variation.attributes.length) || (isEmptyOptionSelected && variation.attributes.length))\n                    && this.attributes.length > 0)\n                {\n                    return false;\n                }\n\n                for (const attributeId in attributes)\n                {\n                    const variationAttribute = variation.attributes.find(variationAttribute =>\n                        variationAttribute.attributeId === parseInt(attributeId));\n\n                    // an attribute is not matching with selection\n                    if (variationAttribute &&\n                        variationAttribute.attributeValueId !== attributes[attributeId] &&\n                        (strict || !strict && !isNull(attributes[attributeId]) && attributes[attributeId] !== -1))\n                    {\n                        return false;\n                    }\n                }\n\n                return true;\n            });\n\n            this.filteredVariationsCache[key] = filteredVariations;\n\n            return filteredVariations;\n        },\n\n        /**\n         * returns true, if the selection with a new attribute value would be valid\n         * @param {number} attributeId\n         * @param {[number, string, null]} attributeValueId\n         * @param {boolean} filterSalableVariations\n         */\n        isAttributeSelectionValid(attributeId, attributeValueId, filterSalableVariations)\n        {\n            attributeValueId = parseInt(attributeValueId) || null;\n            if (this.selectedAttributes[attributeId] === attributeValueId)\n            {\n                return true;\n            }\n\n            const selectedAttributes = JSON.parse(JSON.stringify(this.selectedAttributes));\n\n            selectedAttributes[attributeId] = parseInt(attributeValueId) || null;\n\n            const ignoreUnit = !(Object.keys(this.possibleUnits).length > 1 && this.isContentVisible);\n            let variations = this.filterVariations(selectedAttributes, null, null, ignoreUnit);\n\n            if (filterSalableVariations)\n            {\n                variations = variations.filter(variation => variation.isSalable)\n            }\n\n            return variations.length > 0;\n        },\n\n        /**\n         * returns true, if the selection with a new unitId would be valid\n         * @param {[number, string]} unitId\n         */\n        isUnitSelectionValid(unitId)\n        {\n            unitId = parseInt(unitId);\n            if (this.selectedUnit === unitId)\n            {\n                return true;\n            }\n\n            return this\n                .filterVariations(null, unitId)\n                .filter(variation => variation.isSalable)\n                .length > 0\n        },\n\n        /**\n         * dispatch vuex action 'loadVariation' to archive a variation\n         * dispatches a custom event named 'onVariationChanged'\n         * @param {[string, number, null]} variationId\n         */\n        setVariation(variationId)\n        {\n            if (!isDefined(variationId) && this.currentSelection)\n            {\n                variationId = this.currentSelection.variationId;\n            }\n\n            if (isDefined(variationId))\n            {\n                this.$store.dispatch(`${this.itemId}/loadVariation`, variationId).then(variation =>\n                {\n                    document.dispatchEvent(new CustomEvent(\"onVariationChanged\",\n                        {\n                            detail:\n                                {\n                                    attributes: variation.attributes,\n                                    documents: variation.documents,\n                                    itemId: this.itemId\n                                }\n                        }));\n                });\n            }\n        },\n\n        isTextCut(content)\n        {\n            if (this.$refs.attributesContaner)\n            {\n                return textWidth(content, \"Custom-Font, Helvetica, Arial, sans-serif\") > this.$refs.attributesContaner[0].clientWidth;\n            }\n\n            return false;\n        },\n\n        getSelectedAttributeValueName(attribute)\n        {\n            const selectedAttributeValueId =  this.selectedAttributes[attribute.attributeId];\n            const selectedAttributeValue = attribute.values.find(attrValue => attrValue.attributeValueId === selectedAttributeValueId);\n\n            if (selectedAttributeValue)\n            {\n                return selectedAttributeValue.name;\n            }\n            else if (App.config.item.showPleaseSelect && selectedAttributeValueId === -1)\n            {\n                return this.$translate(\"Ceres::Template.singleItemPleaseSelect\");\n            }\n            return this.$translate(\"Ceres::Template.singleItemNoSelection\");\n        },\n\n        transformPossibleUnits(possibleUnits)\n        {\n            return Object.entries(possibleUnits).sort((unitA, unitB) => {\n                unitA = this.splitUnitName(unitA[1]);\n                unitB = this.splitUnitName(unitB[1]);\n                // order by unit\n                if (unitA[1] < unitB[1]) {\n                    return -1;\n                }\n                if (unitA[1] > unitB[1]) {\n                    return 1;\n                }\n                // order by content (count)\n                if (unitA[0] < unitB[0]) {\n                    return -1;\n                }\n                if (unitA[0] > unitB[0]) {\n                    return 1;\n                }\n                return 0;\n            });\n        },\n        splitUnitName(unitName) {\n            const unitNameSplit = unitName.split(\" \");\n\n            if (!isNaN(unitNameSplit[0])) {\n                unitNameSplit[0] = unitNameSplit[0].replace(App.currencyPattern.separator_thousands, \"\");\n                unitNameSplit[0] = parseInt(unitNameSplit[0]);\n            }\n\n            return unitNameSplit;\n        }\n    },\n\n    watch:\n    {\n        currentSelection(value)\n        {\n            this.$store.commit(`${this.itemId}/variationSelect/setIsVariationSelected`, !!value);\n        },\n        variations()\n        {\n            // FIX unset variation cache after subsequent variations are loaded\n            this.filteredVariationsCache = {};\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VariationSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VariationSelect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VariationSelect.vue?vue&type=template&id=4a939d05&\"\nimport script from \"./VariationSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./VariationSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/schweser/GitHub/plentyDevTool/17831/40/Ceres/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4a939d05')) {\n      api.createRecord('4a939d05', component.options)\n    } else {\n      api.reload('4a939d05', component.options)\n    }\n    module.hot.accept(\"./VariationSelect.vue?vue&type=template&id=4a939d05&\", function () {\n      api.rerender('4a939d05', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/app/components/item/VariationSelect.vue\"\nexport default component.exports"],"sourceRoot":""}