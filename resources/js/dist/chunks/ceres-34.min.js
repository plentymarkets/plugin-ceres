(self.webpackChunkCeres=self.webpackChunkCeres||[]).push([[34],{44699:function(module,__unused_webpack_exports,__webpack_require__){eval("var DESCRIPTORS = __webpack_require__(19781);\nvar uncurryThis = __webpack_require__(1702);\nvar objectKeys = __webpack_require__(81956);\nvar toIndexedObject = __webpack_require__(45656);\nvar $propertyIsEnumerable = (__webpack_require__(55296).f);\n\nvar propertyIsEnumerable = uncurryThis($propertyIsEnumerable);\nvar push = uncurryThis([].push);\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable(O, key)) {\n        push(result, TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQ2OTkuanMiLCJtYXBwaW5ncyI6IkFBQUEsa0JBQWtCLG1CQUFPLENBQUMsS0FBMEI7QUFDcEQsa0JBQWtCLG1CQUFPLENBQUMsSUFBb0M7QUFDOUQsaUJBQWlCLG1CQUFPLENBQUMsS0FBMEI7QUFDbkQsc0JBQXNCLG1CQUFPLENBQUMsS0FBZ0M7QUFDOUQsNEJBQTRCLDhCQUF1RDs7QUFFbkY7QUFDQTs7QUFFQSxhQUFhLGlCQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9DZXJlcy8uL25vZGVfbW9kdWxlcy9jb3JlLWpzL2ludGVybmFscy9vYmplY3QtdG8tYXJyYXkuanM/NmY1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgREVTQ1JJUFRPUlMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZGVzY3JpcHRvcnMnKTtcbnZhciB1bmN1cnJ5VGhpcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9mdW5jdGlvbi11bmN1cnJ5LXRoaXMnKTtcbnZhciBvYmplY3RLZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1rZXlzJyk7XG52YXIgdG9JbmRleGVkT2JqZWN0ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL3RvLWluZGV4ZWQtb2JqZWN0Jyk7XG52YXIgJHByb3BlcnR5SXNFbnVtZXJhYmxlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC1wcm9wZXJ0eS1pcy1lbnVtZXJhYmxlJykuZjtcblxudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gdW5jdXJyeVRoaXMoJHByb3BlcnR5SXNFbnVtZXJhYmxlKTtcbnZhciBwdXNoID0gdW5jdXJyeVRoaXMoW10ucHVzaCk7XG5cbi8vIGBPYmplY3QueyBlbnRyaWVzLCB2YWx1ZXMgfWAgbWV0aG9kcyBpbXBsZW1lbnRhdGlvblxudmFyIGNyZWF0ZU1ldGhvZCA9IGZ1bmN0aW9uIChUT19FTlRSSUVTKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaXQpIHtcbiAgICB2YXIgTyA9IHRvSW5kZXhlZE9iamVjdChpdCk7XG4gICAgdmFyIGtleXMgPSBvYmplY3RLZXlzKE8pO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBrZXk7XG4gICAgd2hpbGUgKGxlbmd0aCA+IGkpIHtcbiAgICAgIGtleSA9IGtleXNbaSsrXTtcbiAgICAgIGlmICghREVTQ1JJUFRPUlMgfHwgcHJvcGVydHlJc0VudW1lcmFibGUoTywga2V5KSkge1xuICAgICAgICBwdXNoKHJlc3VsdCwgVE9fRU5UUklFUyA/IFtrZXksIE9ba2V5XV0gOiBPW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIGBPYmplY3QuZW50cmllc2AgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LmVudHJpZXNcbiAgZW50cmllczogY3JlYXRlTWV0aG9kKHRydWUpLFxuICAvLyBgT2JqZWN0LnZhbHVlc2AgbWV0aG9kXG4gIC8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LnZhbHVlc1xuICB2YWx1ZXM6IGNyZWF0ZU1ldGhvZChmYWxzZSlcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///44699\n")},69720:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){eval("var $ = __webpack_require__(82109);\nvar $entries = (__webpack_require__(44699).entries);\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjk3MjAuanMiLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxtQkFBTyxDQUFDLEtBQXFCO0FBQ3JDLGVBQWUsb0NBQStDOztBQUU5RDtBQUNBO0FBQ0EsSUFBSSw4QkFBOEI7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0NlcmVzLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcz80ZmFkIl0sInNvdXJjZXNDb250ZW50IjpbInZhciAkID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL2V4cG9ydCcpO1xudmFyICRlbnRyaWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWxzL29iamVjdC10by1hcnJheScpLmVudHJpZXM7XG5cbi8vIGBPYmplY3QuZW50cmllc2AgbWV0aG9kXG4vLyBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLW9iamVjdC5lbnRyaWVzXG4kKHsgdGFyZ2V0OiAnT2JqZWN0Jywgc3RhdDogdHJ1ZSB9LCB7XG4gIGVudHJpZXM6IGZ1bmN0aW9uIGVudHJpZXMoTykge1xuICAgIHJldHVybiAkZW50cmllcyhPKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///69720\n")},26833:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){eval("var $ = __webpack_require__(82109);\nvar $values = (__webpack_require__(44699).values);\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY4MzMuanMiLCJtYXBwaW5ncyI6IkFBQUEsUUFBUSxtQkFBTyxDQUFDLEtBQXFCO0FBQ3JDLGNBQWMsbUNBQThDOztBQUU1RDtBQUNBO0FBQ0EsSUFBSSw4QkFBOEI7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0NlcmVzLy4vbm9kZV9tb2R1bGVzL2NvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzPzA3YWMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyICQgPSByZXF1aXJlKCcuLi9pbnRlcm5hbHMvZXhwb3J0Jyk7XG52YXIgJHZhbHVlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFscy9vYmplY3QtdG8tYXJyYXknKS52YWx1ZXM7XG5cbi8vIGBPYmplY3QudmFsdWVzYCBtZXRob2Rcbi8vIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMtb2JqZWN0LnZhbHVlc1xuJCh7IHRhcmdldDogJ09iamVjdCcsIHN0YXQ6IHRydWUgfSwge1xuICB2YWx1ZXM6IGZ1bmN0aW9uIHZhbHVlcyhPKSB7XG4gICAgcmV0dXJuICR2YWx1ZXMoTyk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///26833\n")},75356:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  "default": function() { return /* binding */ VariationSelect; }\n});\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.function.name.js\nvar es_function_name = __webpack_require__(68309);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.iterator.js\nvar es_array_iterator = __webpack_require__(66992);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.to-string.js\nvar es_object_to_string = __webpack_require__(41539);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom-collections.iterator.js\nvar web_dom_collections_iterator = __webpack_require__(33948);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.parse-int.js\nvar es_parse_int = __webpack_require__(91058);\n;// CONCATENATED MODULE: ./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use!./node_modules/vue-loader/lib/loaders/templateLoader.js??ruleSet[1].rules[2]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=588c1887&\n\n\n\n\n\nvar render = function render() {\n  var _vm = this,\n    _c = _vm._self._c;\n  return _c("div", {\n    staticClass: "row"\n  }, [_vm.attributes.length || _vm.possibleUnitCombinationIds.length > 1 && _vm.isContentVisible ? [_vm._l(_vm.attributes, function (attribute, index) {\n    return _c("div", {\n      key: index,\n      staticClass: "col-12 variation-select"\n    }, [attribute.type === "dropdown" ? _c("div", {\n      ref: "attributesContaner",\n      refInFor: true,\n      staticClass: "input-unit"\n    }, [_c("select", {\n      staticClass: "custom-select",\n      attrs: {\n        id: "custom-select_" + attribute.name,\n        "data-testing": "variation-select-dropdown"\n      },\n      on: {\n        change: function change($event) {\n          return _vm.selectAttribute(attribute.attributeId, $event.target.value);\n        }\n      }\n    }, [_vm.addPleaseSelectOption || !_vm.hasSelection ? _c("option", {\n      domProps: {\n        value: -1\n      }\n    }, [_vm._v(_vm._s(_vm.$translate("Ceres::Template.singleItemPleaseSelect")))]) : _vm._e(), _vm._v(" "), _vm.hasEmptyOption || _vm.selectedAttributes[attribute.attributeId] === null ? _c("option", {\n      domProps: {\n        value: null,\n        selected: _vm.selectedAttributes[attribute.attributeId] === null\n      }\n    }, [_vm._v(_vm._s(_vm.$translate("Ceres::Template.singleItemNoSelection")))]) : _vm._e(), _vm._v(" "), _vm._l(attribute.values, function (value) {\n      return _c("option", {\n        key: value.attributeValueId,\n        domProps: {\n          value: value.attributeValueId,\n          selected: value.attributeValueId === _vm.selectedAttributes[attribute.attributeId]\n        }\n      }, [_vm.isAttributeSelectionValid(attribute.attributeId, value.attributeValueId, true) ? [_vm._v("\\n                            " + _vm._s(value.name) + "\\n                        ")] : _vm.isAttributeSelectionValid(attribute.attributeId, value.attributeValueId, false) ? [_vm._v("\\n                            " + _vm._s(_vm.$translate("Ceres::Template.singleItemNotSalableAttribute", {\n        name: value.name\n      })) + "\\n                        ")] : [_vm._v("\\n                            " + _vm._s(_vm.$translate("Ceres::Template.singleItemInvalidAttribute", {\n        name: value.name\n      })) + "\\n                        ")]], 2);\n    })], 2), _vm._v(" "), _c("label", {\n      directives: [{\n        name: "tooltip",\n        rawName: "v-tooltip",\n        value: _vm.isTextCut(attribute.name),\n        expression: "isTextCut(attribute.name)"\n      }],\n      attrs: {\n        for: "custom-select_" + attribute.name,\n        "data-toggle": "tooltip",\n        "data-placement": "top",\n        title: attribute.name,\n        "data-testing": "variation-select-dropdown-label"\n      }\n    }, [_vm._v(_vm._s(attribute.name))])]) : attribute.type === "box" || attribute.type === "image" ? _c("div", [_c("span", {\n      staticClass: "text-muted",\n      attrs: {\n        "data-testing": "attribute-name"\n      }\n    }, [_vm._v(_vm._s(attribute.name) + ":")]), _vm._v(" "), _c("b", {\n      attrs: {\n        "data-testing": "attribute-value"\n      }\n    }, [_vm._v(_vm._s(_vm.getSelectedAttributeValueName(attribute)))]), _vm._v(" "), _c("div", {\n      staticClass: "v-s-boxes py-3",\n      class: {\n        images: attribute.type === "image"\n      }\n    }, [_vm.addPleaseSelectOption ? _c("div", {\n      staticClass: "v-s-box bg-white empty-option",\n      class: {\n        active: _vm.selectedAttributes[attribute.attributeId] === -1,\n        invalid: !_vm.isAttributeSelectionValid(attribute.attributeId, -1)\n      },\n      attrs: {\n        "data-testing": "variation-select-box"\n      },\n      on: {\n        click: function click($event) {\n          return _vm.selectAttribute(attribute.attributeId, -1);\n        }\n      }\n    }, [_c("span", {\n      staticClass: "mx-3"\n    }, [_vm._v(_vm._s(_vm.$translate("Ceres::Template.singleItemPleaseSelect")))])]) : _vm._e(), _vm._v(" "), _vm.hasEmptyOption ? _c("div", {\n      staticClass: "v-s-box bg-white empty-option",\n      class: {\n        active: _vm.selectedAttributes[attribute.attributeId] === null,\n        invalid: !_vm.isAttributeSelectionValid(attribute.attributeId, null, true)\n      },\n      attrs: {\n        "data-testing": "variation-select-box"\n      },\n      on: {\n        click: function click($event) {\n          return _vm.selectAttribute(attribute.attributeId, null);\n        }\n      }\n    }, [_c("span", {\n      staticClass: "mx-3"\n    }, [_vm._v(_vm._s(_vm.$translate("Ceres::Template.singleItemNoSelection")))])]) : _vm._e(), _vm._v(" "), _vm._l(attribute.values, function (value) {\n      return _c("div", {\n        directives: [{\n          name: "tooltip",\n          rawName: "v-tooltip",\n          value: true,\n          expression: "true"\n        }],\n        key: value.attributeValueId,\n        staticClass: "v-s-box bg-white",\n        class: {\n          active: value.attributeValueId === _vm.selectedAttributes[attribute.attributeId],\n          invalid: !_vm.isAttributeSelectionValid(attribute.attributeId, value.attributeValueId, true)\n        },\n        attrs: {\n          "data-testing": "variation-select-box",\n          "data-html": "true",\n          "data-toggle": "tooltip",\n          "data-placement": "top",\n          "data-original-title": _vm.getTooltip(attribute, value)\n        },\n        on: {\n          click: function click($event) {\n            return _vm.selectAttribute(attribute.attributeId, value.attributeValueId);\n          }\n        }\n      }, [attribute.type === "box" ? _c("span", {\n        staticClass: "mx-3"\n      }, [_vm._v(_vm._s(value.name))]) : _c("img", {\n        staticClass: "p-1",\n        attrs: {\n          src: value.imageUrl,\n          alt: value.name\n        }\n      })]);\n    })], 2)]) : _vm._e()]);\n  }), _vm._v(" "), _vm.possibleUnitCombinationIds.length > 1 && _vm.isContentVisible ? _c("div", {\n    staticClass: "col-12 variation-select"\n  }, [_c("div", {\n    staticClass: "input-unit"\n  }, [_c("select", {\n    staticClass: "custom-select",\n    attrs: {\n      id: "unit-combination-ids-select",\n      "data-testing": "variation-select-unit"\n    },\n    on: {\n      change: function change($event) {\n        return _vm.selectUnit($event.target.value);\n      }\n    }\n  }, _vm._l(_vm.possibleUnitCombinationIds, function (unitCombinationId) {\n    return _c("option", {\n      key: unitCombinationId,\n      domProps: {\n        value: unitCombinationId,\n        selected: parseInt(unitCombinationId) === _vm.selectedUnit\n      }\n    }, [_vm.isUnitSelectionValid(unitCombinationId) ? [_vm._v("\\n                            " + _vm._s(_vm.possibleUnits[unitCombinationId]) + "\\n                        ")] : [_vm._v("\\n                            " + _vm._s(_vm.$translate("Ceres::Template.singleItemInvalidAttribute", {\n      name: _vm.possibleUnits[unitCombinationId]\n    })) + "\\n                        ")]], 2);\n  }), 0), _vm._v(" "), _c("label", {\n    attrs: {\n      for: "unit-combination-ids-select",\n      "data-testing": "variation-select-unit-label"\n    }\n  }, [_vm._v(_vm._s(_vm.$translate("Ceres::Template.singleItemContent")))])])]) : _vm._e()] : [_vm._t("default")]], 2);\n};\nvar staticRenderFns = [];\nrender._withStripped = true;\n\n;// CONCATENATED MODULE: ./resources/js/src/app/components/item/VariationSelect.vue?vue&type=template&id=588c1887&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.map.js\nvar es_array_map = __webpack_require__(21249);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.values.js\nvar es_object_values = __webpack_require__(26833);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.join.js\nvar es_array_join = __webpack_require__(69600);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.filter.js\nvar es_array_filter = __webpack_require__(57327);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.find.js\nvar es_array_find = __webpack_require__(69826);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.set.js\nvar es_set = __webpack_require__(70189);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.iterator.js\nvar es_string_iterator = __webpack_require__(78783);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.keys.js\nvar es_object_keys = __webpack_require__(47941);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.sort.js\nvar es_array_sort = __webpack_require__(2707);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.object.entries.js\nvar es_object_entries = __webpack_require__(69720);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.regexp.exec.js\nvar es_regexp_exec = __webpack_require__(74916);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(15306);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.slice.js\nvar es_array_slice = __webpack_require__(47042);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.from.js\nvar es_array_from = __webpack_require__(91038);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.js\nvar es_symbol = __webpack_require__(82526);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.description.js\nvar es_symbol_description = __webpack_require__(41817);\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.symbol.iterator.js\nvar es_symbol_iterator = __webpack_require__(32165);\n// EXTERNAL MODULE: ./resources/js/src/app/helper/dom.js\nvar dom = __webpack_require__(26278);\n// EXTERNAL MODULE: ./resources/js/src/app/helper/utils.js\nvar utils = __webpack_require__(29413);\n;// CONCATENATED MODULE: ./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use!./node_modules/vue-loader/lib/index.js??vue-loader-options!./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&\nfunction _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar NotificationService = __webpack_require__(41841);\n/* harmony default export */ var VariationSelectvue_type_script_lang_js_ = ({\n  name: "variation-select",\n  props: {\n    forceContent: {\n      type: Boolean,\n      default: false\n    }\n  },\n  inject: {\n    itemId: {\n      default: null\n    }\n  },\n  data: function data() {\n    return {\n      filteredVariationsCache: {},\n      lastContentCount: 0\n    };\n  },\n  mounted: function mounted() {\n    // initially check for valid selection and disable add to basket button\n    this.$store.commit("".concat(this.itemId, "/variationSelect/setIsVariationSelected"), !!this.currentSelection);\n  },\n  computed: {\n    currentVariation: function currentVariation() {\n      return this.$store.getters["".concat(this.itemId, "/currentItemVariation")];\n    },\n    currentVariationSelect: function currentVariationSelect() {\n      return this.$store.state.items[this.itemId] && this.$store.state.items[this.itemId].variationSelect;\n    },\n    /**\n     * returns true if any variation has no attributes\n     */\n    hasEmptyOption: function hasEmptyOption() {\n      return this.variations.some(function (variation) {\n        return !variation.attributes.length;\n      });\n    },\n    addPleaseSelectOption: function addPleaseSelectOption() {\n      return App.config.item.showPleaseSelect;\n    },\n    /**\n     * returns the variation, based on the selected attributes / unit\n     * returns false if there are none or multiple results\n     */\n    currentSelection: function currentSelection() {\n      var filteredVariations = this.filterVariations(null, null, true);\n      if (filteredVariations.length === 1) {\n        return filteredVariations[0];\n      }\n      return false;\n    },\n    /**\n     * returns all units, selectable by current selection\n     * prop \'forceContent\' with value true will return all units, without filtering\n     */\n    possibleUnits: function possibleUnits() {\n      // use an object, to make the entries unique\n      var possibleUnits = {};\n      var variations = this.forceContent ? this.variations : this.filterVariations(null, null, null, true);\n      var _iterator = _createForOfIteratorHelper(variations),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var variation = _step.value;\n          possibleUnits[variation.unitCombinationId] = variation.unitName;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return possibleUnits;\n    },\n    possibleUnitCombinationIds: function possibleUnitCombinationIds() {\n      return this.transformPossibleUnits(this.possibleUnits).map(function (value) {\n        return value[0];\n      });\n    },\n    isContentVisible: function isContentVisible() {\n      return !this.forceContent && !!this.currentSelection || this.forceContent;\n    },\n    hasSelection: function hasSelection() {\n      return !(0,utils/* isNullOrUndefined */.le)(this.selectedAttributes) && !Object.values(this.selectedAttributes).some(function (value) {\n        return value < 0;\n      });\n    },\n    attributes: function attributes() {\n      return this.currentVariationSelect && this.currentVariationSelect.attributes;\n    },\n    selectedAttributes: function selectedAttributes() {\n      return this.currentVariationSelect && this.currentVariationSelect.selectedAttributes;\n    },\n    selectedUnit: function selectedUnit() {\n      return this.currentVariationSelect && this.currentVariationSelect.selectedUnit;\n    },\n    variations: function variations() {\n      return this.currentVariationSelect && this.currentVariationSelect.variations;\n    }\n  },\n  methods: {\n    /**\n     * select an attribute and check, if the selection is valid; if not, unsetInvalidSelection will be executed\n     * @param {number} attributeId\n     * @param {[number, string, null]} attributeValueId\n     */\n    selectAttribute: function selectAttribute(attributeId, attributeValueId) {\n      attributeValueId = parseInt(attributeValueId) || null;\n      if (this.selectedAttributes[attributeId] !== attributeValueId) {\n        this.$store.commit("".concat(this.itemId, "/variationSelect/selectItemAttribute"), {\n          attributeId: attributeId,\n          attributeValueId: attributeValueId\n        });\n        this.onSelectionChange(attributeId, attributeValueId, null);\n      }\n    },\n    /**\n     * select a unit and check, if the selection is valid; if not, unsetInvalidSelection will be executed\n     * @param {[number, string]} unitId\n     */\n    selectUnit: function selectUnit(unitId) {\n      unitId = parseInt(unitId);\n      this.$store.commit("".concat(this.itemId, "/variationSelect/selectItemUnit"), unitId);\n      this.onSelectionChange(null, null, unitId);\n    },\n    onSelectionChange: function onSelectionChange(attributeId, attributeValueId, unitId) {\n      if (this.currentSelection) {\n        this.setVariation(this.currentSelection.variationId);\n      } else if (!this.hasSelection) {\n        // user switched back to "please select"\n        this.setVariation(0);\n      } else {\n        this.unsetInvalidSelection(attributeId, attributeValueId, unitId);\n      }\n      this.lastContentCount = this.possibleUnitCombinationIds.length;\n    },\n    /**\n     * changes the selected attributes / unit, to ensure a valid seelction\n     * @param {[number, null]} attributeId\n     * @param {[number, null]} attributeValueId\n     * @param {[number, null]} unitId\n     */\n    unsetInvalidSelection: function unsetInvalidSelection(attributeId, attributeValueId, unitId) {\n      var qualifiedVariations = this.getQualifiedVariations(attributeId, attributeValueId, unitId);\n      var closestVariations = this.getClosestVariations(qualifiedVariations);\n\n      // if the salable \'closestVariations\' is undefined, take the not-salable one\n      var closestVariation = closestVariations[0] || closestVariations[1];\n      if (!closestVariation) {\n        return;\n      }\n      var invalidSelection = this.getInvalidSelectionByVariation(closestVariation);\n      this.correctSelection(invalidSelection);\n    },\n    getTooltip: function getTooltip(attribute, attributeValue) {\n      if (!this.isAttributeSelectionValid(attribute.attributeId, attributeValue.attributeValueId, true)) {\n        return this.getInvalidOptionTooltip(attribute.attributeId, attributeValue.attributeValueId);\n      } else if (attribute.type === "image") {\n        return this.$translate("Ceres::Template.singleItemAttributeTooltip", {\n          attribute: attribute.name,\n          value: attributeValue.name\n        });\n      }\n      return "";\n    },\n    /**\n     * returns a string for box tooltips, for not available options\n     * @param {number} attributeId\n     * @param {number} attributeValueId\n     */\n    getInvalidOptionTooltip: function getInvalidOptionTooltip(attributeId, attributeValueId) {\n      var qualifiedVariations = this.getQualifiedVariations(attributeId, attributeValueId);\n      var closestVariations = this.getClosestVariations(qualifiedVariations);\n      if (!closestVariations || closestVariations.length <= 0) {\n        return "";\n      }\n      var invalidSelections = [!!closestVariations[0] ? this.getInvalidSelectionByVariation(closestVariations[0]) : null, !!closestVariations[1] ? this.getInvalidSelectionByVariation(closestVariations[1]) : null];\n      if (!!invalidSelections[0] && !!invalidSelections[1] && invalidSelections[0].attributesToReset.length > invalidSelections[1].attributesToReset.length) {\n        // there is a non-salable variation with less changes\n        return this.$translate("Ceres::Template.singleItemNotSalable");\n      }\n      var invalidSelection = invalidSelections[0] || invalidSelections[1];\n      var names = [];\n      var _iterator2 = _createForOfIteratorHelper(invalidSelection.attributesToReset),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var attribute = _step2.value;\n          if (attribute.attributeId !== attributeId) {\n            names.push("<b>" + attribute.name + "</b>");\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      if (invalidSelection.newUnit) {\n        names.push("<b>" + this.$translate("Ceres::Template.singleItemContent") + "</b>");\n      }\n      if (!names.length) {\n        return null;\n      }\n      return this.$translate("Ceres::Template.singleItemNotAvailableInSelection", {\n        name: names.join(", ")\n      });\n    },\n    /**\n     * returns a list of variations, filtered by attribute or unit\n     * @param {[number, null]} attributeId\n     * @param {[number, null]} attributeValueId\n     * @param {[number, null]} unitId\n     */\n    getQualifiedVariations: function getQualifiedVariations(attributeId, attributeValueId, unitId) {\n      if ((0,utils/* isDefined */.$K)(attributeValueId)) {\n        return this.variations.filter(function (variation) {\n          return (0,utils/* isDefined */.$K)(variation.attributes.find(function (attribute) {\n            return attribute.attributeId === attributeId && attribute.attributeValueId === attributeValueId;\n          }));\n        });\n      } else if ((0,utils/* isDefined */.$K)(unitId)) {\n        return this.variations.filter(function (variation) {\n          return variation.unitCombinationId === unitId;\n        });\n      }\n      return this.variations.filter(function (variation) {\n        return !variation.attributes.length;\n      });\n    },\n    /**\n     * return a salable and a non-salable variation with the minimum number of changes on attributes compared to the current selection.\n     * @param {array} qualifiedVariations\n     */\n    getClosestVariations: function getClosestVariations(qualifiedVariations) {\n      var closestSalableVariation, numberOfSalableChanges;\n      var closestNonSalableVariation, numberOfNonSalableChanges;\n      var _iterator3 = _createForOfIteratorHelper(qualifiedVariations),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var variation = _step3.value;\n          var changes = 0;\n          if (variation.unitCombinationId !== this.selectedUnit && !(0,utils/* isNull */.Ft)(this.selectedUnit)) {\n            // when the unit dropdown isn\'t visible, it should have a lower weight for reset investigations\n            var unitWeight = this.possibleUnitCombinationIds.length > 1 && this.isContentVisible ? 0.9 : 0.1;\n            changes += unitWeight;\n          }\n          var _iterator4 = _createForOfIteratorHelper(variation.attributes),\n            _step4;\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var attribute = _step4.value;\n              if (this.selectedAttributes[attribute.attributeId] !== attribute.attributeValueId) {\n                changes++;\n              }\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n          if (variation.isSalable && (!numberOfSalableChanges || changes < numberOfSalableChanges)) {\n            closestSalableVariation = variation;\n            numberOfSalableChanges = changes;\n          } else if (!variation.isSalable && (!numberOfNonSalableChanges || changes < numberOfNonSalableChanges)) {\n            closestNonSalableVariation = variation;\n            numberOfNonSalableChanges = changes;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return [closestSalableVariation, closestNonSalableVariation];\n    },\n    /**\n     * returns object with array \'attributesToReset\' and newUnit. The attributesToReset contains all attributes, which are not matching with the given variation\n     * @param {object} variation\n     */\n    getInvalidSelectionByVariation: function getInvalidSelectionByVariation(variation) {\n      var _this = this;\n      var attributesToReset = [];\n      var newUnit = null;\n      var _loop = function _loop(selectedAttributeId) {\n        selectedAttributeId = parseInt(selectedAttributeId);\n        var variationAttribute = variation.attributes.find(function (attribute) {\n          return attribute.attributeId === selectedAttributeId;\n        });\n        if (!(0,utils/* isNull */.Ft)(_this.selectedAttributes[selectedAttributeId])) {\n          if (variationAttribute && variationAttribute.attributeValueId !== _this.selectedAttributes[selectedAttributeId] || !variationAttribute) {\n            var attributeToReset = _this.attributes.find(function (attr) {\n              return attr.attributeId === selectedAttributeId;\n            });\n            attributesToReset.push(attributeToReset);\n          }\n        }\n      };\n      for (var selectedAttributeId in this.selectedAttributes) {\n        _loop(selectedAttributeId);\n      }\n      if (variation.unitCombinationId !== this.selectedUnit) {\n        newUnit = variation.unitCombinationId;\n      }\n      return {\n        attributesToReset: attributesToReset,\n        newUnit: newUnit\n      };\n    },\n    /**\n     * resets all invalid attributes and change the unit, if required. Prints a message to the user if so.\n     * @param {object} invalidSelection\n     */\n    correctSelection: function correctSelection(invalidSelection) {\n      var messages = [];\n      var attributes = JSON.parse(JSON.stringify(this.selectedAttributes));\n      var _iterator5 = _createForOfIteratorHelper(invalidSelection.attributesToReset),\n        _step5;\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var attributeToReset = _step5.value;\n          messages.push(this.$translate("Ceres::Template.singleItemNotAvailable", {\n            name: attributeToReset.name\n          }));\n          attributes[attributeToReset.attributeId] = !this.hasEmptyOption && App.config.item.showPleaseSelect ? -1 : null;\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n      if (invalidSelection.newUnit) {\n        if (this.lastContentCount > 1 && this.possibleUnitCombinationIds.length > 1 && !(0,utils/* isNull */.Ft)(this.selectedUnit)) {\n          messages.push(this.$translate("Ceres::Template.singleItemNotAvailable", {\n            name: this.$translate("Ceres::Template.singleItemContent")\n          }));\n        }\n        this.$store.commit("".concat(this.itemId, "/variationSelect/selectItemUnit"), invalidSelection.newUnit);\n      }\n      this.$store.commit("".concat(this.itemId, "/variationSelect/setItemSelectedAttributes"), attributes);\n      this.setVariation(this.currentSelection ? this.currentSelection.variationId : 0);\n      NotificationService.warn(messages.join("<br>")).closeAfter(5000);\n    },\n    /**\n     * returns matching variations with current selection\n     * attributes and unitId could be filled, to check a specific selection\n     * @param {object} attributes\n     * @param {number} unitId\n     * @param {boolean} strict\n     */\n    filterVariations: function filterVariations(attributes, unitId, strict, ignoreUnit) {\n      var _this2 = this;\n      attributes = attributes || this.selectedAttributes;\n      unitId = unitId || this.selectedUnit;\n      strict = !!strict;\n      ignoreUnit = !!ignoreUnit;\n      var key = JSON.stringify(attributes) + "_" + unitId + "_" + strict + "_" + ignoreUnit;\n      if ((0,utils/* isDefined */.$K)(this.filteredVariationsCache[key])) {\n        return this.filteredVariationsCache[key];\n      }\n      var uniqueValues = _toConsumableArray(new Set(Object.values(attributes)));\n      var isEmptyOptionSelected = uniqueValues.length === 1 && (0,utils/* isNull */.Ft)(uniqueValues[0]);\n      var filteredVariations = this.variations.filter(function (variation) {\n        // the selected unit is not matching\n        if (!ignoreUnit && variation.unitCombinationId !== unitId) {\n          return false;\n        }\n\n        // the variation has no attributes (only checked, if any attribute has a selected value); or the variation has attributes and empty option is selected\n        // requires more than 0 attributes\n        if ((!isEmptyOptionSelected && !variation.attributes.length || isEmptyOptionSelected && variation.attributes.length) && _this2.attributes.length > 0) {\n          return false;\n        }\n        var _loop2 = function _loop2(attributeId) {\n          var variationAttribute = variation.attributes.find(function (variationAttribute) {\n            return variationAttribute.attributeId === parseInt(attributeId);\n          });\n\n          // an attribute is not matching with selection\n          if (variationAttribute && variationAttribute.attributeValueId !== attributes[attributeId] && (strict || !strict && !(0,utils/* isNull */.Ft)(attributes[attributeId]) && attributes[attributeId] !== -1)) {\n            return {\n              v: false\n            };\n          }\n        };\n        for (var attributeId in attributes) {\n          var _ret = _loop2(attributeId);\n          if (_typeof(_ret) === "object") return _ret.v;\n        }\n        return true;\n      });\n      this.filteredVariationsCache[key] = filteredVariations;\n      return filteredVariations;\n    },\n    /**\n     * returns true, if the selection with a new attribute value would be valid\n     * @param {number} attributeId\n     * @param {[number, string, null]} attributeValueId\n     * @param {boolean} filterSalableVariations\n     */\n    isAttributeSelectionValid: function isAttributeSelectionValid(attributeId, attributeValueId, filterSalableVariations) {\n      attributeValueId = parseInt(attributeValueId) || null;\n      if (this.selectedAttributes[attributeId] === attributeValueId) {\n        return true;\n      }\n      var selectedAttributes = JSON.parse(JSON.stringify(this.selectedAttributes));\n      selectedAttributes[attributeId] = parseInt(attributeValueId) || null;\n      var ignoreUnit = !(Object.keys(this.possibleUnits).length > 1 && this.isContentVisible);\n      var variations = this.filterVariations(selectedAttributes, null, null, ignoreUnit);\n      if (filterSalableVariations) {\n        variations = variations.filter(function (variation) {\n          return variation.isSalable;\n        });\n      }\n      return variations.length > 0;\n    },\n    /**\n     * returns true, if the selection with a new unitId would be valid\n     * @param {[number, string]} unitId\n     */\n    isUnitSelectionValid: function isUnitSelectionValid(unitId) {\n      unitId = parseInt(unitId);\n      if (this.selectedUnit === unitId) {\n        return true;\n      }\n      return this.filterVariations(null, unitId).filter(function (variation) {\n        return variation.isSalable;\n      }).length > 0;\n    },\n    /**\n     * dispatch vuex action \'loadVariation\' to archive a variation\n     * dispatches a custom event named \'onVariationChanged\'\n     * @param {[string, number, null]} variationId\n     */\n    setVariation: function setVariation(variationId) {\n      var _this3 = this;\n      if (!(0,utils/* isDefined */.$K)(variationId) && this.currentSelection) {\n        variationId = this.currentSelection.variationId;\n      }\n      if ((0,utils/* isDefined */.$K)(variationId)) {\n        this.$store.dispatch("".concat(this.itemId, "/loadVariation"), variationId).then(function (variation) {\n          document.dispatchEvent(new CustomEvent("onVariationChanged", {\n            detail: {\n              attributes: variation.attributes,\n              documents: variation.documents,\n              itemId: _this3.itemId\n            }\n          }));\n        });\n      }\n    },\n    isTextCut: function isTextCut(content) {\n      if (this.$refs.attributesContaner) {\n        return (0,dom/* textWidth */.$H)(content, "Custom-Font, Helvetica, Arial, sans-serif") > this.$refs.attributesContaner[0].clientWidth;\n      }\n      return false;\n    },\n    getSelectedAttributeValueName: function getSelectedAttributeValueName(attribute) {\n      var selectedAttributeValueId = this.selectedAttributes[attribute.attributeId];\n      var selectedAttributeValue = attribute.values.find(function (attrValue) {\n        return attrValue.attributeValueId === selectedAttributeValueId;\n      });\n      if (selectedAttributeValue) {\n        return selectedAttributeValue.name;\n      } else if (App.config.item.showPleaseSelect && selectedAttributeValueId === -1) {\n        return this.$translate("Ceres::Template.singleItemPleaseSelect");\n      }\n      return this.$translate("Ceres::Template.singleItemNoSelection");\n    },\n    transformPossibleUnits: function transformPossibleUnits(possibleUnits) {\n      var _this4 = this;\n      return Object.entries(possibleUnits).sort(function (unitA, unitB) {\n        unitA = _this4.splitUnitName(unitA[1]);\n        unitB = _this4.splitUnitName(unitB[1]);\n        // order by unit\n        if (unitA[1] < unitB[1]) {\n          return -1;\n        }\n        if (unitA[1] > unitB[1]) {\n          return 1;\n        }\n        // order by content (count)\n        if (unitA[0] < unitB[0]) {\n          return -1;\n        }\n        if (unitA[0] > unitB[0]) {\n          return 1;\n        }\n        return 0;\n      });\n    },\n    splitUnitName: function splitUnitName(unitName) {\n      var unitNameSplit = unitName.split(" ");\n      if (!isNaN(unitNameSplit[0])) {\n        unitNameSplit[0] = unitNameSplit[0].replace(App.currencyPattern.separator_thousands, "");\n        unitNameSplit[0] = parseInt(unitNameSplit[0]);\n      }\n      return unitNameSplit;\n    }\n  },\n  watch: {\n    currentSelection: function currentSelection(value) {\n      this.$store.commit("".concat(this.itemId, "/variationSelect/setIsVariationSelected"), !!value);\n    },\n    variations: function variations() {\n      // FIX unset variation cache after subsequent variations are loaded\n      this.filteredVariationsCache = {};\n    }\n  }\n});\n;// CONCATENATED MODULE: ./resources/js/src/app/components/item/VariationSelect.vue?vue&type=script&lang=js&\n /* harmony default export */ var item_VariationSelectvue_type_script_lang_js_ = (VariationSelectvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(51900);\n;// CONCATENATED MODULE: ./resources/js/src/app/components/item/VariationSelect.vue\n\n\n\n\n\n/* normalize component */\n;\nvar component = (0,componentNormalizer/* default */.Z)(\n  item_VariationSelectvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var VariationSelect = (component.exports);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsRTs7QUMxc0IyTixDQUFDLGlGQUFlLHVDQUFHLEVBQUMsQzs7OztBQ0FsSjtBQUMzQjtBQUNMOzs7QUFHOUQ7QUFDQSxDQUFzRztBQUN0RyxnQkFBZ0Isc0NBQVU7QUFDMUIsRUFBRSw0Q0FBTTtBQUNSLEVBQUUsTUFBTTtBQUNSLEVBQUUsZUFBZTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0RBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9DZXJlcy8uL3Jlc291cmNlcy9qcy9zcmMvYXBwL2NvbXBvbmVudHMvaXRlbS9WYXJpYXRpb25TZWxlY3QudnVlP2U2N2MiLCJ3ZWJwYWNrOi8vQ2VyZXMvLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT81YTIwIiwid2VicGFjazovL0NlcmVzL3Jlc291cmNlcy9qcy9zcmMvYXBwL2NvbXBvbmVudHMvaXRlbS9WYXJpYXRpb25TZWxlY3QudnVlPzE0NDciLCJ3ZWJwYWNrOi8vQ2VyZXMvLi9yZXNvdXJjZXMvanMvc3JjL2FwcC9jb21wb25lbnRzL2l0ZW0vVmFyaWF0aW9uU2VsZWN0LnZ1ZT9hMzBhIiwid2VicGFjazovL0NlcmVzLy4vcmVzb3VyY2VzL2pzL3NyYy9hcHAvY29tcG9uZW50cy9pdGVtL1ZhcmlhdGlvblNlbGVjdC52dWU/NDc5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICB2YXIgX3ZtID0gdGhpcyxcbiAgICBfYyA9IF92bS5fc2VsZi5fY1xuICByZXR1cm4gX2MoXG4gICAgXCJkaXZcIixcbiAgICB7IHN0YXRpY0NsYXNzOiBcInJvd1wiIH0sXG4gICAgW1xuICAgICAgX3ZtLmF0dHJpYnV0ZXMubGVuZ3RoIHx8XG4gICAgICAoX3ZtLnBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzLmxlbmd0aCA+IDEgJiYgX3ZtLmlzQ29udGVudFZpc2libGUpXG4gICAgICAgID8gW1xuICAgICAgICAgICAgX3ZtLl9sKF92bS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoYXR0cmlidXRlLCBpbmRleCkge1xuICAgICAgICAgICAgICByZXR1cm4gX2MoXG4gICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICB7IGtleTogaW5kZXgsIHN0YXRpY0NsYXNzOiBcImNvbC0xMiB2YXJpYXRpb24tc2VsZWN0XCIgfSxcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUudHlwZSA9PT0gXCJkcm9wZG93blwiXG4gICAgICAgICAgICAgICAgICAgID8gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZWY6IFwiYXR0cmlidXRlc0NvbnRhbmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlZkluRm9yOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJpbnB1dC11bml0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImN1c3RvbS1zZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImN1c3RvbS1zZWxlY3RfXCIgKyBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXRlc3RpbmdcIjogXCJ2YXJpYXRpb24tc2VsZWN0LWRyb3Bkb3duXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbiAoJGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92bS5zZWxlY3RBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5hZGRQbGVhc2VTZWxlY3RPcHRpb24gfHwgIV92bS5oYXNTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBfYyhcIm9wdGlvblwiLCB7IGRvbVByb3BzOiB7IHZhbHVlOiAtMSB9IH0sIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbVBsZWFzZVNlbGVjdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLmhhc0VtcHR5T3B0aW9uIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF0gPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3B0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbVByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uc2VsZWN0ZWRBdHRyaWJ1dGVzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0gPT09IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiR0cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Ob1NlbGVjdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfdm0uX2UoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX2woYXR0cmlidXRlLnZhbHVlcywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfYyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdmFsdWUuYXR0cmlidXRlVmFsdWVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbVByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkID09PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5zZWxlY3RlZEF0dHJpYnV0ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5pc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3ModmFsdWUubmFtZSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5pc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuYXR0cmlidXRlVmFsdWVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm90U2FsYWJsZUF0dHJpYnV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IHZhbHVlLm5hbWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtSW52YWxpZEF0dHJpYnV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6IHZhbHVlLm5hbWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInRvb2x0aXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdOYW1lOiBcInYtdG9vbHRpcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfdm0uaXNUZXh0Q3V0KGF0dHJpYnV0ZS5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uOiBcImlzVGV4dEN1dChhdHRyaWJ1dGUubmFtZSlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3I6IFwiY3VzdG9tLXNlbGVjdF9cIiArIGF0dHJpYnV0ZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtdG9nZ2xlXCI6IFwidG9vbHRpcFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtcGxhY2VtZW50XCI6IFwidG9wXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXRlc3RpbmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInZhcmlhdGlvbi1zZWxlY3QtZHJvcGRvd24tbGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbX3ZtLl92KF92bS5fcyhhdHRyaWJ1dGUubmFtZSkpXVxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgOiBhdHRyaWJ1dGUudHlwZSA9PT0gXCJib3hcIiB8fCBhdHRyaWJ1dGUudHlwZSA9PT0gXCJpbWFnZVwiXG4gICAgICAgICAgICAgICAgICAgID8gX2MoXCJkaXZcIiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwic3BhblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwidGV4dC1tdXRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7IFwiZGF0YS10ZXN0aW5nXCI6IFwiYXR0cmlidXRlLW5hbWVcIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBbX3ZtLl92KF92bS5fcyhhdHRyaWJ1dGUubmFtZSkgKyBcIjpcIildXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgeyBhdHRyczogeyBcImRhdGEtdGVzdGluZ1wiOiBcImF0dHJpYnV0ZS12YWx1ZVwiIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLmdldFNlbGVjdGVkQXR0cmlidXRlVmFsdWVOYW1lKGF0dHJpYnV0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwidi1zLWJveGVzIHB5LTNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogeyBpbWFnZXM6IGF0dHJpYnV0ZS50eXBlID09PSBcImltYWdlXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5hZGRQbGVhc2VTZWxlY3RPcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2LXMtYm94IGJnLXdoaXRlIGVtcHR5LW9wdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5zZWxlY3RlZEF0dHJpYnV0ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID09PSAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZDogIV92bS5pc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0aW5nXCI6IFwidmFyaWF0aW9uLXNlbGVjdC1ib3hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uc2VsZWN0QXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MoXCJzcGFuXCIsIHsgc3RhdGljQ2xhc3M6IFwibXgtM1wiIH0sIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtUGxlYXNlU2VsZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogX3ZtLl9lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFwiIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uaGFzRW1wdHlPcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2LXMtYm94IGJnLXdoaXRlIGVtcHR5LW9wdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5zZWxlY3RlZEF0dHJpYnV0ZXNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdID09PSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkOiAhX3ZtLmlzQXR0cmlidXRlU2VsZWN0aW9uVmFsaWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0aW5nXCI6IFwidmFyaWF0aW9uLXNlbGVjdC1ib3hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uc2VsZWN0QXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYyhcInNwYW5cIiwgeyBzdGF0aWNDbGFzczogXCJteC0zXCIgfSwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiR0cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Ob1NlbGVjdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcIiBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9sKGF0dHJpYnV0ZS52YWx1ZXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aXZlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInRvb2x0aXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3TmFtZTogXCJ2LXRvb2x0aXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdmFsdWUuYXR0cmlidXRlVmFsdWVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWNDbGFzczogXCJ2LXMtYm94IGJnLXdoaXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuYXR0cmlidXRlVmFsdWVJZCA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLnNlbGVjdGVkQXR0cmlidXRlc1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWQ6ICFfdm0uaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLmF0dHJpYnV0ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS10ZXN0aW5nXCI6IFwidmFyaWF0aW9uLXNlbGVjdC1ib3hcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS1odG1sXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXRvZ2dsZVwiOiBcInRvb2x0aXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS1wbGFjZW1lbnRcIjogXCJ0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiOiBfdm0uZ2V0VG9vbHRpcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZtLnNlbGVjdEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuYXR0cmlidXRlVmFsdWVJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUudHlwZSA9PT0gXCJib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBfYyhcInNwYW5cIiwgeyBzdGF0aWNDbGFzczogXCJteC0zXCIgfSwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihfdm0uX3ModmFsdWUubmFtZSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfYyhcImltZ1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljQ2xhc3M6IFwicC0xXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogdmFsdWUuaW1hZ2VVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ6IHZhbHVlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgMlxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICA6IF92bS5fZSgpLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgX3ZtLnBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzLmxlbmd0aCA+IDEgJiYgX3ZtLmlzQ29udGVudFZpc2libGVcbiAgICAgICAgICAgICAgPyBfYyhcImRpdlwiLCB7IHN0YXRpY0NsYXNzOiBcImNvbC0xMiB2YXJpYXRpb24tc2VsZWN0XCIgfSwgW1xuICAgICAgICAgICAgICAgICAgX2MoXCJkaXZcIiwgeyBzdGF0aWNDbGFzczogXCJpbnB1dC11bml0XCIgfSwgW1xuICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICBcInNlbGVjdFwiLFxuICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY0NsYXNzOiBcImN1c3RvbS1zZWxlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcInVuaXQtY29tYmluYXRpb24taWRzLXNlbGVjdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtdGVzdGluZ1wiOiBcInZhcmlhdGlvbi1zZWxlY3QtdW5pdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gKCRldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdm0uc2VsZWN0VW5pdCgkZXZlbnQudGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIF92bS5fbChcbiAgICAgICAgICAgICAgICAgICAgICAgIF92bS5wb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh1bml0Q29tYmluYXRpb25JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2MoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHVuaXRDb21iaW5hdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tUHJvcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuaXRDb21iaW5hdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCh1bml0Q29tYmluYXRpb25JZCkgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLnNlbGVjdGVkVW5pdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdm0uaXNVbml0U2VsZWN0aW9uVmFsaWQodW5pdENvbWJpbmF0aW9uSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLnBvc3NpYmxlVW5pdHNbdW5pdENvbWJpbmF0aW9uSWRdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl92KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLiR0cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1JbnZhbGlkQXR0cmlidXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBfdm0ucG9zc2libGVVbml0c1tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRDb21iaW5hdGlvbklkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBfdm0uX3YoXCIgXCIpLFxuICAgICAgICAgICAgICAgICAgICBfYyhcbiAgICAgICAgICAgICAgICAgICAgICBcImxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yOiBcInVuaXQtY29tYmluYXRpb24taWRzLXNlbGVjdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtdGVzdGluZ1wiOiBcInZhcmlhdGlvbi1zZWxlY3QtdW5pdC1sYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIF92bS5fdihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZtLl9zKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92bS4kdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Db250ZW50XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgOiBfdm0uX2UoKSxcbiAgICAgICAgICBdXG4gICAgICAgIDogW192bS5fdChcImRlZmF1bHRcIildLFxuICAgIF0sXG4gICAgMlxuICApXG59XG52YXIgc3RhdGljUmVuZGVyRm5zID0gW11cbnJlbmRlci5fd2l0aFN0cmlwcGVkID0gdHJ1ZVxuXG5leHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9IiwiZXhwb3J0ICogZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtMi51c2UhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2xvYWRlcnMvdGVtcGxhdGVMb2FkZXIuanM/P3J1bGVTZXRbMV0ucnVsZXNbMl0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXRlbXBsYXRlJmlkPTU4OGMxODg3JlwiIiwiPHRlbXBsYXRlPlxuICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgPHRlbXBsYXRlIHYtaWY9XCJhdHRyaWJ1dGVzLmxlbmd0aCB8fCAocG9zc2libGVVbml0Q29tYmluYXRpb25JZHMubGVuZ3RoID4gMSAmJiBpc0NvbnRlbnRWaXNpYmxlKVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiB2YXJpYXRpb24tc2VsZWN0XCIgdi1mb3I9XCIoYXR0cmlidXRlLCBpbmRleCkgaW4gYXR0cmlidXRlc1wiIDprZXk9XCJpbmRleFwiPlxuICAgICAgICAgICAgICAgIDwhLS0gZHJvcGRvd24gLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LXVuaXRcIiByZWY9XCJhdHRyaWJ1dGVzQ29udGFuZXJcIiB2LWlmPVwiYXR0cmlidXRlLnR5cGUgPT09ICdkcm9wZG93bidcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCA6aWQ9XCInY3VzdG9tLXNlbGVjdF8nICsgYXR0cmlidXRlLm5hbWVcIiBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIiBAY2hhbmdlPVwic2VsZWN0QXR0cmlidXRlKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgJGV2ZW50LnRhcmdldC52YWx1ZSlcIiBkYXRhLXRlc3Rpbmc9XCJ2YXJpYXRpb24tc2VsZWN0LWRyb3Bkb3duXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIDp2YWx1ZT1cIi0xXCIgdi1pZj1cImFkZFBsZWFzZVNlbGVjdE9wdGlvbiB8fCAhaGFzU2VsZWN0aW9uXCI+e3sgJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtUGxlYXNlU2VsZWN0XCIpIH19PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp2YWx1ZT1cIm51bGxcIiB2LWlmPVwiaGFzRW1wdHlPcHRpb24gfHwgc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF0gPT09IG51bGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6c2VsZWN0ZWQ9XCJzZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlLmF0dHJpYnV0ZUlkXSA9PT0gbnVsbFwiPnt7ICR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbU5vU2VsZWN0aW9uXCIpIH19PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYtZm9yPVwidmFsdWUgaW4gYXR0cmlidXRlLnZhbHVlc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDp2YWx1ZT1cInZhbHVlLmF0dHJpYnV0ZVZhbHVlSWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6c2VsZWN0ZWQ9XCJ2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkID09PSBzZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlLmF0dHJpYnV0ZUlkXVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDprZXk9XCJ2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtaWY9XCJpc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgdmFsdWUuYXR0cmlidXRlVmFsdWVJZCwgdHJ1ZSlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgdmFsdWUubmFtZSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtZWxzZS1pZj1cImlzQXR0cmlidXRlU2VsZWN0aW9uVmFsaWQoYXR0cmlidXRlLmF0dHJpYnV0ZUlkLCB2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkLCBmYWxzZSlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm90U2FsYWJsZUF0dHJpYnV0ZVwiLCB7IFwibmFtZVwiOiB2YWx1ZS5uYW1lIH0pIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1lbHNlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyAkdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1JbnZhbGlkQXR0cmlidXRlXCIsIHsgXCJuYW1lXCI6IHZhbHVlLm5hbWUgfSkgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgOmZvcj1cIidjdXN0b20tc2VsZWN0XycgKyBhdHRyaWJ1dGUubmFtZVwiIHYtdG9vbHRpcD1cImlzVGV4dEN1dChhdHRyaWJ1dGUubmFtZSlcIiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiBkYXRhLXBsYWNlbWVudD1cInRvcFwiIDp0aXRsZT1cImF0dHJpYnV0ZS5uYW1lXCIgZGF0YS10ZXN0aW5nPVwidmFyaWF0aW9uLXNlbGVjdC1kcm9wZG93bi1sYWJlbFwiPnt7IGF0dHJpYnV0ZS5uYW1lIH19PC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8IS0tIC9kcm9wZG93biAtLT5cblxuICAgICAgICAgICAgICAgIDwhLS0gYm94IGFuZCBpbWFnZSAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2IHYtZWxzZS1pZj1cImF0dHJpYnV0ZS50eXBlID09PSAnYm94JyB8fCBhdHRyaWJ1dGUudHlwZSA9PT0gJ2ltYWdlJ1wiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtbXV0ZWRcIiBkYXRhLXRlc3Rpbmc9XCJhdHRyaWJ1dGUtbmFtZVwiPnt7IGF0dHJpYnV0ZS5uYW1lIH19Ojwvc3Bhbj4gPGIgZGF0YS10ZXN0aW5nPVwiYXR0cmlidXRlLXZhbHVlXCI+e3sgZ2V0U2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZU5hbWUoYXR0cmlidXRlKSB9fTwvYj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInYtcy1ib3hlcyBweS0zXCIgOmNsYXNzPVwieyAnaW1hZ2VzJzogYXR0cmlidXRlLnR5cGUgPT09ICdpbWFnZScgfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInYtcy1ib3ggYmctd2hpdGUgZW1wdHktb3B0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0aW5nPVwidmFyaWF0aW9uLXNlbGVjdC1ib3hcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LWlmPVwiYWRkUGxlYXNlU2VsZWN0T3B0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwic2VsZWN0QXR0cmlidXRlKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgLTEpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOmNsYXNzPVwieyAnYWN0aXZlJzogc2VsZWN0ZWRBdHRyaWJ1dGVzW2F0dHJpYnV0ZS5hdHRyaWJ1dGVJZF0gPT09IC0xLCAnaW52YWxpZCc6ICFpc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgLTEpIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm14LTNcIj57eyAkdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1QbGVhc2VTZWxlY3RcIikgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2LXMtYm94IGJnLXdoaXRlIGVtcHR5LW9wdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGluZz1cInZhcmlhdGlvbi1zZWxlY3QtYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1pZj1cImhhc0VtcHR5T3B0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwic2VsZWN0QXR0cmlidXRlKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgbnVsbClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6Y2xhc3M9XCJ7ICdhY3RpdmUnOiBzZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlLmF0dHJpYnV0ZUlkXSA9PT0gbnVsbCwgJ2ludmFsaWQnOiAhaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIG51bGwsIHRydWUpIH1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm14LTNcIj57eyAkdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Ob1NlbGVjdGlvblwiKSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidi1zLWJveCBiZy13aGl0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdGVzdGluZz1cInZhcmlhdGlvbi1zZWxlY3QtYm94XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdi1mb3I9XCJ2YWx1ZSBpbiBhdHRyaWJ1dGUudmFsdWVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsaWNrPVwic2VsZWN0QXR0cmlidXRlKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgdmFsdWUuYXR0cmlidXRlVmFsdWVJZClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6Y2xhc3M9XCJ7ICdhY3RpdmUnOiB2YWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkID09PSBzZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlLmF0dHJpYnV0ZUlkXSwgJ2ludmFsaWQnOiAhaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZChhdHRyaWJ1dGUuYXR0cmlidXRlSWQsIHZhbHVlLmF0dHJpYnV0ZVZhbHVlSWQsIHRydWUpIH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LXRvb2x0aXA9XCJ0cnVlXCIgZGF0YS1odG1sPVwidHJ1ZVwiIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiIGRhdGEtcGxhY2VtZW50PVwidG9wXCIgOmRhdGEtb3JpZ2luYWwtdGl0bGU9XCJnZXRUb29sdGlwKGF0dHJpYnV0ZSwgdmFsdWUpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOmtleT1cInZhbHVlLmF0dHJpYnV0ZVZhbHVlSWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm14LTNcIiB2LWlmPVwiYXR0cmlidXRlLnR5cGUgPT09ICdib3gnXCI+e3sgdmFsdWUubmFtZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwicC0xXCIgdi1lbHNlIDpzcmM9XCJ2YWx1ZS5pbWFnZVVybFwiIDphbHQ9XCJ2YWx1ZS5uYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPCEtLSAvYm94IGFuZCBpbWFnZSAtLT5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8IS0tIHVuaXRzIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiB2YXJpYXRpb24tc2VsZWN0XCIgdi1pZj1cInBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzLmxlbmd0aCA+IDEgJiYgaXNDb250ZW50VmlzaWJsZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC11bml0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJ1bml0LWNvbWJpbmF0aW9uLWlkcy1zZWxlY3RcIiBjbGFzcz1cImN1c3RvbS1zZWxlY3RcIiBAY2hhbmdlPVwic2VsZWN0VW5pdCgkZXZlbnQudGFyZ2V0LnZhbHVlKVwiIGRhdGEtdGVzdGluZz1cInZhcmlhdGlvbi1zZWxlY3QtdW5pdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LWZvcj1cInVuaXRDb21iaW5hdGlvbklkIGluIHBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOnZhbHVlPVwidW5pdENvbWJpbmF0aW9uSWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6c2VsZWN0ZWQ9XCJwYXJzZUludCh1bml0Q29tYmluYXRpb25JZCkgPT09IHNlbGVjdGVkVW5pdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDprZXk9XCJ1bml0Q29tYmluYXRpb25JZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwiaXNVbml0U2VsZWN0aW9uVmFsaWQodW5pdENvbWJpbmF0aW9uSWQpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IHBvc3NpYmxlVW5pdHNbdW5pdENvbWJpbmF0aW9uSWRdIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1lbHNlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyAkdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1JbnZhbGlkQXR0cmlidXRlXCIsIHsgXCJuYW1lXCI6IHBvc3NpYmxlVW5pdHNbdW5pdENvbWJpbmF0aW9uSWRdIH0pIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInVuaXQtY29tYmluYXRpb24taWRzLXNlbGVjdFwiIGRhdGEtdGVzdGluZz1cInZhcmlhdGlvbi1zZWxlY3QtdW5pdC1sYWJlbFwiPnt7ICR0cmFuc2xhdGUoXCJDZXJlczo6VGVtcGxhdGUuc2luZ2xlSXRlbUNvbnRlbnRcIikgfX08L2xhYmVsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8IS0tIC91bml0cyAtLT5cbiAgICAgICAgPC90ZW1wbGF0ZT5cblxuICAgICAgICA8dGVtcGxhdGUgdi1lbHNlPlxuICAgICAgICAgICAgPHNsb3Q+PC9zbG90PlxuICAgICAgICA8L3RlbXBsYXRlPlxuICAgIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCB7IHRleHRXaWR0aCB9IGZyb20gXCIuLi8uLi9oZWxwZXIvZG9tXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzTnVsbCwgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tIFwiLi4vLi4vaGVscGVyL3V0aWxzXCI7XG5cbmNvbnN0IE5vdGlmaWNhdGlvblNlcnZpY2UgPSByZXF1aXJlKFwiLi4vLi4vc2VydmljZXMvTm90aWZpY2F0aW9uU2VydmljZVwiKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gICAgbmFtZTogXCJ2YXJpYXRpb24tc2VsZWN0XCIsXG5cbiAgICBwcm9wczoge1xuICAgICAgICBmb3JjZUNvbnRlbnQ6XG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICBkZWZhdWx0OiBmYWxzZVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGluamVjdDoge1xuICAgICAgICBpdGVtSWQ6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGxcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBkYXRhKClcbiAgICB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWx0ZXJlZFZhcmlhdGlvbnNDYWNoZToge30sXG4gICAgICAgICAgICBsYXN0Q29udGVudENvdW50OiAwXG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIG1vdW50ZWQoKVxuICAgIHtcbiAgICAgICAgLy8gaW5pdGlhbGx5IGNoZWNrIGZvciB2YWxpZCBzZWxlY3Rpb24gYW5kIGRpc2FibGUgYWRkIHRvIGJhc2tldCBidXR0b25cbiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGAke3RoaXMuaXRlbUlkfS92YXJpYXRpb25TZWxlY3Qvc2V0SXNWYXJpYXRpb25TZWxlY3RlZGAsICEhdGhpcy5jdXJyZW50U2VsZWN0aW9uKTtcbiAgICB9LFxuXG4gICAgY29tcHV0ZWQ6XG4gICAge1xuICAgICAgICBjdXJyZW50VmFyaWF0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7dGhpcy5pdGVtSWR9L2N1cnJlbnRJdGVtVmFyaWF0aW9uYF07XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3VycmVudFZhcmlhdGlvblNlbGVjdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5pdGVtc1t0aGlzLml0ZW1JZF0gJiYgdGhpcy4kc3RvcmUuc3RhdGUuaXRlbXNbdGhpcy5pdGVtSWRdLnZhcmlhdGlvblNlbGVjdDtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogcmV0dXJucyB0cnVlIGlmIGFueSB2YXJpYXRpb24gaGFzIG5vIGF0dHJpYnV0ZXNcbiAgICAgICAgICovXG4gICAgICAgIGhhc0VtcHR5T3B0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFyaWF0aW9ucy5zb21lKHZhcmlhdGlvbiA9PiAhdmFyaWF0aW9uLmF0dHJpYnV0ZXMubGVuZ3RoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRQbGVhc2VTZWxlY3RPcHRpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gQXBwLmNvbmZpZy5pdGVtLnNob3dQbGVhc2VTZWxlY3Q7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybnMgdGhlIHZhcmlhdGlvbiwgYmFzZWQgb24gdGhlIHNlbGVjdGVkIGF0dHJpYnV0ZXMgLyB1bml0XG4gICAgICAgICAqIHJldHVybnMgZmFsc2UgaWYgdGhlcmUgYXJlIG5vbmUgb3IgbXVsdGlwbGUgcmVzdWx0c1xuICAgICAgICAgKi9cbiAgICAgICAgY3VycmVudFNlbGVjdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkVmFyaWF0aW9ucyA9IHRoaXMuZmlsdGVyVmFyaWF0aW9ucyhudWxsLCBudWxsLCB0cnVlKTtcblxuICAgICAgICAgICAgaWYgKGZpbHRlcmVkVmFyaWF0aW9ucy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkVmFyaWF0aW9uc1swXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIGFsbCB1bml0cywgc2VsZWN0YWJsZSBieSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAgICAgKiBwcm9wICdmb3JjZUNvbnRlbnQnIHdpdGggdmFsdWUgdHJ1ZSB3aWxsIHJldHVybiBhbGwgdW5pdHMsIHdpdGhvdXQgZmlsdGVyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBwb3NzaWJsZVVuaXRzKClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gdXNlIGFuIG9iamVjdCwgdG8gbWFrZSB0aGUgZW50cmllcyB1bmlxdWVcbiAgICAgICAgICAgIGNvbnN0IHBvc3NpYmxlVW5pdHMgPSB7fTtcbiAgICAgICAgICAgIGNvbnN0IHZhcmlhdGlvbnMgPSB0aGlzLmZvcmNlQ29udGVudCA/IHRoaXMudmFyaWF0aW9ucyA6IHRoaXMuZmlsdGVyVmFyaWF0aW9ucyhudWxsLCBudWxsLCBudWxsLCB0cnVlKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCB2YXJpYXRpb24gb2YgdmFyaWF0aW9ucylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb3NzaWJsZVVuaXRzW3ZhcmlhdGlvbi51bml0Q29tYmluYXRpb25JZF0gPSB2YXJpYXRpb24udW5pdE5hbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBwb3NzaWJsZVVuaXRzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtUG9zc2libGVVbml0cyh0aGlzLnBvc3NpYmxlVW5pdHMpLm1hcCh2YWx1ZSA9PiB2YWx1ZVswXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNDb250ZW50VmlzaWJsZSgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5mb3JjZUNvbnRlbnQgJiYgISF0aGlzLmN1cnJlbnRTZWxlY3Rpb24gfHwgdGhpcy5mb3JjZUNvbnRlbnQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGFzU2VsZWN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuICFpc051bGxPclVuZGVmaW5lZCh0aGlzLnNlbGVjdGVkQXR0cmlidXRlcykgJiYgIU9iamVjdC52YWx1ZXModGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXMpLnNvbWUoKHZhbHVlKSA9PiB2YWx1ZSA8IDApO1xuICAgICAgICB9LFxuXG4gICAgICAgIGF0dHJpYnV0ZXMoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmFyaWF0aW9uU2VsZWN0ICYmIHRoaXMuY3VycmVudFZhcmlhdGlvblNlbGVjdC5hdHRyaWJ1dGVzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdGVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYXJpYXRpb25TZWxlY3QgJiYgdGhpcy5jdXJyZW50VmFyaWF0aW9uU2VsZWN0LnNlbGVjdGVkQXR0cmlidXRlcztcbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3RlZFVuaXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmFyaWF0aW9uU2VsZWN0ICYmIHRoaXMuY3VycmVudFZhcmlhdGlvblNlbGVjdC5zZWxlY3RlZFVuaXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdmFyaWF0aW9ucygpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYXJpYXRpb25TZWxlY3QgJiYgdGhpcy5jdXJyZW50VmFyaWF0aW9uU2VsZWN0LnZhcmlhdGlvbnM7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbWV0aG9kczpcbiAgICB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzZWxlY3QgYW4gYXR0cmlidXRlIGFuZCBjaGVjaywgaWYgdGhlIHNlbGVjdGlvbiBpcyB2YWxpZDsgaWYgbm90LCB1bnNldEludmFsaWRTZWxlY3Rpb24gd2lsbCBiZSBleGVjdXRlZFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYXR0cmlidXRlSWRcbiAgICAgICAgICogQHBhcmFtIHtbbnVtYmVyLCBzdHJpbmcsIG51bGxdfSBhdHRyaWJ1dGVWYWx1ZUlkXG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RBdHRyaWJ1dGUoYXR0cmlidXRlSWQsIGF0dHJpYnV0ZVZhbHVlSWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZVZhbHVlSWQgPSBwYXJzZUludChhdHRyaWJ1dGVWYWx1ZUlkKSB8fCBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlSWRdICE9PSBhdHRyaWJ1dGVWYWx1ZUlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgJHt0aGlzLml0ZW1JZH0vdmFyaWF0aW9uU2VsZWN0L3NlbGVjdEl0ZW1BdHRyaWJ1dGVgLCB7IGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UoYXR0cmlidXRlSWQsIGF0dHJpYnV0ZVZhbHVlSWQsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzZWxlY3QgYSB1bml0IGFuZCBjaGVjaywgaWYgdGhlIHNlbGVjdGlvbiBpcyB2YWxpZDsgaWYgbm90LCB1bnNldEludmFsaWRTZWxlY3Rpb24gd2lsbCBiZSBleGVjdXRlZFxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIHN0cmluZ119IHVuaXRJZFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0VW5pdCh1bml0SWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHVuaXRJZCA9IHBhcnNlSW50KHVuaXRJZCk7XG4gICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoYCR7dGhpcy5pdGVtSWR9L3ZhcmlhdGlvblNlbGVjdC9zZWxlY3RJdGVtVW5pdGAsIHVuaXRJZCk7XG4gICAgICAgICAgICB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKG51bGwsIG51bGwsIHVuaXRJZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2UoYXR0cmlidXRlSWQsIGF0dHJpYnV0ZVZhbHVlSWQsIHVuaXRJZClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlbGVjdGlvbilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZhcmlhdGlvbih0aGlzLmN1cnJlbnRTZWxlY3Rpb24udmFyaWF0aW9uSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRoaXMuaGFzU2VsZWN0aW9uKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIHVzZXIgc3dpdGNoZWQgYmFjayB0byBcInBsZWFzZSBzZWxlY3RcIlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFyaWF0aW9uKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zZXRJbnZhbGlkU2VsZWN0aW9uKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkLCB1bml0SWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxhc3RDb250ZW50Q291bnQgPSB0aGlzLnBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzLmxlbmd0aDtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2hhbmdlcyB0aGUgc2VsZWN0ZWQgYXR0cmlidXRlcyAvIHVuaXQsIHRvIGVuc3VyZSBhIHZhbGlkIHNlZWxjdGlvblxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIG51bGxdfSBhdHRyaWJ1dGVJZFxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIG51bGxdfSBhdHRyaWJ1dGVWYWx1ZUlkXG4gICAgICAgICAqIEBwYXJhbSB7W251bWJlciwgbnVsbF19IHVuaXRJZFxuICAgICAgICAgKi9cbiAgICAgICAgdW5zZXRJbnZhbGlkU2VsZWN0aW9uKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkLCB1bml0SWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHF1YWxpZmllZFZhcmlhdGlvbnMgPSB0aGlzLmdldFF1YWxpZmllZFZhcmlhdGlvbnMoYXR0cmlidXRlSWQsIGF0dHJpYnV0ZVZhbHVlSWQsIHVuaXRJZCk7XG4gICAgICAgICAgICBjb25zdCBjbG9zZXN0VmFyaWF0aW9ucyA9IHRoaXMuZ2V0Q2xvc2VzdFZhcmlhdGlvbnMocXVhbGlmaWVkVmFyaWF0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzYWxhYmxlICdjbG9zZXN0VmFyaWF0aW9ucycgaXMgdW5kZWZpbmVkLCB0YWtlIHRoZSBub3Qtc2FsYWJsZSBvbmVcbiAgICAgICAgICAgIGNvbnN0IGNsb3Nlc3RWYXJpYXRpb24gPSBjbG9zZXN0VmFyaWF0aW9uc1swXSB8fCBjbG9zZXN0VmFyaWF0aW9uc1sxXTtcblxuICAgICAgICAgICAgaWYgKCFjbG9zZXN0VmFyaWF0aW9uKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW52YWxpZFNlbGVjdGlvbiA9IHRoaXMuZ2V0SW52YWxpZFNlbGVjdGlvbkJ5VmFyaWF0aW9uKGNsb3Nlc3RWYXJpYXRpb24pO1xuXG4gICAgICAgICAgICB0aGlzLmNvcnJlY3RTZWxlY3Rpb24oaW52YWxpZFNlbGVjdGlvbik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0VG9vbHRpcChhdHRyaWJ1dGUsIGF0dHJpYnV0ZVZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighdGhpcy5pc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKGF0dHJpYnV0ZS5hdHRyaWJ1dGVJZCwgYXR0cmlidXRlVmFsdWUuYXR0cmlidXRlVmFsdWVJZCwgdHJ1ZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW52YWxpZE9wdGlvblRvb2x0aXAoYXR0cmlidXRlLmF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoYXR0cmlidXRlLnR5cGUgPT09IFwiaW1hZ2VcIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1BdHRyaWJ1dGVUb29sdGlwXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiBhdHRyaWJ1dGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF0dHJpYnV0ZVZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybnMgYSBzdHJpbmcgZm9yIGJveCB0b29sdGlwcywgZm9yIG5vdCBhdmFpbGFibGUgb3B0aW9uc1xuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYXR0cmlidXRlSWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGF0dHJpYnV0ZVZhbHVlSWRcbiAgICAgICAgICovXG4gICAgICAgIGdldEludmFsaWRPcHRpb25Ub29sdGlwKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBxdWFsaWZpZWRWYXJpYXRpb25zID0gdGhpcy5nZXRRdWFsaWZpZWRWYXJpYXRpb25zKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IGNsb3Nlc3RWYXJpYXRpb25zICAgPSB0aGlzLmdldENsb3Nlc3RWYXJpYXRpb25zKHF1YWxpZmllZFZhcmlhdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAoIWNsb3Nlc3RWYXJpYXRpb25zIHx8IGNsb3Nlc3RWYXJpYXRpb25zLmxlbmd0aCA8PSAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkU2VsZWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAhIWNsb3Nlc3RWYXJpYXRpb25zWzBdID8gdGhpcy5nZXRJbnZhbGlkU2VsZWN0aW9uQnlWYXJpYXRpb24oY2xvc2VzdFZhcmlhdGlvbnNbMF0pIDogbnVsbCxcbiAgICAgICAgICAgICAgICAhIWNsb3Nlc3RWYXJpYXRpb25zWzFdID8gdGhpcy5nZXRJbnZhbGlkU2VsZWN0aW9uQnlWYXJpYXRpb24oY2xvc2VzdFZhcmlhdGlvbnNbMV0pIDogbnVsbFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYgKCEhaW52YWxpZFNlbGVjdGlvbnNbMF1cbiAgICAgICAgICAgICAgICAmJiAhIWludmFsaWRTZWxlY3Rpb25zWzFdXG4gICAgICAgICAgICAgICAgJiYgaW52YWxpZFNlbGVjdGlvbnNbMF0uYXR0cmlidXRlc1RvUmVzZXQubGVuZ3RoID4gaW52YWxpZFNlbGVjdGlvbnNbMV0uYXR0cmlidXRlc1RvUmVzZXQubGVuZ3RoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIGEgbm9uLXNhbGFibGUgdmFyaWF0aW9uIHdpdGggbGVzcyBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm90U2FsYWJsZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW52YWxpZFNlbGVjdGlvbiA9IGludmFsaWRTZWxlY3Rpb25zWzBdIHx8IGludmFsaWRTZWxlY3Rpb25zWzFdO1xuICAgICAgICAgICAgY29uc3QgbmFtZXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgaW52YWxpZFNlbGVjdGlvbi5hdHRyaWJ1dGVzVG9SZXNldClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlLmF0dHJpYnV0ZUlkICE9PSBhdHRyaWJ1dGVJZClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goXCI8Yj5cIiArIGF0dHJpYnV0ZS5uYW1lICtcIjwvYj5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludmFsaWRTZWxlY3Rpb24ubmV3VW5pdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBcIjxiPlwiICsgdGhpcy4kdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Db250ZW50XCIpICsgXCI8L2I+XCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW5hbWVzLmxlbmd0aClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm90QXZhaWxhYmxlSW5TZWxlY3Rpb25cIiwgeyBuYW1lOiBuYW1lcy5qb2luKFwiLCBcIikgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybnMgYSBsaXN0IG9mIHZhcmlhdGlvbnMsIGZpbHRlcmVkIGJ5IGF0dHJpYnV0ZSBvciB1bml0XG4gICAgICAgICAqIEBwYXJhbSB7W251bWJlciwgbnVsbF19IGF0dHJpYnV0ZUlkXG4gICAgICAgICAqIEBwYXJhbSB7W251bWJlciwgbnVsbF19IGF0dHJpYnV0ZVZhbHVlSWRcbiAgICAgICAgICogQHBhcmFtIHtbbnVtYmVyLCBudWxsXX0gdW5pdElkXG4gICAgICAgICAqL1xuICAgICAgICBnZXRRdWFsaWZpZWRWYXJpYXRpb25zKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkLCB1bml0SWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQoYXR0cmlidXRlVmFsdWVJZCkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFyaWF0aW9ucy5maWx0ZXIodmFyaWF0aW9uID0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNEZWZpbmVkKHZhcmlhdGlvbi5hdHRyaWJ1dGVzLmZpbmQoYXR0cmlidXRlID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUuYXR0cmlidXRlSWQgPT09IGF0dHJpYnV0ZUlkICYmIGF0dHJpYnV0ZS5hdHRyaWJ1dGVWYWx1ZUlkID09PSBhdHRyaWJ1dGVWYWx1ZUlkKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0RlZmluZWQodW5pdElkKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YXJpYXRpb25zLmZpbHRlcih2YXJpYXRpb24gPT4gdmFyaWF0aW9uLnVuaXRDb21iaW5hdGlvbklkID09PSB1bml0SWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YXJpYXRpb25zLmZpbHRlcih2YXJpYXRpb24gPT4gIXZhcmlhdGlvbi5hdHRyaWJ1dGVzLmxlbmd0aCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybiBhIHNhbGFibGUgYW5kIGEgbm9uLXNhbGFibGUgdmFyaWF0aW9uIHdpdGggdGhlIG1pbmltdW0gbnVtYmVyIG9mIGNoYW5nZXMgb24gYXR0cmlidXRlcyBjb21wYXJlZCB0byB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICAgICAqIEBwYXJhbSB7YXJyYXl9IHF1YWxpZmllZFZhcmlhdGlvbnNcbiAgICAgICAgICovXG4gICAgICAgIGdldENsb3Nlc3RWYXJpYXRpb25zKHF1YWxpZmllZFZhcmlhdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBjbG9zZXN0U2FsYWJsZVZhcmlhdGlvbiwgbnVtYmVyT2ZTYWxhYmxlQ2hhbmdlcztcbiAgICAgICAgICAgIGxldCBjbG9zZXN0Tm9uU2FsYWJsZVZhcmlhdGlvbiwgbnVtYmVyT2ZOb25TYWxhYmxlQ2hhbmdlcztcblxuICAgICAgICAgICAgZm9yIChjb25zdCB2YXJpYXRpb24gb2YgcXVhbGlmaWVkVmFyaWF0aW9ucylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlcyA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFyaWF0aW9uLnVuaXRDb21iaW5hdGlvbklkICE9PSB0aGlzLnNlbGVjdGVkVW5pdCAmJiAhaXNOdWxsKHRoaXMuc2VsZWN0ZWRVbml0KSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIHVuaXQgZHJvcGRvd24gaXNuJ3QgdmlzaWJsZSwgaXQgc2hvdWxkIGhhdmUgYSBsb3dlciB3ZWlnaHQgZm9yIHJlc2V0IGludmVzdGlnYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuaXRXZWlnaHQgPSB0aGlzLnBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzLmxlbmd0aCA+IDEgJiYgdGhpcy5pc0NvbnRlbnRWaXNpYmxlID8gMC45IDogMC4xO1xuXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXMgKz0gdW5pdFdlaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiB2YXJpYXRpb24uYXR0cmlidXRlcylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQXR0cmlidXRlc1thdHRyaWJ1dGUuYXR0cmlidXRlSWRdICE9PSBhdHRyaWJ1dGUuYXR0cmlidXRlVmFsdWVJZClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYodmFyaWF0aW9uLmlzU2FsYWJsZSAmJiAoIW51bWJlck9mU2FsYWJsZUNoYW5nZXMgfHwgY2hhbmdlcyA8IG51bWJlck9mU2FsYWJsZUNoYW5nZXMpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFNhbGFibGVWYXJpYXRpb24gPSB2YXJpYXRpb247XG4gICAgICAgICAgICAgICAgICAgIG51bWJlck9mU2FsYWJsZUNoYW5nZXMgPSBjaGFuZ2VzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghdmFyaWF0aW9uLmlzU2FsYWJsZSAmJiAoIW51bWJlck9mTm9uU2FsYWJsZUNoYW5nZXMgfHwgY2hhbmdlcyA8IG51bWJlck9mTm9uU2FsYWJsZUNoYW5nZXMpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdE5vblNhbGFibGVWYXJpYXRpb24gPSB2YXJpYXRpb247XG4gICAgICAgICAgICAgICAgICAgIG51bWJlck9mTm9uU2FsYWJsZUNoYW5nZXMgPSBjaGFuZ2VzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFtjbG9zZXN0U2FsYWJsZVZhcmlhdGlvbiwgY2xvc2VzdE5vblNhbGFibGVWYXJpYXRpb25dO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIG9iamVjdCB3aXRoIGFycmF5ICdhdHRyaWJ1dGVzVG9SZXNldCcgYW5kIG5ld1VuaXQuIFRoZSBhdHRyaWJ1dGVzVG9SZXNldCBjb250YWlucyBhbGwgYXR0cmlidXRlcywgd2hpY2ggYXJlIG5vdCBtYXRjaGluZyB3aXRoIHRoZSBnaXZlbiB2YXJpYXRpb25cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHZhcmlhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0SW52YWxpZFNlbGVjdGlvbkJ5VmFyaWF0aW9uKHZhcmlhdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlc1RvUmVzZXQgPSBbXTtcbiAgICAgICAgICAgIGxldCBuZXdVbml0ID0gbnVsbDtcblxuICAgICAgICAgICAgZm9yIChsZXQgc2VsZWN0ZWRBdHRyaWJ1dGVJZCBpbiB0aGlzLnNlbGVjdGVkQXR0cmlidXRlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEF0dHJpYnV0ZUlkID0gcGFyc2VJbnQoc2VsZWN0ZWRBdHRyaWJ1dGVJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFyaWF0aW9uQXR0cmlidXRlID0gdmFyaWF0aW9uLmF0dHJpYnV0ZXMuZmluZChhdHRyaWJ1dGUgPT4gYXR0cmlidXRlLmF0dHJpYnV0ZUlkID09PSBzZWxlY3RlZEF0dHJpYnV0ZUlkKTtcblxuICAgICAgICAgICAgICAgIGlmICghaXNOdWxsKHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzW3NlbGVjdGVkQXR0cmlidXRlSWRdKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YXJpYXRpb25BdHRyaWJ1dGUgJiYgdmFyaWF0aW9uQXR0cmlidXRlLmF0dHJpYnV0ZVZhbHVlSWQgIT09IHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzW3NlbGVjdGVkQXR0cmlidXRlSWRdIHx8ICF2YXJpYXRpb25BdHRyaWJ1dGUpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZVRvUmVzZXQgPSB0aGlzLmF0dHJpYnV0ZXMuZmluZChhdHRyID0+IGF0dHIuYXR0cmlidXRlSWQgPT09IHNlbGVjdGVkQXR0cmlidXRlSWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzVG9SZXNldC5wdXNoKGF0dHJpYnV0ZVRvUmVzZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodmFyaWF0aW9uLnVuaXRDb21iaW5hdGlvbklkICE9PSB0aGlzLnNlbGVjdGVkVW5pdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuZXdVbml0ID0gdmFyaWF0aW9uLnVuaXRDb21iaW5hdGlvbklkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geyBhdHRyaWJ1dGVzVG9SZXNldCwgbmV3VW5pdCB9O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXNldHMgYWxsIGludmFsaWQgYXR0cmlidXRlcyBhbmQgY2hhbmdlIHRoZSB1bml0LCBpZiByZXF1aXJlZC4gUHJpbnRzIGEgbWVzc2FnZSB0byB0aGUgdXNlciBpZiBzby5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGludmFsaWRTZWxlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIGNvcnJlY3RTZWxlY3Rpb24oaW52YWxpZFNlbGVjdGlvbilcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgICA9IFtdO1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXMpKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGVUb1Jlc2V0IG9mIGludmFsaWRTZWxlY3Rpb24uYXR0cmlidXRlc1RvUmVzZXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Ob3RBdmFpbGFibGVcIiwgeyBuYW1lOiBhdHRyaWJ1dGVUb1Jlc2V0Lm5hbWUgfSlcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlc1thdHRyaWJ1dGVUb1Jlc2V0LmF0dHJpYnV0ZUlkXSA9ICghdGhpcy5oYXNFbXB0eU9wdGlvbiAmJiBBcHAuY29uZmlnLml0ZW0uc2hvd1BsZWFzZVNlbGVjdCkgPyAtMSA6IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbnZhbGlkU2VsZWN0aW9uLm5ld1VuaXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGFzdENvbnRlbnRDb3VudCA+IDEgJiYgdGhpcy5wb3NzaWJsZVVuaXRDb21iaW5hdGlvbklkcy5sZW5ndGggPiAxICYmICFpc051bGwodGhpcy5zZWxlY3RlZFVuaXQpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHRyYW5zbGF0ZShcIkNlcmVzOjpUZW1wbGF0ZS5zaW5nbGVJdGVtTm90QXZhaWxhYmxlXCIsIHsgbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Db250ZW50XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgJHt0aGlzLml0ZW1JZH0vdmFyaWF0aW9uU2VsZWN0L3NlbGVjdEl0ZW1Vbml0YCwgaW52YWxpZFNlbGVjdGlvbi5uZXdVbml0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGAke3RoaXMuaXRlbUlkfS92YXJpYXRpb25TZWxlY3Qvc2V0SXRlbVNlbGVjdGVkQXR0cmlidXRlc2AsIGF0dHJpYnV0ZXMpO1xuXG4gICAgICAgICAgICB0aGlzLnNldFZhcmlhdGlvbih0aGlzLmN1cnJlbnRTZWxlY3Rpb24gPyB0aGlzLmN1cnJlbnRTZWxlY3Rpb24udmFyaWF0aW9uSWQgOiAwKTtcblxuICAgICAgICAgICAgTm90aWZpY2F0aW9uU2VydmljZS53YXJuKFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmpvaW4oXCI8YnI+XCIpXG4gICAgICAgICAgICApLmNsb3NlQWZ0ZXIoNTAwMCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybnMgbWF0Y2hpbmcgdmFyaWF0aW9ucyB3aXRoIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAgICAgICAqIGF0dHJpYnV0ZXMgYW5kIHVuaXRJZCBjb3VsZCBiZSBmaWxsZWQsIHRvIGNoZWNrIGEgc3BlY2lmaWMgc2VsZWN0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhdHRyaWJ1dGVzXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB1bml0SWRcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSBzdHJpY3RcbiAgICAgICAgICovXG4gICAgICAgIGZpbHRlclZhcmlhdGlvbnMoYXR0cmlidXRlcywgdW5pdElkLCBzdHJpY3QsIGlnbm9yZVVuaXQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzIHx8IHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzO1xuICAgICAgICAgICAgdW5pdElkID0gdW5pdElkIHx8IHRoaXMuc2VsZWN0ZWRVbml0O1xuICAgICAgICAgICAgc3RyaWN0ID0gISFzdHJpY3Q7XG4gICAgICAgICAgICBpZ25vcmVVbml0ID0gISFpZ25vcmVVbml0O1xuXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShhdHRyaWJ1dGVzKSArIFwiX1wiICsgdW5pdElkICsgXCJfXCIgKyBzdHJpY3QgKyBcIl9cIiArIGlnbm9yZVVuaXQ7XG5cbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQodGhpcy5maWx0ZXJlZFZhcmlhdGlvbnNDYWNoZVtrZXldKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJlZFZhcmlhdGlvbnNDYWNoZVtrZXldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB1bmlxdWVWYWx1ZXMgPSBbLi4ubmV3IFNldChPYmplY3QudmFsdWVzKGF0dHJpYnV0ZXMpKV07XG4gICAgICAgICAgICBjb25zdCBpc0VtcHR5T3B0aW9uU2VsZWN0ZWQgPSB1bmlxdWVWYWx1ZXMubGVuZ3RoID09PSAxICYmIGlzTnVsbCh1bmlxdWVWYWx1ZXNbMF0pO1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRWYXJpYXRpb25zID0gdGhpcy52YXJpYXRpb25zLmZpbHRlcih2YXJpYXRpb24gPT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VsZWN0ZWQgdW5pdCBpcyBub3QgbWF0Y2hpbmdcbiAgICAgICAgICAgICAgICBpZiAoIWlnbm9yZVVuaXQgJiYgdmFyaWF0aW9uLnVuaXRDb21iaW5hdGlvbklkICE9PSB1bml0SWQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdGhlIHZhcmlhdGlvbiBoYXMgbm8gYXR0cmlidXRlcyAob25seSBjaGVja2VkLCBpZiBhbnkgYXR0cmlidXRlIGhhcyBhIHNlbGVjdGVkIHZhbHVlKTsgb3IgdGhlIHZhcmlhdGlvbiBoYXMgYXR0cmlidXRlcyBhbmQgZW1wdHkgb3B0aW9uIGlzIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgLy8gcmVxdWlyZXMgbW9yZSB0aGFuIDAgYXR0cmlidXRlc1xuICAgICAgICAgICAgICAgIGlmICgoKCFpc0VtcHR5T3B0aW9uU2VsZWN0ZWQgJiYgIXZhcmlhdGlvbi5hdHRyaWJ1dGVzLmxlbmd0aCkgfHwgKGlzRW1wdHlPcHRpb25TZWxlY3RlZCAmJiB2YXJpYXRpb24uYXR0cmlidXRlcy5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICAmJiB0aGlzLmF0dHJpYnV0ZXMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZUlkIGluIGF0dHJpYnV0ZXMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YXJpYXRpb25BdHRyaWJ1dGUgPSB2YXJpYXRpb24uYXR0cmlidXRlcy5maW5kKHZhcmlhdGlvbkF0dHJpYnV0ZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWF0aW9uQXR0cmlidXRlLmF0dHJpYnV0ZUlkID09PSBwYXJzZUludChhdHRyaWJ1dGVJZCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuIGF0dHJpYnV0ZSBpcyBub3QgbWF0Y2hpbmcgd2l0aCBzZWxlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhcmlhdGlvbkF0dHJpYnV0ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWF0aW9uQXR0cmlidXRlLmF0dHJpYnV0ZVZhbHVlSWQgIT09IGF0dHJpYnV0ZXNbYXR0cmlidXRlSWRdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoc3RyaWN0IHx8ICFzdHJpY3QgJiYgIWlzTnVsbChhdHRyaWJ1dGVzW2F0dHJpYnV0ZUlkXSkgJiYgYXR0cmlidXRlc1thdHRyaWJ1dGVJZF0gIT09IC0xKSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJlZFZhcmlhdGlvbnNDYWNoZVtrZXldID0gZmlsdGVyZWRWYXJpYXRpb25zO1xuXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRWYXJpYXRpb25zO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm5zIHRydWUsIGlmIHRoZSBzZWxlY3Rpb24gd2l0aCBhIG5ldyBhdHRyaWJ1dGUgdmFsdWUgd291bGQgYmUgdmFsaWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGF0dHJpYnV0ZUlkXG4gICAgICAgICAqIEBwYXJhbSB7W251bWJlciwgc3RyaW5nLCBudWxsXX0gYXR0cmlidXRlVmFsdWVJZFxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpbHRlclNhbGFibGVWYXJpYXRpb25zXG4gICAgICAgICAqL1xuICAgICAgICBpc0F0dHJpYnV0ZVNlbGVjdGlvblZhbGlkKGF0dHJpYnV0ZUlkLCBhdHRyaWJ1dGVWYWx1ZUlkLCBmaWx0ZXJTYWxhYmxlVmFyaWF0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgYXR0cmlidXRlVmFsdWVJZCA9IHBhcnNlSW50KGF0dHJpYnV0ZVZhbHVlSWQpIHx8IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlSWRdID09PSBhdHRyaWJ1dGVWYWx1ZUlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWRBdHRyaWJ1dGVzKSk7XG5cbiAgICAgICAgICAgIHNlbGVjdGVkQXR0cmlidXRlc1thdHRyaWJ1dGVJZF0gPSBwYXJzZUludChhdHRyaWJ1dGVWYWx1ZUlkKSB8fCBudWxsO1xuXG4gICAgICAgICAgICBjb25zdCBpZ25vcmVVbml0ID0gIShPYmplY3Qua2V5cyh0aGlzLnBvc3NpYmxlVW5pdHMpLmxlbmd0aCA+IDEgJiYgdGhpcy5pc0NvbnRlbnRWaXNpYmxlKTtcbiAgICAgICAgICAgIGxldCB2YXJpYXRpb25zID0gdGhpcy5maWx0ZXJWYXJpYXRpb25zKHNlbGVjdGVkQXR0cmlidXRlcywgbnVsbCwgbnVsbCwgaWdub3JlVW5pdCk7XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXJTYWxhYmxlVmFyaWF0aW9ucylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXJpYXRpb25zID0gdmFyaWF0aW9ucy5maWx0ZXIodmFyaWF0aW9uID0+IHZhcmlhdGlvbi5pc1NhbGFibGUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YXJpYXRpb25zLmxlbmd0aCA+IDA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybnMgdHJ1ZSwgaWYgdGhlIHNlbGVjdGlvbiB3aXRoIGEgbmV3IHVuaXRJZCB3b3VsZCBiZSB2YWxpZFxuICAgICAgICAgKiBAcGFyYW0ge1tudW1iZXIsIHN0cmluZ119IHVuaXRJZFxuICAgICAgICAgKi9cbiAgICAgICAgaXNVbml0U2VsZWN0aW9uVmFsaWQodW5pdElkKVxuICAgICAgICB7XG4gICAgICAgICAgICB1bml0SWQgPSBwYXJzZUludCh1bml0SWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRVbml0ID09PSB1bml0SWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgICAgICAgICAgLmZpbHRlclZhcmlhdGlvbnMobnVsbCwgdW5pdElkKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIodmFyaWF0aW9uID0+IHZhcmlhdGlvbi5pc1NhbGFibGUpXG4gICAgICAgICAgICAgICAgLmxlbmd0aCA+IDBcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGlzcGF0Y2ggdnVleCBhY3Rpb24gJ2xvYWRWYXJpYXRpb24nIHRvIGFyY2hpdmUgYSB2YXJpYXRpb25cbiAgICAgICAgICogZGlzcGF0Y2hlcyBhIGN1c3RvbSBldmVudCBuYW1lZCAnb25WYXJpYXRpb25DaGFuZ2VkJ1xuICAgICAgICAgKiBAcGFyYW0ge1tzdHJpbmcsIG51bWJlciwgbnVsbF19IHZhcmlhdGlvbklkXG4gICAgICAgICAqL1xuICAgICAgICBzZXRWYXJpYXRpb24odmFyaWF0aW9uSWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghaXNEZWZpbmVkKHZhcmlhdGlvbklkKSAmJiB0aGlzLmN1cnJlbnRTZWxlY3Rpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyaWF0aW9uSWQgPSB0aGlzLmN1cnJlbnRTZWxlY3Rpb24udmFyaWF0aW9uSWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0RlZmluZWQodmFyaWF0aW9uSWQpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKGAke3RoaXMuaXRlbUlkfS9sb2FkVmFyaWF0aW9uYCwgdmFyaWF0aW9uSWQpLnRoZW4odmFyaWF0aW9uID0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcIm9uVmFyaWF0aW9uQ2hhbmdlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczogdmFyaWF0aW9uLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHM6IHZhcmlhdGlvbi5kb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHRoaXMuaXRlbUlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpc1RleHRDdXQoY29udGVudClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHJlZnMuYXR0cmlidXRlc0NvbnRhbmVyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0V2lkdGgoY29udGVudCwgXCJDdXN0b20tRm9udCwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZlwiKSA+IHRoaXMuJHJlZnMuYXR0cmlidXRlc0NvbnRhbmVyWzBdLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0U2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZU5hbWUoYXR0cmlidXRlKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEF0dHJpYnV0ZVZhbHVlSWQgPSAgdGhpcy5zZWxlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlLmF0dHJpYnV0ZUlkXTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQXR0cmlidXRlVmFsdWUgPSBhdHRyaWJ1dGUudmFsdWVzLmZpbmQoYXR0clZhbHVlID0+IGF0dHJWYWx1ZS5hdHRyaWJ1dGVWYWx1ZUlkID09PSBzZWxlY3RlZEF0dHJpYnV0ZVZhbHVlSWQpO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZS5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQXBwLmNvbmZpZy5pdGVtLnNob3dQbGVhc2VTZWxlY3QgJiYgc2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZUlkID09PSAtMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1QbGVhc2VTZWxlY3RcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kdHJhbnNsYXRlKFwiQ2VyZXM6OlRlbXBsYXRlLnNpbmdsZUl0ZW1Ob1NlbGVjdGlvblwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0cmFuc2Zvcm1Qb3NzaWJsZVVuaXRzKHBvc3NpYmxlVW5pdHMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhwb3NzaWJsZVVuaXRzKS5zb3J0KCh1bml0QSwgdW5pdEIpID0+IHtcbiAgICAgICAgICAgICAgICB1bml0QSA9IHRoaXMuc3BsaXRVbml0TmFtZSh1bml0QVsxXSk7XG4gICAgICAgICAgICAgICAgdW5pdEIgPSB0aGlzLnNwbGl0VW5pdE5hbWUodW5pdEJbMV0pO1xuICAgICAgICAgICAgICAgIC8vIG9yZGVyIGJ5IHVuaXRcbiAgICAgICAgICAgICAgICBpZiAodW5pdEFbMV0gPCB1bml0QlsxXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1bml0QVsxXSA+IHVuaXRCWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvcmRlciBieSBjb250ZW50IChjb3VudClcbiAgICAgICAgICAgICAgICBpZiAodW5pdEFbMF0gPCB1bml0QlswXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh1bml0QVswXSA+IHVuaXRCWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBzcGxpdFVuaXROYW1lKHVuaXROYW1lKSB7XG4gICAgICAgICAgICBjb25zdCB1bml0TmFtZVNwbGl0ID0gdW5pdE5hbWUuc3BsaXQoXCIgXCIpO1xuXG4gICAgICAgICAgICBpZiAoIWlzTmFOKHVuaXROYW1lU3BsaXRbMF0pKSB7XG4gICAgICAgICAgICAgICAgdW5pdE5hbWVTcGxpdFswXSA9IHVuaXROYW1lU3BsaXRbMF0ucmVwbGFjZShBcHAuY3VycmVuY3lQYXR0ZXJuLnNlcGFyYXRvcl90aG91c2FuZHMsIFwiXCIpO1xuICAgICAgICAgICAgICAgIHVuaXROYW1lU3BsaXRbMF0gPSBwYXJzZUludCh1bml0TmFtZVNwbGl0WzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVuaXROYW1lU3BsaXQ7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgd2F0Y2g6XG4gICAge1xuICAgICAgICBjdXJyZW50U2VsZWN0aW9uKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoYCR7dGhpcy5pdGVtSWR9L3ZhcmlhdGlvblNlbGVjdC9zZXRJc1ZhcmlhdGlvblNlbGVjdGVkYCwgISF2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHZhcmlhdGlvbnMoKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBGSVggdW5zZXQgdmFyaWF0aW9uIGNhY2hlIGFmdGVyIHN1YnNlcXVlbnQgdmFyaWF0aW9ucyBhcmUgbG9hZGVkXG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkVmFyaWF0aW9uc0NhY2hlID0ge307XG4gICAgICAgIH1cbiAgICB9XG59XG48L3NjcmlwdD5cbiIsImltcG9ydCBtb2QgZnJvbSBcIi0hLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanM/P2Nsb25lZFJ1bGVTZXQtMi51c2UhLi4vLi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPz92dWUtbG9hZGVyLW9wdGlvbnMhLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiOyBleHBvcnQgZGVmYXVsdCBtb2Q7IGV4cG9ydCAqIGZyb20gXCItIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzPz9jbG9uZWRSdWxlU2V0LTIudXNlIS4uLy4uLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8/dnVlLWxvYWRlci1vcHRpb25zIS4vVmFyaWF0aW9uU2VsZWN0LnZ1ZT92dWUmdHlwZT1zY3JpcHQmbGFuZz1qcyZcIiIsImltcG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH0gZnJvbSBcIi4vVmFyaWF0aW9uU2VsZWN0LnZ1ZT92dWUmdHlwZT10ZW1wbGF0ZSZpZD01ODhjMTg4NyZcIlxuaW1wb3J0IHNjcmlwdCBmcm9tIFwiLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5leHBvcnQgKiBmcm9tIFwiLi9WYXJpYXRpb25TZWxlY3QudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJlwiXG5cblxuLyogbm9ybWFsaXplIGNvbXBvbmVudCAqL1xuaW1wb3J0IG5vcm1hbGl6ZXIgZnJvbSBcIiEuLi8uLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvcnVudGltZS9jb21wb25lbnROb3JtYWxpemVyLmpzXCJcbnZhciBjb21wb25lbnQgPSBub3JtYWxpemVyKFxuICBzY3JpcHQsXG4gIHJlbmRlcixcbiAgc3RhdGljUmVuZGVyRm5zLFxuICBmYWxzZSxcbiAgbnVsbCxcbiAgbnVsbCxcbiAgbnVsbFxuICBcbilcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50LmV4cG9ydHMiXSwibmFtZXMiOlsicmVuZGVyIiwiX3ZtIiwiX2MiLCJfc2VsZiIsInN0YXRpY0NsYXNzIiwiYXR0cmlidXRlcyIsImxlbmd0aCIsInBvc3NpYmxlVW5pdENvbWJpbmF0aW9uSWRzIiwiaXNDb250ZW50VmlzaWJsZSIsIl9sIiwiYXR0cmlidXRlIiwiaW5kZXgiLCJrZXkiLCJ0eXBlIiwicmVmIiwicmVmSW5Gb3IiLCJhdHRycyIsImlkIiwibmFtZSIsIm9uIiwiY2hhbmdlIiwiJGV2ZW50Iiwic2VsZWN0QXR0cmlidXRlIiwiYXR0cmlidXRlSWQiLCJ0YXJnZXQiLCJ2YWx1ZSIsImFkZFBsZWFzZVNlbGVjdE9wdGlvbiIsImhhc1NlbGVjdGlvbiIsImRvbVByb3BzIiwiX3YiLCJfcyIsIiR0cmFuc2xhdGUiLCJfZSIsImhhc0VtcHR5T3B0aW9uIiwic2VsZWN0ZWRBdHRyaWJ1dGVzIiwic2VsZWN0ZWQiLCJ2YWx1ZXMiLCJhdHRyaWJ1dGVWYWx1ZUlkIiwiaXNBdHRyaWJ1dGVTZWxlY3Rpb25WYWxpZCIsImRpcmVjdGl2ZXMiLCJyYXdOYW1lIiwiaXNUZXh0Q3V0IiwiZXhwcmVzc2lvbiIsImZvciIsInRpdGxlIiwiZ2V0U2VsZWN0ZWRBdHRyaWJ1dGVWYWx1ZU5hbWUiLCJjbGFzcyIsImltYWdlcyIsImFjdGl2ZSIsImludmFsaWQiLCJjbGljayIsImdldFRvb2x0aXAiLCJzcmMiLCJpbWFnZVVybCIsImFsdCIsInNlbGVjdFVuaXQiLCJ1bml0Q29tYmluYXRpb25JZCIsInBhcnNlSW50Iiwic2VsZWN0ZWRVbml0IiwiaXNVbml0U2VsZWN0aW9uVmFsaWQiLCJwb3NzaWJsZVVuaXRzIiwiX3QiLCJzdGF0aWNSZW5kZXJGbnMiLCJfd2l0aFN0cmlwcGVkIiwicHJvcHMiLCJmb3JjZUNvbnRlbnQiLCJkZWZhdWx0IiwiaW5qZWN0IiwiaXRlbUlkIiwiZGF0YSIsImZpbHRlcmVkVmFyaWF0aW9uc0NhY2hlIiwibGFzdENvbnRlbnRDb3VudCIsIm1vdW50ZWQiLCJjb21wdXRlZCIsImN1cnJlbnRWYXJpYXRpb24iLCJjdXJyZW50VmFyaWF0aW9uU2VsZWN0IiwiY3VycmVudFNlbGVjdGlvbiIsInZhcmlhdGlvbnMiLCJ2YXJpYXRpb24iLCJtZXRob2RzIiwidW5pdElkIiwib25TZWxlY3Rpb25DaGFuZ2UiLCJ1bnNldEludmFsaWRTZWxlY3Rpb24iLCJnZXRJbnZhbGlkT3B0aW9uVG9vbHRpcCIsImludmFsaWRTZWxlY3Rpb25zIiwiaW52YWxpZFNlbGVjdGlvbiIsIm5hbWVzIiwiZ2V0UXVhbGlmaWVkVmFyaWF0aW9ucyIsImdldENsb3Nlc3RWYXJpYXRpb25zIiwicXVhbGlmaWVkVmFyaWF0aW9ucyIsImNoYW5nZXMiLCJjbG9zZXN0U2FsYWJsZVZhcmlhdGlvbiIsIm51bWJlck9mU2FsYWJsZUNoYW5nZXMiLCJjbG9zZXN0Tm9uU2FsYWJsZVZhcmlhdGlvbiIsIm51bWJlck9mTm9uU2FsYWJsZUNoYW5nZXMiLCJnZXRJbnZhbGlkU2VsZWN0aW9uQnlWYXJpYXRpb24iLCJzZWxlY3RlZEF0dHJpYnV0ZUlkIiwiYXR0cmlidXRlc1RvUmVzZXQiLCJuZXdVbml0IiwiY29ycmVjdFNlbGVjdGlvbiIsImF0dHJpYnV0ZVRvUmVzZXQiLCJtZXNzYWdlcyIsIk5vdGlmaWNhdGlvblNlcnZpY2UiLCJmaWx0ZXJWYXJpYXRpb25zIiwic3RyaWN0IiwiaWdub3JlVW5pdCIsInZhcmlhdGlvbkF0dHJpYnV0ZSIsImZpbHRlciIsInNldFZhcmlhdGlvbiIsInZhcmlhdGlvbklkIiwiZG9jdW1lbnQiLCJkZXRhaWwiLCJkb2N1bWVudHMiLCJ0cmFuc2Zvcm1Qb3NzaWJsZVVuaXRzIiwidW5pdEEiLCJ1bml0QiIsInNwbGl0VW5pdE5hbWUiLCJ1bml0TmFtZVNwbGl0Iiwid2F0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///75356\n')}}]);