{"version":3,"sources":["webpack:///resources/js/src/app/components/basket/BasketTotals.vue","webpack:///./resources/js/src/app/components/basket/BasketTotals.vue?3e50","webpack:///./resources/js/src/app/components/basket/BasketTotals.vue","webpack:///./resources/js/src/app/components/basket/BasketTotals.vue?f7cd","webpack:///./resources/js/src/app/components/basket/BasketTotals.vue?d468"],"names":[],"mappings":"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CzD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,wCAAwC;AAC5E,oCAAoC;AACpC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,8BAA8B,6BAA6B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gCAAgC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gCAAgC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qBAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,qBAAqB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qBAAqB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,2BAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qBAAqB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qBAAqB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qBAAqB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,qBAAqB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3fA;AAAA;AAAA;AAAA;AAA2F;AAC3B;AACL;;;AAG3D;AACsG;AACtG,gBAAgB,2GAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA,wCAAoM,CAAgB,gPAAG,EAAC,C;;;;;;;;;;;;ACAxN;AAAA;AAAA;AAAA;AAAA;AAAA","file":"chunks/ceres-client-19.js","sourcesContent":["<template>\n    <div class=\"bkr-cc cmp cmp-totals basketTotals\" :class=\"{preview : $attrs.preview}\">\n        <div class=\"h3\" v-if=\"!$attrs.preview\">{{ $translate(\"Ceres::Template.basketSum\") }}</div>\n        <button v-if=\"!$attrs.preview\" class=\"btn btn-xs btn-default\" onclick=\"$('.net').slideToggle();\">Details</button>\n\n        <div class=\"component-loading with-icon refreshing split-totals-height\" :class=\"{ 'isLoading': isBasketLoading }\">\n            <dl>\n                <slot name=\"before-item-sum\"></slot>\n\n                <template v-if=\"visibleFields.includes('basketValueNet')\">\n                    <div class=\"net\">\n                        <dt>\n                            {{ $translate(\"Ceres::Template.basketValue\") }} ({{ $translate(\"Ceres::Template.basketNet\") }})\n                        </dt><!--\n                        --><dd class=\"k1\">\n                            {{ calculateBaseValue(rrpNetCalc, basket.basketRebate) | currency }}\n                        </dd>\n                    </div>\n                </template>\n                <template v-if=\"visibleFields.includes('basketValueGross')\">\n                    <dt>\n                        {{ $translate(\"Ceres::Template.basketValue\") }} ({{ $translate(\"Ceres::Template.basketGross\") }})\n                    </dt><!--\n                    --><dd class=\"k2\">\n                        {{ calculateBaseValue(rrpCalc, basket.basketRebate)| currency  }}\n                    </dd>\n                </template>\n            \n                <!-- AdditionalCosts with Tax -->\n                <template v-if=\"(visibleFields.includes('additionalCosts') || visibleFields.includes('basket.additional_costs')) && displayedProperties.length\">\n                    <template v-for=\"property in displayedProperties\">\n                    <dt class=\"muted-properties\" :class=\"{ 'font-weight-bold': showNetPrices }\" :key=\"'property-name-' + property.propertyId\" data-testing=\"additionalcost-with-tax\">\n                        &nbsp;<i>davon {{ property.name }}</i>\n                    </dt><!-- --><dd class=\"muted-properties k3\" :class=\"{ 'font-weight-bold': showNetPrices }\" :key=\"'property-price-' + property.propertyId\">\n                        <i>{{ property.price | currency }}</i>\n                    </dd>\n                    </template>\n                </template>\n                <!-- AdditionalCosts with Tax -->\n\n                <template v-if=\"visibleFields.includes('rebate') && basket.basketRebate\">\n                    <dt class=\"rebate-hint\">\n                        {{ $translate(\"Ceres::Template.basketRebate\") }}\n                    </dt><!--\n                --><dd class=\"k4 rebate-hint\" v-if=\"!showNetPrices\">\n                        {{ calculateBaseValue(basket.itemSum, basket.basketRebate) - basket.itemSum | currency  }}\n                    </dd><!--\n                --><dd class=\"k5 rebate-hint\" v-else>\n                        {{ calculateBaseValue(basket.itemSumNet, basket.basketRebate) - basket.itemSumNet | currency  }}\n                    </dd>\n                    <dt>\n                        {{ $translate(\"Ceres::Template.basketSubTotal\") }} ({{ $translate(\"Ceres::Template.basketNet\") }})\n                    </dt><!--\n                --><dd class=\"k6\">\n                        {{ basket.itemSumNet | currency }}\n                    </dd>\n                    <dt>\n                        {{ $translate(\"Ceres::Template.basketSubTotal\") }} ({{ $translate(\"Ceres::Template.basketGross\") }})\n                    </dt><!--\n                --><dd class=\"k7\">\n                        {{ rrpCalc | currency }}\n                    </dd>\n                </template>\n                <slot name=\"after-item-sum\"></slot>\n\n                <slot name=\"before-shipping-costs\"></slot>\n                <template v-if=\"visibleFields.includes('shippingCostsNet')\">\n                    <div class=\"net\">\n                    <dt>\n                        {{ $translate(\"Ceres::Template.basketShippingCosts\") }} ({{ $translate(\"Ceres::Template.basketNet\") }})\n                    </dt><!--\n                    --><dd class=\"k8\">\n                        {{ basket.shippingAmountNet | currency }}\n                    </dd>\n                    </div>\n                </template>\n                <template v-if=\"visibleFields.includes('shippingCostsGross')\">\n                    <dt>\n                        {{ $translate(\"Ceres::Template.basketShippingCosts\") }} ({{ $translate(\"Ceres::Template.basketGross\") }})\n                    </dt><!--\n                    --><dd class=\"k9\">\n                        {{ basket.shippingAmount | currency }}\n                    </dd>\n                </template>\n               <slot name=\"after-shipping-costs\"></slot>\n                <template v-if=\"visibleFields.includes('promotionCoupon') && basket.couponCode && basket.couponCampaignType === 'promotion'\">\n                <hr />\n                    <dt>\n                        {{ $translate(\"Ceres::Template.basketCoupon\") }}\n                    </dt><!--\n                --><dd class=\"k10\">\n                        {{ basket.couponDiscount | currency }}\n                    </dd>\n                </template>\n                 <template v-if=\"youSave > 0\">\n                 <hr v-if=\"!(visibleFields.includes('promotionCoupon') && basket.couponCode && basket.couponCampaignType === 'promotion')\" />\n                    <dt>\n                        Aktionsrabatt\n                    </dt><!--\n                    --><dd class=\"k11\">\n                        - {{ youSave | currency }}\n                    </dd>\n                </template>\n\n                <div class=\"net\">\n                    <hr>\n                    <slot name=\"before-total-sum\"></slot>\n                    <template v-if=\"visibleFields.includes('totalSumNet')\">\n                        <dt>\n                            {{ $translate(\"Ceres::Template.basketTotalSum\") }} ({{ $translate(\"Ceres::Template.basketNet\") }})\n                        </dt><!--\n                        --><dd class=\"k12\">\n                            {{ basket.basketAmountNet | currency }}\n                        </dd>\n                    </template>\n                     <slot name=\"before-vat\"></slot>\n\n                    <div v-if=\"visibleFields.includes('vats')\" class=\"vatTotals\" v-for=\"totalVat in basket.totalVats\">\n                        <dt>\n                            {{ $translate(\"Ceres::Template.basketVAT\") }} {{ totalVat.vatValue }}%\n                        </dt><!--\n                        --><dd class=\"k13\">\n                            {{ totalVat.vatAmount | currency }}\n                        </dd>\n                    </div>\n                </div>\n                <div class=\"totalSum\">\n                    <hr>\n                    <template v-if=\"visibleFields.includes('totalSumGross')\">\n                        <dt>\n                            {{ $translate(\"Ceres::Template.basketTotalSum\") }} ({{ $translate(\"Ceres::Template.basketGross\") }})\n                        </dt><!--\n                        --><dd class=\"k14\">\n                            {{ basket.basketAmount | currency }}\n                        </dd>\n                    </template>\n                   \n                    <template v-if=\"visibleFields.includes('salesCoupon') && basket.couponCode && basket.couponCampaignType === 'sales'\">\n                        <dt>\n                            {{ $translate(\"Ceres::Template.basketCoupon\") }}\n                        </dt><!--\n                        --><dd class=\"k15\">\n                            {{ basket.couponDiscount | currency }}\n                        </dd>\n                    </template>\n                    <template v-if=\"visibleFields.includes('openAmount') && basket.couponCampaignType === 'sales'\">\n                        <dt>\n                            {{ $translate(\"Ceres::Template.basketOpenAmount\") }}\n                        </dt><!--\n                    --><dd class=\"k16\">\n                            {{ basket.openAmount | currency }}\n                        </dd>\n                    </template>\n                </div>\n                  <slot name=\"after-total-sum\"></slot>\n            </dl>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { hasVat, isAdditionalCosts } from \"../../helper/OrderPropertyHelper\";\nexport default {\n    name: \"basket-totals\",\n    data() {\n        return {\n            displayedProperties: [],\n            displayedPropertiesWithoutTax: []\n        }\n    },\n    created() {\n        this.setPropertiesForTotals(this.basketItems);\n    },\n    watch: {\n        \n        basketItems: \n        {\n            deep: true,\n            handler(newItems)\n            {\n                this.setPropertiesForTotals(newItems)\n            }\n        }\n        \n    },\n\n    props:\n    {\n        visibleFields:\n        {\n            type: Array,\n            default: () => [\n                \"basketValueNet\",\n                \"basketValueGross\",\n                \"rebate\",\n                \"shippingCostsNet\",\n                \"shippingCostsGross\",\n                \"promotionCoupon\",\n                \"totalSumNet\",\n                \"vats\",\n                \"additionalCosts\",\n                \"totalSumGross\",\n                \"salesCoupon\",\n                \"openAmount\",\n                \"subAmount\"\n            ]\n        }\n    },\n\n    computed:\n    {\n        currentShippingCountry()\n        {\n            const shippingCountryId = this.basket.shippingCountryId;\n\n            return this.shippingCountries.find(country => country.id === shippingCountryId);\n        },\n\n        shopCountry()\n        {\n            const shopCountryId = this.basket.shopCountryId;\n\n            return this.shippingCountries.find(country => country.id === shopCountryId);\n        },\n\n        deliveryExportTranslation()\n        {\n            const shopCountry = this.shopCountry && this.shopCountry.currLangName;\n            const currentShippingCountry = this.currentShippingCountry && this.currentShippingCountry.currLangName;\n\n            return this.$translate(\"Ceres::Template.basketExportDeliveryWarning\", { from: shopCountry, to: currentShippingCountry });\n        },\n\n        rrpCalc() {\n            // gross / brutto\n            let totalRrp = 0;\n            for (let basketItem of this.basketItems) {\n                let itemQuantity = basketItem.quantity;\n                let itemPriceNet = basketItem.variation.data.prices?.default?.price.value || 0;\n                let rrpNet = basketItem.variation.data.prices?.rrp?.price.value || 0;\n                if (rrpNet > itemPriceNet) {\n                    totalRrp += rrpNet * itemQuantity;\n                } else {\n                    totalRrp += itemPriceNet * itemQuantity;\n                }\n                // OrderProperties\n                for(let itemOrderProperty of basketItem.basketItemOrderParams)\n                {\n                    totalRrp += itemQuantity * itemOrderProperty.price;\n                }\n            }\n            return totalRrp;\n        },\n        rrpNetCalc() {\n            let totalRrpNet = 0;\n            for (let basketItem of this.basketItems) {\n                let itemQuantity = basketItem.quantity;\n                let itemPriceNet = basketItem.variation.data.prices.default?.data.priceNet || 0;\n                let rrpNet = basketItem.variation.data.prices.rrp?.data.priceNet || 0;\n                if (rrpNet > itemPriceNet) {\n                    totalRrpNet += rrpNet * itemQuantity;\n                } else {\n                    totalRrpNet += itemPriceNet * itemQuantity;\n                }\n                // OrderProperties\n                for(let itemOrderProperty of basketItem.basketItemOrderParams)\n                {\n                    totalRrpNet += (itemQuantity * itemOrderProperty.price) / 1.19; // @WARNING: HardCode VAT \n                }\n            }\n            return totalRrpNet;\n        },\n        youSave() {\n            let youSave = 0;\n            for (let basketItem of this.basketItems) {\n                let itemQuantity = basketItem.quantity;\n                let itemPrice = basketItem.price;\n                let rrp = basketItem.variation.data.prices?.rrp?.price.value || 0;\n                if (rrp > itemPrice) {\n                    youSave += (rrp - itemPrice) * itemQuantity;\n                }\n            }\n            return youSave;\n        },\n\n        ...mapState({\n            basket: state => state.basket.data,\n            basketItems: state => state.basket.items,\n            isBasketLoading: state => state.basket.isBasketLoading,\n            shippingCountries: state => state.localization.shippingCountries,\n            showNetPrices: state => state.basket.showNetPrices\n        })\n    },\n\n    methods: {\n        calculateBaseValue(value, percent)\n        {\n            return (value / (100 - percent)) * 100;\n        },\n\n        isVariationProperty(property)\n        {\n            return property.property.isOderProperty && App.useVariationOrderProperties;\n        },\n\n        isInBasketItemOrderParams(basketItem, property)\n        {\n            if (!property.property.isOderProperty && !App.useVariationOrderProperties)\n            {\n                return true;\n            }\n            return !!basketItem.basketItemOrderParams.find(param => Number(param.propertyId) === Number(property.propertyId));\n        },\n        \n        setPropertiesForTotals(newBasketItems)\n        {\n            this.displayedPropertiesWithoutTax = [];\n            this.displayedProperties = [];\n            for (const basketItem of newBasketItems)\n            {\n                basketItem.variation.data.properties?.forEach(property => {\n                    if(this.isInBasketItemOrderParams(basketItem, property) && \n                      (isAdditionalCosts(property) || (!hasVat(property) && App.useVariationOrderProperties )))\n                    {\n                        const existsIndisplayedProperties = this.displayedProperties.find(entry => entry.propertyId === property.propertyId)\n                        const existsIndisplayedPropertiesWithoutTax = this.displayedPropertiesWithoutTax.find(entry => entry.propertyId === property.propertyId)\n                        const existingProperty = existsIndisplayedProperties || existsIndisplayedPropertiesWithoutTax;\n\n                        // if new item gets added and its property already exist update quantity\n                        if (existingProperty) \n                        {\n                            existingProperty.quantity += basketItem.quantity\n                        }\n                        else\n                        {\n                            const newProperty = {\n                                propertyId: property.propertyId,\n                                name: property.property.names.name,\n                                quantity: basketItem.quantity,\n                                surcharge: this.$options.filters.propertySurcharge(basketItem.variation.data.properties, property.propertyId),\n                                vatId: property.property.vatId\n                            }\n                            !hasVat(property) ? this.displayedPropertiesWithoutTax.push(newProperty) : this.displayedProperties.push(newProperty);\n                        }\n                    }\n                });\n            }\n            this.displayedPropertiesWithoutTax.forEach((entry) => \n            {\n                entry.price = entry.quantity * entry.surcharge;\n            })\n            this.displayedProperties.forEach((entry) => \n            {\n                entry.price = entry.quantity * entry.surcharge;\n            })\n        }\n    }\n}\n</script>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"bkr-cc cmp cmp-totals basketTotals\",\n      class: { preview: _vm.$attrs.preview }\n    },\n    [\n      !_vm.$attrs.preview\n        ? _c(\"div\", { staticClass: \"h3\" }, [\n            _vm._v(_vm._s(_vm.$translate(\"Ceres::Template.basketSum\")))\n          ])\n        : _vm._e(),\n      _vm._v(\" \"),\n      !_vm.$attrs.preview\n        ? _c(\n            \"button\",\n            {\n              staticClass: \"btn btn-xs btn-default\",\n              attrs: { onclick: \"$('.net').slideToggle();\" }\n            },\n            [_vm._v(\"Details\")]\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        {\n          staticClass:\n            \"component-loading with-icon refreshing split-totals-height\",\n          class: { isLoading: _vm.isBasketLoading }\n        },\n        [\n          _c(\n            \"dl\",\n            [\n              _vm._t(\"before-item-sum\"),\n              _vm._v(\" \"),\n              _vm.visibleFields.includes(\"basketValueNet\")\n                ? [\n                    _c(\"div\", { staticClass: \"net\" }, [\n                      _c(\"dt\", [\n                        _vm._v(\n                          \"\\n                        \" +\n                            _vm._s(\n                              _vm.$translate(\"Ceres::Template.basketValue\")\n                            ) +\n                            \" (\" +\n                            _vm._s(\n                              _vm.$translate(\"Ceres::Template.basketNet\")\n                            ) +\n                            \")\\n                    \"\n                        )\n                      ]),\n                      _c(\"dd\", { staticClass: \"k1\" }, [\n                        _vm._v(\n                          \"\\n                        \" +\n                            _vm._s(\n                              _vm._f(\"currency\")(\n                                _vm.calculateBaseValue(\n                                  _vm.rrpNetCalc,\n                                  _vm.basket.basketRebate\n                                )\n                              )\n                            ) +\n                            \"\\n                    \"\n                        )\n                      ])\n                    ])\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.visibleFields.includes(\"basketValueGross\")\n                ? [\n                    _c(\"dt\", [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketValue\")\n                          ) +\n                          \" (\" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketGross\")\n                          ) +\n                          \")\\n                \"\n                      )\n                    ]),\n                    _c(\"dd\", { staticClass: \"k2\" }, [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm._f(\"currency\")(\n                              _vm.calculateBaseValue(\n                                _vm.rrpCalc,\n                                _vm.basket.basketRebate\n                              )\n                            )\n                          ) +\n                          \"\\n                \"\n                      )\n                    ])\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              (_vm.visibleFields.includes(\"additionalCosts\") ||\n                _vm.visibleFields.includes(\"basket.additional_costs\")) &&\n              _vm.displayedProperties.length\n                ? [\n                    _vm._l(_vm.displayedProperties, function(property) {\n                      return [\n                        _c(\n                          \"dt\",\n                          {\n                            key: \"property-name-\" + property.propertyId,\n                            staticClass: \"muted-properties\",\n                            class: { \"font-weight-bold\": _vm.showNetPrices },\n                            attrs: { \"data-testing\": \"additionalcost-with-tax\" }\n                          },\n                          [\n                            _vm._v(\"\\n                     \"),\n                            _c(\"i\", [_vm._v(\"davon \" + _vm._s(property.name))])\n                          ]\n                        ),\n                        _c(\n                          \"dd\",\n                          {\n                            key: \"property-price-\" + property.propertyId,\n                            staticClass: \"muted-properties k3\",\n                            class: { \"font-weight-bold\": _vm.showNetPrices }\n                          },\n                          [\n                            _c(\"i\", [\n                              _vm._v(_vm._s(_vm._f(\"currency\")(property.price)))\n                            ])\n                          ]\n                        )\n                      ]\n                    })\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.visibleFields.includes(\"rebate\") && _vm.basket.basketRebate\n                ? [\n                    _c(\"dt\", { staticClass: \"rebate-hint\" }, [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketRebate\")\n                          ) +\n                          \"\\n                \"\n                      )\n                    ]),\n                    !_vm.showNetPrices\n                      ? _c(\"dd\", { staticClass: \"k4 rebate-hint\" }, [\n                          _vm._v(\n                            \"\\n                    \" +\n                              _vm._s(\n                                _vm._f(\"currency\")(\n                                  _vm.calculateBaseValue(\n                                    _vm.basket.itemSum,\n                                    _vm.basket.basketRebate\n                                  ) - _vm.basket.itemSum\n                                )\n                              ) +\n                              \"\\n                \"\n                          )\n                        ])\n                      : _c(\"dd\", { staticClass: \"k5 rebate-hint\" }, [\n                          _vm._v(\n                            \"\\n                    \" +\n                              _vm._s(\n                                _vm._f(\"currency\")(\n                                  _vm.calculateBaseValue(\n                                    _vm.basket.itemSumNet,\n                                    _vm.basket.basketRebate\n                                  ) - _vm.basket.itemSumNet\n                                )\n                              ) +\n                              \"\\n                \"\n                          )\n                        ]),\n                    _vm._v(\" \"),\n                    _c(\"dt\", [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketSubTotal\")\n                          ) +\n                          \" (\" +\n                          _vm._s(_vm.$translate(\"Ceres::Template.basketNet\")) +\n                          \")\\n                \"\n                      )\n                    ]),\n                    _c(\"dd\", { staticClass: \"k6\" }, [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(_vm._f(\"currency\")(_vm.basket.itemSumNet)) +\n                          \"\\n                \"\n                      )\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"dt\", [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketSubTotal\")\n                          ) +\n                          \" (\" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketGross\")\n                          ) +\n                          \")\\n                \"\n                      )\n                    ]),\n                    _c(\"dd\", { staticClass: \"k7\" }, [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(_vm._f(\"currency\")(_vm.rrpCalc)) +\n                          \"\\n                \"\n                      )\n                    ])\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm._t(\"after-item-sum\"),\n              _vm._v(\" \"),\n              _vm._t(\"before-shipping-costs\"),\n              _vm._v(\" \"),\n              _vm.visibleFields.includes(\"shippingCostsNet\")\n                ? [\n                    _c(\"div\", { staticClass: \"net\" }, [\n                      _c(\"dt\", [\n                        _vm._v(\n                          \"\\n                    \" +\n                            _vm._s(\n                              _vm.$translate(\n                                \"Ceres::Template.basketShippingCosts\"\n                              )\n                            ) +\n                            \" (\" +\n                            _vm._s(\n                              _vm.$translate(\"Ceres::Template.basketNet\")\n                            ) +\n                            \")\\n                \"\n                        )\n                      ]),\n                      _c(\"dd\", { staticClass: \"k8\" }, [\n                        _vm._v(\n                          \"\\n                    \" +\n                            _vm._s(\n                              _vm._f(\"currency\")(_vm.basket.shippingAmountNet)\n                            ) +\n                            \"\\n                \"\n                        )\n                      ])\n                    ])\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.visibleFields.includes(\"shippingCostsGross\")\n                ? [\n                    _c(\"dt\", [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm.$translate(\n                              \"Ceres::Template.basketShippingCosts\"\n                            )\n                          ) +\n                          \" (\" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketGross\")\n                          ) +\n                          \")\\n                \"\n                      )\n                    ]),\n                    _c(\"dd\", { staticClass: \"k9\" }, [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm._f(\"currency\")(_vm.basket.shippingAmount)\n                          ) +\n                          \"\\n                \"\n                      )\n                    ])\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm._t(\"after-shipping-costs\"),\n              _vm._v(\" \"),\n              _vm.visibleFields.includes(\"promotionCoupon\") &&\n              _vm.basket.couponCode &&\n              _vm.basket.couponCampaignType === \"promotion\"\n                ? [\n                    _c(\"hr\"),\n                    _vm._v(\" \"),\n                    _c(\"dt\", [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.basketCoupon\")\n                          ) +\n                          \"\\n                \"\n                      )\n                    ]),\n                    _c(\"dd\", { staticClass: \"k10\" }, [\n                      _vm._v(\n                        \"\\n                    \" +\n                          _vm._s(\n                            _vm._f(\"currency\")(_vm.basket.couponDiscount)\n                          ) +\n                          \"\\n                \"\n                      )\n                    ])\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.youSave > 0\n                ? [\n                    !(\n                      _vm.visibleFields.includes(\"promotionCoupon\") &&\n                      _vm.basket.couponCode &&\n                      _vm.basket.couponCampaignType === \"promotion\"\n                    )\n                      ? _c(\"hr\")\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _c(\"dt\", [\n                      _vm._v(\n                        \"\\n                    Aktionsrabatt\\n                \"\n                      )\n                    ]),\n                    _c(\"dd\", { staticClass: \"k11\" }, [\n                      _vm._v(\n                        \"\\n                    - \" +\n                          _vm._s(_vm._f(\"currency\")(_vm.youSave)) +\n                          \"\\n                \"\n                      )\n                    ])\n                  ]\n                : _vm._e(),\n              _vm._v(\" \"),\n              _c(\n                \"div\",\n                { staticClass: \"net\" },\n                [\n                  _c(\"hr\"),\n                  _vm._v(\" \"),\n                  _vm._t(\"before-total-sum\"),\n                  _vm._v(\" \"),\n                  _vm.visibleFields.includes(\"totalSumNet\")\n                    ? [\n                        _c(\"dt\", [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm.$translate(\"Ceres::Template.basketTotalSum\")\n                              ) +\n                              \" (\" +\n                              _vm._s(\n                                _vm.$translate(\"Ceres::Template.basketNet\")\n                              ) +\n                              \")\\n                    \"\n                          )\n                        ]),\n                        _c(\"dd\", { staticClass: \"k12\" }, [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm._f(\"currency\")(_vm.basket.basketAmountNet)\n                              ) +\n                              \"\\n                    \"\n                          )\n                        ])\n                      ]\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm._t(\"before-vat\"),\n                  _vm._v(\" \"),\n                  _vm._l(_vm.basket.totalVats, function(totalVat) {\n                    return _vm.visibleFields.includes(\"vats\")\n                      ? _c(\"div\", { staticClass: \"vatTotals\" }, [\n                          _c(\"dt\", [\n                            _vm._v(\n                              \"\\n                        \" +\n                                _vm._s(\n                                  _vm.$translate(\"Ceres::Template.basketVAT\")\n                                ) +\n                                \" \" +\n                                _vm._s(totalVat.vatValue) +\n                                \"%\\n                    \"\n                            )\n                          ]),\n                          _c(\"dd\", { staticClass: \"k13\" }, [\n                            _vm._v(\n                              \"\\n                        \" +\n                                _vm._s(_vm._f(\"currency\")(totalVat.vatAmount)) +\n                                \"\\n                    \"\n                            )\n                          ])\n                        ])\n                      : _vm._e()\n                  })\n                ],\n                2\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"div\",\n                { staticClass: \"totalSum\" },\n                [\n                  _c(\"hr\"),\n                  _vm._v(\" \"),\n                  _vm.visibleFields.includes(\"totalSumGross\")\n                    ? [\n                        _c(\"dt\", [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm.$translate(\"Ceres::Template.basketTotalSum\")\n                              ) +\n                              \" (\" +\n                              _vm._s(\n                                _vm.$translate(\"Ceres::Template.basketGross\")\n                              ) +\n                              \")\\n                    \"\n                          )\n                        ]),\n                        _c(\"dd\", { staticClass: \"k14\" }, [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm._f(\"currency\")(_vm.basket.basketAmount)\n                              ) +\n                              \"\\n                    \"\n                          )\n                        ])\n                      ]\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.visibleFields.includes(\"salesCoupon\") &&\n                  _vm.basket.couponCode &&\n                  _vm.basket.couponCampaignType === \"sales\"\n                    ? [\n                        _c(\"dt\", [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm.$translate(\"Ceres::Template.basketCoupon\")\n                              ) +\n                              \"\\n                    \"\n                          )\n                        ]),\n                        _c(\"dd\", { staticClass: \"k15\" }, [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm._f(\"currency\")(_vm.basket.couponDiscount)\n                              ) +\n                              \"\\n                    \"\n                          )\n                        ])\n                      ]\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.visibleFields.includes(\"openAmount\") &&\n                  _vm.basket.couponCampaignType === \"sales\"\n                    ? [\n                        _c(\"dt\", [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm.$translate(\n                                  \"Ceres::Template.basketOpenAmount\"\n                                )\n                              ) +\n                              \"\\n                    \"\n                          )\n                        ]),\n                        _c(\"dd\", { staticClass: \"k16\" }, [\n                          _vm._v(\n                            \"\\n                        \" +\n                              _vm._s(\n                                _vm._f(\"currency\")(_vm.basket.openAmount)\n                              ) +\n                              \"\\n                    \"\n                          )\n                        ])\n                      ]\n                    : _vm._e()\n                ],\n                2\n              ),\n              _vm._v(\" \"),\n              _vm._t(\"after-total-sum\")\n            ],\n            2\n          )\n        ]\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./BasketTotals.vue?vue&type=template&id=3765131c&\"\nimport script from \"./BasketTotals.vue?vue&type=script&lang=js&\"\nexport * from \"./BasketTotals.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/schweser/GitHub/plentyDevTool/17831/40/Ceres/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3765131c')) {\n      api.createRecord('3765131c', component.options)\n    } else {\n      api.reload('3765131c', component.options)\n    }\n    module.hot.accept(\"./BasketTotals.vue?vue&type=template&id=3765131c&\", function () {\n      api.rerender('3765131c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/app/components/basket/BasketTotals.vue\"\nexport default component.exports","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasketTotals.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasketTotals.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BasketTotals.vue?vue&type=template&id=3765131c&\""],"sourceRoot":""}