(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{317:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s(6),s(12),s(13),s(42),s(111),s(61),s(8),s(31),s(4),s(59),s(10),s(9);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=["btn-sm","btn-lg"],n={sm:"btn-sm",md:"",lg:"btn-lg"},i={props:{buttonSize:{type:[String,null],default:null,validator:function(t){return-1!==[""].concat(o,a(Object.keys(n))).indexOf(t)}}},computed:{buttonSizeClass:function(){return n.hasOwnProperty(this.buttonSize)?n[this.buttonSize]:this.buttonSize}}}},373:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-pwd-reset"},[s("form",{attrs:{id:"login-form-"+t._uid,method:"post"}},[s("div",{class:{"modal-body":t.modalElement}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"input-unit",attrs:{"data-validate":"mail"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"email",name:"email",autocomplete:"email",id:"email"+t._uid,"data-autofocus":""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"email"+t._uid}},[t._v(t._s(t.$translate("Ceres::Template.loginEmail"))+"*")])]),t._v(" "),s("span",{staticClass:"error-msg"},[t._v(t._s(t.$translate("Ceres::Template.loginEnterConfirmEmail")))])]),t._v(" "),s("div",{staticClass:"col-12"},[s("div",{staticClass:"input-unit",class:{"no-bottom":t.modalElement},attrs:{"data-validate":"text"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",name:"password",autocomplete:"current-password",id:"password"+t._uid},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"password"+t._uid}},[t._v(t._s(t.$translate("Ceres::Template.loginPassword"))+"*")])]),t._v(" "),s("span",{staticClass:"error-msg"},[t._v(t._s(t.$translate("Ceres::Template.loginEmptyPassword")))])])])]),t._v(" "),s("div",{class:{"modal-footer justify-content-between":t.modalElement,row:!t.modalElement}},[s("div",{class:{"col-7 col-sm-4":!t.modalElement}},[s("a",{staticClass:"small text-appearance",attrs:{href:"javascript:void(0)"},on:{click:t.showResetPwdView}},[t._v(t._s(t.$translate("Ceres::Template.loginForgotPassword"))+"?")])]),t._v(" "),s("div",{class:{"col-5 col-sm-8 text-sm-right":!t.modalElement}},[t._t("extend-overlay-buttons"),t._v(" "),s("button",{staticClass:"btn btn-primary btn-appearance btn-medium",class:[{"float-right":!t.modalElement},t.buttonSizeClass],attrs:{disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.validateLogin(e)}}},[t._v("\n                    "+t._s(t.$translate("Ceres::Template.login"))+"\n                    "),s("icon",{attrs:{icon:"user",loading:t.isDisabled}})],1)],2)])])])};a._withStripped=!0;s(20),s(21);var o=s(317),n=s(7),i=s(19),r=s(114),l=s(216),d=s(38),u={mixins:[o.a],props:{backlink:{type:String},modalElement:{type:String},hasToForward:{type:Boolean,default:!1}},data:function(){return{password:"",username:"",loginFields:[],isDisabled:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.loginFields=document.querySelector("#login-form-"+t._uid).querySelectorAll(".input-unit"),l.default.triggerAutoFocus()}))},watch:{password:function(t,e){this.resetError()},username:function(t,e){this.resetError()}},methods:{showLogin:function(){r.default.findModal(document.getElementById(this.modalElement)).show()},validateLogin:function(){var t=this;d.default.validate($("#login-form-"+this._uid)).done((function(){t.sendLogin()})).fail((function(t){d.default.markInvalidFields(t,"error")}))},sendLogin:function(){var t=this;this.isDisabled=!0,n.default.post("/rest/io/customer/login",{email:this.username,password:this.password},{supressNotifications:!0}).done((function(e){n.default.setToken(e),i.default.success(t.$translate("Ceres::Template.loginSuccessful")).closeAfter(1e4),null!==t.backlink&&t.backlink?location.assign(decodeURIComponent(t.backlink)):t.hasToForward?location.assign(location.origin):location.reload()})).fail((function(e){switch(t.isDisabled=!1,e.error.code){case 401:t.loginFields.forEach((function(t){return t.classList.add("has-login-error")}));var s="Ceres::Template.loginFailed";e.error.message.length>0&&"user is blocked"===e.error.message&&(s="Ceres::Template.loginBlocked"),i.default.error(t.$translate(s)).closeAfter(1e4);break;default:return}}))},showResetPwdView:function(){this.resetError(),this.$store.dispatch("loadComponent","forgot-password-modal"),this.modalElement?r.default.findModal(document.getElementById(this.modalElement)).hide().then((function(){r.default.findModal(document.getElementById("resetPwd")).show()})):r.default.findModal(document.getElementById("resetPwd")).show()},resetError:function(){this.loginFields.forEach((function(t){return t.classList.remove("has-login-error")})),d.default.unmarkAllFields("#login-form-"+this._uid)}}},c=s(11),m=Object(c.a)(u,a,[],!1,null,null,null);m.options.__file="resources/js/src/app/components/customer/login/Login.vue";e.default=m.exports}}]);
//# sourceMappingURL=ceres-12.min.js.map