(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{333:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a(54),a(37),a(28),a(7),a(14),a(4),a(15),a(10),a(8),a(11),a(22),a(16),a(13);function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var s=["btn-sm","btn-lg"],n={sm:"btn-sm",md:"",lg:"btn-lg"},l={props:{buttonSize:{type:[String,null],default:null,validator:function(e){return-1!==[""].concat(s,i(Object.keys(n))).indexOf(e)}}},computed:{buttonSizeClass:function(){return n.hasOwnProperty(this.buttonSize)?n[this.buttonSize]:this.buttonSize}}}},400:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{ref:"newsletterForm",attrs:{id:"newsletter-input-form_"+e._uid,method:"post"},on:{submit:function(t){return t.preventDefault(),e.validateData(t)}}},[a("div",{staticClass:"row"},[e.showNameInputs?a("div",{staticClass:"col-6"},[a("div",{staticClass:"input-unit",attrs:{"data-validate":"!regex"}},[a("label",{attrs:{for:"first-name-input_"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.newsletterFirstName")))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],attrs:{type:"text","data-validate-ref":"/[.:\\/\\d]/g",id:"first-name-input_"+e._uid,"data-testing":"nl-first-name"},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}})])]):e._e(),e._v(" "),e.showNameInputs?a("div",{staticClass:"col-6 pl-0"},[a("div",{staticClass:"input-unit",attrs:{"data-validate":"!regex"}},[a("label",{attrs:{for:"last-name-input_"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.newsletterLastName")))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],attrs:{type:"text","data-validate-ref":"/[.:\\/\\d]/g",id:"last-name-input_"+e._uid,"data-testing":"nl-last-name"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}})])]):e._e(),e._v(" "),a("div",{staticClass:"col-12"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-unit",attrs:{"data-validate":"mail"}},[a("label",{attrs:{for:"email-input-id_"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.newsletterEmail"))+" "+e._s(e.$translate("Ceres::Template.newsletterIsRequiredFootnote")))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"email",autocomplete:"email",id:"email-input-id_"+e._uid,"data-testing":"nl-mail"},domProps:{value:e.email},on:{focus:function(t){e.loadRecaptcha=!0},input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"honey",attrs:{autocomplete:"none",type:"text",name:"username",tabindex:"-1"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}})])]),e._v(" "),e.showPrivacyPolicyCheckbox?a("div",{staticClass:"col-12"},[a("div",{staticClass:"form-check small",attrs:{"data-validate":""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.privacyPolicyValue,expression:"privacyPolicyValue"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"privacy-policy-accept-id_"+e._uid,name:"privacy-policy-accept","data-testing":"nl-policy"},domProps:{checked:Array.isArray(e.privacyPolicyValue)?e._i(e.privacyPolicyValue,null)>-1:e.privacyPolicyValue},on:{change:function(t){var a=e.privacyPolicyValue,i=t.target,r=!!i.checked;if(Array.isArray(a)){var s=e._i(a,null);i.checked?s<0&&(e.privacyPolicyValue=a.concat([null])):s>-1&&(e.privacyPolicyValue=a.slice(0,s).concat(a.slice(s+1)))}else e.privacyPolicyValue=r}}}),e._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"privacy-policy-accept-id_"+e._uid},domProps:{innerHTML:e._s(e.privacyPolicyText)}})])]):e._e(),e._v(" "),a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-block btn-primary btn-appearance",class:e.buttonSizeClass,attrs:{type:"button",disabled:e.isDisabled,"data-testing":"nl-send"},on:{click:e.validateData}},[a("icon",{attrs:{icon:"paper-plane-o",loading:e.isDisabled}}),e._v("\n                    "+e._s(e.$translate("Ceres::Template.newsletterSubscribeButtonLabel"))+"\n                ")],1)])]),e._v(" "),a("div",{staticClass:"col-12 text-right small mt-2"},[e._v(e._s(e.$translate("Ceres::Template.newsletterIsRequiredFootnote"))+" "+e._s(e.$translate("Ceres::Template.newsletterIsRequired")))])]),e._v(" "),e.$ceres.config.global.googleRecaptchaApiKey&&e.loadRecaptcha?a("recaptcha"):e._e()],1)};i._withStripped=!0;a(34),a(17),a(46),a(5),a(13);var r=a(6),s=a(12),n=a(38),l=a(153),o={mixins:[a(333).a],props:{showNameInputs:{type:Boolean,default:!1},showPrivacyPolicyCheckbox:{type:Boolean,default:!0},emailFolder:{type:Number,default:0}},data:function(){return{firstName:"",lastName:"",email:"",isDisabled:!1,privacyPolicyValue:!1,honeypot:"",loadRecaptcha:!1}},computed:{privacyPolicyText:function(){var e='<a href="'+App.urls.privacyPolicy+'" target="_blank"><span class="text-primary text-appearance">'+this.$translate("Ceres::Template.checkoutPrivacyPolicy",{hyphen:"&shy;"})+"</span></a>";return this.$translate("Ceres::Template.newsletterAcceptPrivacyPolicy",{policy:e})+this.$translate("Ceres::Template.newsletterIsRequiredFootnote")}},methods:{validateData:function(){var e=this;this.isDisabled=!0,n.default.validate($("#newsletter-input-form_"+this._uid)).done((function(){e.save()})).fail((function(t){n.default.markInvalidFields(t,"error"),t.filter((function(e){return null!==e.dataset.validate})).map((function(e){return{type:e.dataset.validate,name:e.innerText}})).forEach((function(t){"!regex"===t.type&&s.default.error(e.$translate("Ceres::Template.newsletterNotAllowedCharacters",{name:t.name}))})),e.isDisabled=!1}))},save:function(){var e=this,t=this.$el.querySelector("[data-recaptcha]");if(App.config.global.googleRecaptchaApiKey&&(!window.grecaptcha||!t))return s.default.error(this.$translate("Ceres::Template.newsletterAcceptRecaptchaCookie")),void(this.isDisabled=!1);Object(l.a)(this.$el).then((function(t){r.default.post("/rest/io/customer/newsletter",{email:e.email,firstName:e.firstName,lastName:e.lastName,emailFolder:e.emailFolder,honeypot:e.honeypot,recaptcha:t}).done((function(t){t.containsHoneypot?s.default.warn(e.$translate("Ceres::Template.newsletterHoneypotWarning")):s.default.success(e.$translate("Ceres::Template.newsletterSuccessMessage")).closeAfter(3e3),e.resetInputs()})).fail((function(){s.default.error(e.$translate("Ceres::Template.newsletterErrorMessage")).closeAfter(5e3)})).always((function(){e.isDisabled=!1,e.resetRecaptcha()}))}))},resetInputs:function(){this.firstName="",this.lastName="",this.email="",this.privacyPolicyValue=!1},resetRecaptcha:function(){if(2===App.config.global.googleRecaptchaVersion&&window.grecaptcha){var e=this.$el.querySelector("[data-recaptcha]");window.grecaptcha.reset(e)}}}},c=a(3),u=Object(c.a)(o,i,[],!1,null,null,null);u.options.__file="resources/js/src/app/components/newsletter/NewsletterInput.vue";t.default=u.exports}}]);
//# sourceMappingURL=ceres-12.min.js.map