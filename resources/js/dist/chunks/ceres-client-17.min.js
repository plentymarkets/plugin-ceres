(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{364:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bkr-cc cmp cmp-totals basketTotals",class:{preview:t.$attrs.preview}},[t.$attrs.preview?t._e():s("div",{staticClass:"h3"},[t._v(t._s(t.$translate("Ceres::Template.basketSum")))]),t._v(" "),t.$attrs.preview?t._e():s("button",{staticClass:"btn btn-xs btn-default",attrs:{onclick:"$('.net').slideToggle();"}},[t._v("Details")]),t._v(" "),s("div",{staticClass:"component-loading with-icon refreshing split-totals-height",class:{isLoading:t.isBasketLoading}},[s("dl",[t._t("before-item-sum"),t._v(" "),t.visibleFields.includes("basketValueNet")?[s("div",{staticClass:"net"},[s("dt",[t._v("\n                        "+t._s(t.$translate("Ceres::Template.basketValue"))+" ("+t._s(t.$translate("Ceres::Template.basketNet"))+")\n                    ")]),s("dd",{staticClass:"k1"},[t._v("\n                        "+t._s(t._f("currency")(t.calculateBaseValue(t.basket.itemSumNet,t.basket.basketRebate)))+"\n                    ")])])]:t._e(),t._v(" "),t.visibleFields.includes("basketValueGross")?[s("dt",[t._v("\n                    "+t._s(t.$translate("Ceres::Template.basketValue"))+" ("+t._s(t.$translate("Ceres::Template.basketGross"))+")\n                ")]),s("dd",{staticClass:"k2"},[t._v("\n                    "+t._s(t._f("currency")(t.calculateBaseValue(t.rrpCalc,t.basket.basketRebate)))+"\n                ")])]:t._e(),t._v(" "),(t.visibleFields.includes("additionalCosts")||t.visibleFields.includes("basket.additional_costs"))&&t.displayedProperties.length?[t._l(t.displayedProperties,(function(e){return[s("dt",{key:"property-name-"+e.propertyId,staticClass:"muted-properties",class:{"font-weight-bold":t.showNetPrices},attrs:{"data-testing":"additionalcost-with-tax"}},[t._v("\n                    Â "),s("i",[t._v("davon "+t._s(e.name))])]),s("dd",{key:"property-price-"+e.propertyId,staticClass:"muted-properties k3",class:{"font-weight-bold":t.showNetPrices}},[s("i",[t._v(t._s(t._f("currency")(e.price)))])])]}))]:t._e(),t._v(" "),t.visibleFields.includes("rebate")&&t.basket.basketRebate?[s("dt",{staticClass:"rebate-hint"},[t._v("\n                    "+t._s(t.$translate("Ceres::Template.basketRebate"))+"\n                ")]),t.showNetPrices?s("dd",{staticClass:"k5 rebate-hint"},[t._v("\n                    "+t._s(t._f("currency")(t.calculateBaseValue(t.basket.itemSumNet,t.basket.basketRebate)-t.basket.itemSumNet))+"\n                ")]):s("dd",{staticClass:"k4 rebate-hint"},[t._v("\n                    "+t._s(t._f("currency")(t.calculateBaseValue(t.basket.itemSum,t.basket.basketRebate)-t.basket.itemSum))+"\n                ")]),t._v(" "),s("dt",[t._v("\n                    "+t._s(t.$translate("Ceres::Template.basketSubTotal"))+" ("+t._s(t.$translate("Ceres::Template.basketNet"))+")\n                ")]),s("dd",{staticClass:"k6"},[t._v("\n                    "+t._s(t._f("currency")(t.basket.itemSumNet))+"\n                ")]),t._v(" "),s("dt",[t._v("\n                    "+t._s(t.$translate("Ceres::Template.basketSubTotal"))+" ("+t._s(t.$translate("Ceres::Template.basketGross"))+")\n                ")]),s("dd",{staticClass:"k7"},[t._v("\n                    "+t._s(t._f("currency")(t.rrpCalc))+"\n                ")])]:t._e(),t._v(" "),t._t("after-item-sum"),t._v(" "),t._t("before-shipping-costs"),t._v(" "),t.visibleFields.includes("shippingCostsNet")?[s("div",{staticClass:"net"},[s("dt",[t._v("\n                    "+t._s(t.$translate("Ceres::Template.basketShippingCosts"))+" ("+t._s(t.$translate("Ceres::Template.basketNet"))+")\n                ")]),s("dd",{staticClass:"k8"},[t._v("\n                    "+t._s(t._f("currency")(t.basket.shippingAmountNet))+"\n                ")])])]:t._e(),t._v(" "),t.visibleFields.includes("shippingCostsGross")?[s("dt",[t._v("\n                    "+t._s(t.$translate("Ceres::Template.basketShippingCosts"))+" ("+t._s(t.$translate("Ceres::Template.basketGross"))+")\n                ")]),s("dd",{staticClass:"k9"},[t._v("\n                    "+t._s(t._f("currency")(t.basket.shippingAmount))+"\n                ")])]:t._e(),t._v(" "),t._t("after-shipping-costs"),t._v(" "),t.visibleFields.includes("promotionCoupon")&&t.basket.couponCode&&"promotion"===t.basket.couponCampaignType?[s("hr"),t._v(" "),s("dt",[t._v("\n                    "+t._s(t.$translate("Ceres::Template.basketCoupon"))+"\n                ")]),s("dd",{staticClass:"k10"},[t._v("\n                    "+t._s(t._f("currency")(t.basket.couponDiscount))+"\n                ")])]:t._e(),t._v(" "),t.youSave>0?[t.visibleFields.includes("promotionCoupon")&&t.basket.couponCode&&"promotion"===t.basket.couponCampaignType?t._e():s("hr"),t._v(" "),s("dt",[t._v("\n                    Aktionsrabatt\n                ")]),s("dd",{staticClass:"k11"},[t._v("\n                    - "+t._s(t._f("currency")(t.youSave))+"\n                ")])]:t._e(),t._v(" "),s("div",{staticClass:"net"},[s("hr"),t._v(" "),t._t("before-total-sum"),t._v(" "),t.visibleFields.includes("totalSumNet")?[s("dt",[t._v("\n                        "+t._s(t.$translate("Ceres::Template.basketTotalSum"))+" ("+t._s(t.$translate("Ceres::Template.basketNet"))+")\n                    ")]),s("dd",{staticClass:"k12"},[t._v("\n                        "+t._s(t._f("currency")(t.basket.basketAmountNet))+"\n                    ")])]:t._e(),t._v(" "),t._t("before-vat"),t._v(" "),t._l(t.basket.totalVats,(function(e){return t.visibleFields.includes("vats")?s("div",{staticClass:"vatTotals"},[s("dt",[t._v("\n                        "+t._s(t.$translate("Ceres::Template.basketVAT"))+" "+t._s(e.vatValue)+"%\n                    ")]),s("dd",{staticClass:"k13"},[t._v("\n                        "+t._s(t._f("currency")(e.vatAmount))+"\n                    ")])]):t._e()}))],2),t._v(" "),s("div",{staticClass:"totalSum"},[s("hr"),t._v(" "),t.visibleFields.includes("totalSumGross")?[s("dt",[t._v("\n                        "+t._s(t.$translate("Ceres::Template.basketTotalSum"))+" ("+t._s(t.$translate("Ceres::Template.basketGross"))+")\n                    ")]),s("dd",{staticClass:"k14"},[t._v("\n                        "+t._s(t._f("currency")(t.basket.basketAmount))+"\n                    ")])]:t._e(),t._v(" "),t.visibleFields.includes("salesCoupon")&&t.basket.couponCode&&"sales"===t.basket.couponCampaignType?[s("dt",[t._v("\n                        "+t._s(t.$translate("Ceres::Template.basketCoupon"))+"\n                    ")]),s("dd",{staticClass:"k15"},[t._v("\n                        "+t._s(t._f("currency")(t.basket.couponDiscount))+"\n                    ")])]:t._e(),t._v(" "),t.visibleFields.includes("openAmount")&&"sales"===t.basket.couponCampaignType?[s("dt",[t._v("\n                        "+t._s(t.$translate("Ceres::Template.basketOpenAmount"))+"\n                    ")]),s("dd",{staticClass:"k16"},[t._v("\n                        "+t._s(t._f("currency")(t.basket.openAmount))+"\n                    ")])]:t._e()],2),t._v(" "),t._t("after-total-sum")],2)])])};r._withStripped=!0;s(24),s(41),s(13),s(8),s(27),s(6),s(3),s(47),s(48),s(19),s(4),s(21),s(10),s(17),s(18),s(9),s(11);var a=s(26),n=s(96);function i(t,e){var s;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(s=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,l=!1;return{s:function(){s=t[Symbol.iterator]()},n:function(){var t=s.next();return i=t.done,t},e:function(t){l=!0,n=t},f:function(){try{i||null==s.return||s.return()}finally{if(l)throw n}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,r=new Array(e);s<e;s++)r[s]=t[s];return r}function l(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var p={name:"basket-totals",data:function(){return{displayedProperties:[],displayedPropertiesWithoutTax:[]}},created:function(){this.setPropertiesForTotals(this.basketItems)},watch:{basketItems:{deep:!0,handler:function(t){this.setPropertiesForTotals(t)}}},props:{visibleFields:{type:Array,default:function(){return["basketValueNet","basketValueGross","rebate","shippingCostsNet","shippingCostsGross","promotionCoupon","totalSumNet","vats","additionalCosts","totalSumGross","salesCoupon","openAmount","subAmount"]}}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?l(Object(s),!0).forEach((function(e){u(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({currentShippingCountry:function(){var t=this.basket.shippingCountryId;return this.shippingCountries.find((function(e){return e.id===t}))},shopCountry:function(){var t=this.basket.shopCountryId;return this.shippingCountries.find((function(e){return e.id===t}))},deliveryExportTranslation:function(){var t=this.shopCountry&&this.shopCountry.currLangName,e=this.currentShippingCountry&&this.currentShippingCountry.currLangName;return this.$translate("Ceres::Template.basketExportDeliveryWarning",{from:t,to:e})},rrpCalc:function(){return this.basket.itemSum+this.youSave},youSave:function(){var t,e=0,s=i(this.basketItems);try{for(s.s();!(t=s.n()).done;){var r=t.value,a=r.quantity,n=r.price,o=r.variation.data.prices.rrp.price.value||0;o>n&&(e+=(o-n)*a)}}catch(t){s.e(t)}finally{s.f()}return e}},Object(a.e)({basket:function(t){return t.basket.data},basketItems:function(t){return t.basket.items},isBasketLoading:function(t){return t.basket.isBasketLoading},shippingCountries:function(t){return t.localization.shippingCountries},showNetPrices:function(t){return t.basket.showNetPrices}})),methods:{calculateBaseValue:function(t,e){return t/(100-e)*100},isVariationProperty:function(t){return t.property.isOderProperty&&App.useVariationOrderProperties},isInBasketItemOrderParams:function(t,e){return!e.property.isOderProperty&&!App.useVariationOrderProperties||!!t.basketItemOrderParams.find((function(t){return Number(t.propertyId)===Number(e.propertyId)}))},setPropertiesForTotals:function(t){var e=this;this.displayedPropertiesWithoutTax=[],this.displayedProperties=[];var s,r=i(t);try{var a=function(){var t,r=s.value;null===(t=r.variation.data.properties)||void 0===t||t.forEach((function(t){if(e.isInBasketItemOrderParams(r,t)&&(Object(n.b)(t)||!Object(n.a)(t)&&App.useVariationOrderProperties)){var s=e.displayedProperties.find((function(e){return e.propertyId===t.propertyId})),a=e.displayedPropertiesWithoutTax.find((function(e){return e.propertyId===t.propertyId})),i=s||a;if(i)i.quantity+=r.quantity;else{var o={propertyId:t.propertyId,name:t.property.names.name,quantity:r.quantity,surcharge:e.$options.filters.propertySurcharge(r.variation.data.properties,t.propertyId),vatId:t.property.vatId};Object(n.a)(t)?e.displayedProperties.push(o):e.displayedPropertiesWithoutTax.push(o)}}}))};for(r.s();!(s=r.n()).done;)a()}catch(t){r.e(t)}finally{r.f()}this.displayedPropertiesWithoutTax.forEach((function(t){t.price=t.quantity*t.surcharge})),this.displayedProperties.forEach((function(t){t.price=t.quantity*t.surcharge}))}}},c=s(2),d=Object(c.a)(p,r,[],!1,null,null,null);d.options.__file="resources/js/src/app/components/basket/BasketTotals.vue";e.default=d.exports}}]);
//# sourceMappingURL=ceres-client-17.min.js.map