{"version":3,"sources":["webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?55b3","webpack:///resources/js/src/app/components/item/ItemImageCarousel.vue","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue?a015","webpack:///./resources/js/src/app/components/item/ItemImageCarousel.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","itemscope","itemtype","ref","id","_l","singleImages","image","class","largeVideoThumb","position","href","url","_uid","alt","getAltText","title","getImageName","thumb","_v","showThumbs","carouselImages","imagePreview","idx","on","click","$event","goTo","active","currentItem","videoButton","_e","_withStripped","component","options","__file"],"mappings":"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","file":"chunks/ceres-37.min.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"bkr-cc\",\n      attrs: { itemscope: \"\", itemtype: \"http://schema.org/Thing\" }\n    },\n    [\n      _c(\n        \"div\",\n        {\n          ref: \"single\",\n          staticClass:\n            \"bkr-cc single-carousel owl-carousel owl-theme owl-single-item mt-0\",\n          attrs: { id: \"imageGallery\" }\n        },\n        _vm._l(_vm.singleImages, function(image) {\n          return _c(\"div\", { staticClass: \"prop-1-1 slide-owl-wrap\" }, [\n            _c(\n              \"a\",\n              {\n                class: { largeVideoThumb: image.position < 0 },\n                attrs: {\n                  href: image.url,\n                  \"data-fancybox\": \"single-item-image\" + _vm._uid\n                }\n              },\n              [\n                image.position >= 0\n                  ? _c(\"img\", {\n                      staticClass: \"owl-lazy\",\n                      attrs: {\n                        \"data-src\": image.url,\n                        alt: _vm.getAltText(image),\n                        title: _vm.getImageName(image)\n                      }\n                    })\n                  : _c(\"img\", {\n                      staticClass: \"owl-lazy\",\n                      attrs: { \"data-src\": image.thumb, alt: \"Video abspielen\" }\n                    })\n              ]\n            )\n          ])\n        }),\n        0\n      ),\n      _vm._v(\" \"),\n      _vm.showThumbs\n        ? _c(\n            \"div\",\n            {\n              ref: \"thumbs\",\n              staticClass: \"owl-thumbs owl-carousel owl-theme owl-single-item\",\n              attrs: { id: \"thumb-carousel\" }\n            },\n            _vm._l(_vm.carouselImages, function(imagePreview, idx) {\n              return _c(\"div\", { staticClass: \"prop-1-1\" }, [\n                _c(\n                  \"div\",\n                  {\n                    staticClass: \"image-container\",\n                    on: {\n                      click: function($event) {\n                        return _vm.goTo(idx)\n                      }\n                    }\n                  },\n                  [\n                    _c(\"lazy-img\", {\n                      class: {\n                        active: _vm.currentItem === idx,\n                        videoButton: imagePreview.position < 0\n                      },\n                      attrs: {\n                        \"picture-class\": imagePreview.class,\n                        \"image-url\": imagePreview.url,\n                        alt: _vm.getAltText(imagePreview),\n                        title: _vm.getImageName(imagePreview)\n                      }\n                    })\n                  ],\n                  1\n                )\n              ])\n            }),\n            0\n          )\n        : _vm._e()\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n    <div itemscope itemtype=\"http://schema.org/Thing\" class=\"bkr-cc\">\n        <div class=\"bkr-cc single-carousel owl-carousel owl-theme owl-single-item mt-0\" id=\"imageGallery\" ref=\"single\">\n            <div v-for=\"image in singleImages\" class=\"prop-1-1 slide-owl-wrap\">\n                <a :href=\"image.url\" :data-fancybox=\"'single-item-image' + _uid\" :class=\"{'largeVideoThumb': image.position < 0}\">\n                    <img class=\"owl-lazy\" v-if=\"image.position >= 0\" :data-src=\"image.url\" :alt=\"getAltText(image)\" :title=\"getImageName(image) \" />\n                    <img class=\"owl-lazy\" v-else :data-src=\"image.thumb\" alt=\"Video abspielen\" />\n                </a>\n            </div>\n        </div>\n        <div v-if=\"showThumbs\" id=\"thumb-carousel\" class=\"owl-thumbs owl-carousel owl-theme owl-single-item\" ref=\"thumbs\">\n            <div class=\"prop-1-1\" v-for=\"(imagePreview, idx) in carouselImages\">\n                <div class=\"image-container\" @click=\"goTo(idx)\">\n                    <lazy-img :picture-class=\"imagePreview.class\"\n                        v-bind:class=\"{ 'active': currentItem === idx, 'videoButton': imagePreview.position < 0 }\" :image-url=\"imagePreview.url\"\n                        :alt=\"getAltText(imagePreview)\" :title=\"getImageName(imagePreview)\">\n                    </lazy-img>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { isNullOrUndefined } from \"../../helper/utils\";\n\nexport default {\n    name: \"item-image-carousel\",\n\n    props: {\n        maxQuantity:\n        {\n            type: Number,\n            default: 10\n        },\n        videoCarouselPosition:\n        {\n            type: Number,\n            default: 1\n        },\n        imageUrlAccessor:\n        {\n            type: String,\n            default: \"url\"\n        },\n        showThumbs:\n        {\n            type: Boolean,\n            default: true\n        },\n        showDots:\n        {\n            type: Boolean,\n            default: true\n        },\n        animationStyle:\n        {\n            type: String,\n            default: \"standard\"\n        },\n        pluginPath:\n        {\n            type: String,\n            default: \"\"\n        }\n    },\n\n    inject: {\n        itemId: {\n            default: null\n        }\n    },\n\n    data()\n    {\n        return {\n            currentItem: 0,\n            initialized: false\n        };\n    },\n\n    computed:\n    {\n        currentVariation()\n        {\n            return this.$store.getters[`${this.itemId}/currentItemVariation`]\n        },\n\n        youtubeVideoIds() \n        {\n            let videoIdString = \"\";\n            if (isNullOrUndefined(this.currentVariation.variationProperties))\n                return [];\n\n            for (const property of this.currentVariation.variationProperties) {\n                for (const prop of property.properties) {\n                    if (prop.id === 192)\n                        videoIdString = prop.values.value.trim();\n                }\n            }\n\n            return videoIdString.split(\",\").map(item => item.trim()).filter(item => item !== \"\");\n        },\n\n        carouselImages()\n        {\n            const carouselImages =  this.$options.filters.itemImages(\n                    this.currentVariation.images,\n                    \"urlPreview\"\n                ).slice(0, this.maxQuantity);\n\n\n            const carouselVideos = [];\n            if (this.videoThumbUrl && this.youtubeVideoIds.length > 0) {\n                let i = -1;\n                for (let id of this.youtubeVideoIds)\n                {\n                    const videoBtn = {\n                        url: 'https://img.youtube.com/vi/'+ id +'/mqdefault.jpg',\n                        class: 'owl-thumb border-appearance videoButton',\n                        alternate: 'Video abspielen',\n                        position: i,\n                        name: ''\n                    };\n                    carouselVideos.push(videoBtn);\n                    i--;\n                }\n            }\n            \n            // Insert on the n-th position\n            carouselImages.splice(this.videoCarouselPosition, 0, ...carouselVideos);\n\n            return carouselImages;\n        },\n\n        singleImages()\n        {\n            let images = this.$options.filters.itemImages(\n                    this.currentVariation.images,\n                    this.imageUrlAccessor\n            ).slice(0, this.maxQuantity);\n\n            let videos = [];\n            if (this.videoThumbUrl && this.youtubeVideoIds.length > 0) {\n                let i = -1;\n                for (let id of this.youtubeVideoIds) {\n                    const videoBtn = {\n                        url: 'https://www.youtube.com/watch?v='+ id +'?autoplay=0',\n                        thumb: 'https://img.youtube.com/vi/' + id +'/maxresdefault.jpg',\n                        alternate: 'Video abspielen',\n                        position: i,\n                        name: ''\n                    };\n                    videos.push(videoBtn);\n                    i--;\n                }\n            }\n            // Insert after 1st element\n            images.splice(this.videoCarouselPosition, 0, ...videos);\n\n            return images;\n        },\n        videoThumbUrl()\n        {\n            const hasProps = this.currentVariation.variationProperties?.find(prop => prop.id === 4);\n            // Return the properties array filtered by id 192, if it exists\n            const videoUrl = hasProps ? hasProps.properties.filter(prop => prop.id === 192) : [];\n\n            return videoUrl.length > 0;\n        }\n    },\n\n    watch: {\n        currentVariation:\n        {\n            handler(val, oldVal)\n            {\n                if (val !== oldVal)\n                {\n                    setTimeout(() =>\n                    {\n                        this.reInitialize();\n                    }, 1);\n                }\n            },\n            deep: true\n        }\n    },\n\n    mounted()\n    {\n        this.$nextTick(() =>\n        {\n            this.initCarousel();\n            this.initThumbCarousel();\n        });\n    },\n\n    methods:\n    {\n        getImageCount()\n        {\n            return this.carouselImages.length > this.maxQuantity ? this.maxQuantity : this.carouselImages.length;\n        },\n\n        reInitialize()\n        {\n            const $owl = $(this.$refs.single);\n\n            $owl.trigger(\"destroy.owl.carousel\");\n            $owl.html($owl.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n            $owl.find(\".owl-item\").remove();\n\n            const $thumbs = $(this.$refs.thumbs);\n\n            $thumbs.trigger(\"destroy.owl.carousel\");\n            $thumbs.html($thumbs.find(\".owl-stage-outer\").html()).removeClass(\"owl-loaded\");\n            $thumbs.find(\".owl-item\").remove();\n\n            this.initCarousel();\n            this.initThumbCarousel();\n        },\n\n        initCarousel()\n        {\n            const imageCount = this.getImageCount();\n            const carouselSettings = {\n                autoHeight       : true,\n                dots             : this.showDots,\n                items            : 1,\n                lazyLoad         : true,\n                video            : true,\n                rewind           : true,\n                margin           : 10,\n                mouseDrag        : imageCount > 1,\n                nav              : imageCount > 1,\n                navClass         : [\n                    \"owl-single-item-nav left carousel-control\",\n                    \"owl-single-item-nav right carousel-control\"\n                ],\n                navContainerClass: \"\",\n                navText          : [\n                    \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n                    \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n                ],\n                smartSpeed       : 350,\n                onChanged: event =>\n                {\n                    const $thumb = $(this.$refs.thumbs);\n\n                    $thumb.trigger(\"to.owl.carousel\", [\n                        event.page.index,\n                        350\n                    ]);\n                },\n                onInitialized: event =>\n                {\n                    this.initialized = true;\n                }\n            };\n\n            if (this.animationStyle !== \"standard\")\n            {\n                carouselSettings.animateOut = this.animationStyle;\n            }\n\n            $(this.$refs.single).owlCarousel(carouselSettings);\n\n            $(this.$refs.single).on(\"changed.owl.carousel\", event =>\n            {\n                this.currentItem = event.page.index;\n            });\n        },\n\n        initThumbCarousel()\n        {\n            $(this.$refs.thumbs).owlCarousel({\n                autoHeight       : true,\n                dots             : false,\n                items            : 6,\n                lazyLoad         : true,\n                loop             : false,\n                margin           : 5,\n                mouseDrag        : false,\n                center           : false,\n                nav              : true,\n                navClass         : [\n                    \"owl-single-item-nav left carousel-control\",\n                    \"owl-single-item-nav right carousel-control\"\n                ],\n                navContainerClass: \"\",\n                navText          : [\n                    \"<i class=\\\"owl-single-item-control fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i>\",\n                    \"<i class=\\\"owl-single-item-control fa fa-chevron-right\\\" aria-hidden=\\\"true\\\"></i>\"\n                ],\n                smartSpeed       : 350\n            });\n        },\n\n        goTo(index)\n        {\n            if(index < 0) \n            {\n                $('#videoModal').modal('toggle');\n                return;\n            }\n\n            const $owl = $(this.$refs.single);\n\n            $owl.trigger(\"to.owl.carousel\", [\n                index,\n                350\n            ]);\n        },\n\n        getAltText(image)\n        {\n            return image && image.alternate ? image.alternate : this.$options.filters.itemName(this.currentVariation);\n        },\n\n        getImageName(image)\n        {\n            return image && image.name ? image.name : this.$options.filters.itemName(this.currentVariation);\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ItemImageCarousel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\"\nimport script from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\nexport * from \"./ItemImageCarousel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/schweser/GitHub/plentyDevTool/17831/40/Ceres/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5285279e')) {\n      api.createRecord('5285279e', component.options)\n    } else {\n      api.reload('5285279e', component.options)\n    }\n    module.hot.accept(\"./ItemImageCarousel.vue?vue&type=template&id=5285279e&\", function () {\n      api.rerender('5285279e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/src/app/components/item/ItemImageCarousel.vue\"\nexport default component.exports"],"sourceRoot":""}