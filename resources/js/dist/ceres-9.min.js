(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{150:function(e,t,n){"use strict";function s(e,t,n,s,a,o,i,r){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),s&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=l):a&&(l=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var u=d.render;d.render=function(e,t){return l.call(t),u(e,t)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:d}}n.d(t,"a",(function(){return s}))},320:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(10),n(13),n(15),n(69),n(111),n(85),n(8),n(47),n(39),n(5),n(48),n(11),n(9);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=["btn-sm","btn-lg"],o={sm:"btn-sm",md:"",lg:"btn-lg"},i={props:{buttonSize:{type:[String,null],default:null,validator:function(e){return-1!==[""].concat(a,s(Object.keys(o))).indexOf(e)}}},computed:{buttonSizeClass:function(){return o.hasOwnProperty(this.buttonSize)?o[this.buttonSize]:this.buttonSize}}}},381:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-pwd-reset"},[n("form",{attrs:{id:"login-form-"+e._uid,method:"post"}},[n("div",{class:{"modal-body":e.modalElement}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"input-unit",attrs:{"data-validate":"mail"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"email",name:"email",autocomplete:"email",id:"email"+e._uid,"data-autofocus":""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("label",{attrs:{for:"email"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.loginEmail"))+"*")])]),e._v(" "),n("span",{staticClass:"error-msg"},[e._v(e._s(e.$translate("Ceres::Template.loginEnterConfirmEmail")))])]),e._v(" "),n("div",{staticClass:"col-12"},[n("div",{staticClass:"input-unit",class:{"no-bottom":e.modalElement},attrs:{"data-validate":"text"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",name:"password",autocomplete:"current-password",id:"password"+e._uid},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("label",{attrs:{for:"password"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.loginPassword"))+"*")])]),e._v(" "),n("span",{staticClass:"error-msg"},[e._v(e._s(e.$translate("Ceres::Template.loginEmptyPassword")))])])])]),e._v(" "),n("div",{class:{"modal-footer justify-content-between":e.modalElement,row:!e.modalElement}},[n("div",{class:{"col-7 col-sm-4":!e.modalElement}},[n("a",{staticClass:"small text-appearance",attrs:{href:"javascript:void(0)"},on:{click:e.showResetPwdView}},[e._v(e._s(e.$translate("Ceres::Template.loginForgotPassword"))+"?")])]),e._v(" "),n("div",{class:{"col-5 col-sm-8 text-sm-right":!e.modalElement}},[e._t("extend-overlay-buttons"),e._v(" "),n("button",{staticClass:"btn btn-primary btn-appearance btn-medium",class:[{"float-right":!e.modalElement},e.buttonSizeClass],attrs:{disabled:e.isDisabled},on:{click:function(t){return t.preventDefault(),e.validateLogin(t)}}},[n("i",{directives:[{name:"waiting-animation",rawName:"v-waiting-animation",value:e.isDisabled,expression:"isDisabled"}],staticClass:"fa fa-user"}),e._v("\n                    "+e._s(e.$translate("Ceres::Template.login"))+"\n                ")])],2)])])])};s._withStripped=!0;n(28),n(29);var a=n(320),o=n(14),i=n(25),r=n(114),l=n(219),d=n(49),u={mixins:[a.a],props:{backlink:{type:String},modalElement:{type:String},hasToForward:{type:Boolean,default:!1}},data:function(){return{password:"",username:"",loginFields:[],isDisabled:!1}},mounted:function(){var e=this;this.$nextTick((function(){e.loginFields=document.querySelector("#login-form-"+e._uid).querySelectorAll(".input-unit"),l.default.triggerAutoFocus()}))},watch:{password:function(e,t){this.resetError()},username:function(e,t){this.resetError()}},methods:{showLogin:function(){r.default.findModal(document.getElementById(this.modalElement)).show()},validateLogin:function(){var e=this;d.default.validate($("#login-form-"+this._uid)).done((function(){e.sendLogin()})).fail((function(e){d.default.markInvalidFields(e,"error")}))},sendLogin:function(){var e=this;this.isDisabled=!0,o.default.post("/rest/io/customer/login",{email:this.username,password:this.password},{supressNotifications:!0}).done((function(t){o.default.setToken(t),i.default.success(e.$translate("Ceres::Template.loginSuccessful")).closeAfter(1e4),null!==e.backlink&&e.backlink?location.assign(decodeURIComponent(e.backlink)):e.hasToForward?location.assign(location.origin):location.reload()})).fail((function(t){switch(e.isDisabled=!1,t.error.code){case 401:e.loginFields.forEach((function(e){return e.classList.add("has-login-error")}));var n="Ceres::Template.loginFailed";t.error.message.length>0&&"user is blocked"===t.error.message&&(n="Ceres::Template.loginBlocked"),i.default.error(e.$translate(n)).closeAfter(1e4);break;default:return}}))},showResetPwdView:function(){this.resetError(),this.$root.$data.renderForgotPasswordModal=!0,this.modalElement?r.default.findModal(document.getElementById(this.modalElement)).hide().then((function(){r.default.findModal(document.getElementById("resetPwd")).show()})):r.default.findModal(document.getElementById("resetPwd")).show()},resetError:function(){this.loginFields.forEach((function(e){return e.classList.remove("has-login-error")})),d.default.unmarkAllFields("#login-form-"+this._uid)}}},c=n(150),m=Object(c.a)(u,s,[],!1,null,null,null);m.options.__file="resources/js/src/app/components/customer/login/Login.vue";t.default=m.exports}}]);
//# sourceMappingURL=ceres-9.min.js.map