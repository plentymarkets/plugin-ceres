{% extends getPartial('page-design') %}

{% import "Ceres::PageDesign.Macros.LayoutContainer" as LayoutContainer %}

{% set showDefaultHomepage = config("Ceres.default.homepage") %}
{% set companyLogo  = config("Ceres.header.company_logo") %}
{% set companyName  = trans("Ceres::Template.headerCompanyName") %}

{% block PartialHead %}
    <meta name="description" content="{{ trans('Ceres::Template.homepageMetaDescription') }}">
    <meta name="robots" content="{% if forceNoIndex %}NOINDEX{% else %}{{ config("Ceres.meta.robots_home") }}{% endif %}">
    <meta property="og:title" content="{{ companyName }}"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="{{ services.webstoreConfig.getWebstoreConfig().domainSsl }}"/>
    <meta property="og:image"
          content="{% if ('http' in companyLogo) or ('layout/' in companyLogo) %}{{ companyLogo }}{% else %}{{ plugin_path('Ceres') }}/{{ companyLogo }}{% endif %}"/>

    <script type="application/ld+json">
        {"@context": "http://schema.org","@type": "WebSite","url": "{{ services.webstoreConfig.getWebstoreConfig().domainSsl }}","potentialAction":{"@type": "SearchAction","target": "{{ services.webstoreConfig.getWebstoreConfig().domainSsl }}/search?query={search_term}","query-input": "required name=search_term"}}
    </script>

    <title>{{ companyName }}</title>
{% endblock %}

{% block PageBody %}


    {% if ceresConfig.homepage.showShopBuilderContent or request.get('isContentBuilder') == 1 %}
    {{ component( "Ceres::Checkout.Components.Checkout" ) }}

        <div class="page-content checkout container-max">
            <div class="row">
                <div class="col">
                    <checkout
                        v-cloak
                        :initial-checkout="{{ services.checkout.getCheckout() | json_encode() }}"
                        :delivery-address-list="{{ services.customer.getAddresses(2) | json_encode }}"
                        :selected-delivery-address="{{ services.checkout.getDeliveryAddressId() | json_encode }}"
                        :billing-address-list="{{ services.customer.getAddresses(1) | json_encode }}"
                        :selected-billing-address="{{ services.checkout.getBillingAddressId() | json_encode }}">
                        {% for content in container("Ceres::Homepage") if content.plugin == "Plenty" %}
                            {{ content.result|raw }}
                        {% endfor %}
                    </chekcout>
                </div>
            </div>
        </div>

    {% else %}

        {% if showDefaultHomepage == "true" %}
            {% include 'Ceres::Homepage.MarketingHomepage.twig' %}
        {% else %}
            {% block ThemeHomepage %}
                {% include 'Ceres::Homepage.DefaultHomepage.twig' %}
            {% endblock %}
        {% endif %}

    {% endif %}



{% endblock %}